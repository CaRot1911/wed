

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Basic Usage &mdash; Wed v0.20.4 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     'v0.20.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Wed v0.20.4 documentation" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="index.html">Wed v0.20.4 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="basic-usage">
<h1>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h1>
<p>Wed is a schema-aware editor for XML documents. It runs in a web
browser. The software is at the beta stage. It is being used in a
project for editing scholarly articles. We aim to make it extensible
by means of a stable API, but the API is likely to change quickly for
now.</p>
<p>Known limitations:</p>
<ul>
<li><p class="first">Wed currently does understand a large subset of Relax NG, but some
constructs are not supported. See the <a class="reference external" href="https://github.com/mangalam-research/salve/">salve</a> package for details.</p>
</li>
<li><p class="first">Wed currently does not support schemas that allow multiple choices
at the root (e.g. TEI vs teiCorpus). These schemas must be
customized to allow only one top level element.</p>
</li>
<li><p class="first">Wed does not currently support ordering attributes according to some
preference. (The order is whatever the DOM implementation does by
default.)</p>
</li>
<li><p class="first">Wed does not currently support multiline values in attributes.</p>
</li>
<li><p class="first">Empty elements appear in the editor as if they had an opening and
closing tag, irrespective of how they are encoded in the original
document. So <tt class="docutils literal"><span class="pre">&lt;foo/&gt;</span></tt> and <tt class="docutils literal"><span class="pre">&lt;foo&gt;&lt;/foo&gt;</span></tt> are treated the
same. Part of this problem is due to the fact that wed sees the
document as a DOM tree, not as a serialization. In a DOM tree,
<tt class="docutils literal"><span class="pre">&lt;foo/&gt;</span></tt> and <tt class="docutils literal"><span class="pre">&lt;foo&gt;&lt;/foo&gt;</span></tt> are the same.</p>
</li>
<li><p class="first">Elements that <em>cannot</em> contain anything appear in the editor as if
they <em>could</em>. The validator raises an error if these elements are
filled with any contents but it would be nicer if they were
displayed in a way that distinguished them from the elements that
<em>can</em> be filled with contents. We worked on a prototype that would
check whether an element <em>can</em> contain anything and display it
differently if it could not. However, this required that the
rendering engine query the validating engine during rendering, which
made rendering extremely slow. Since the editor will raise an error
if an element that should be empty is filled erroneously, we&#8217;ve
decided that a solution to this problem can wait.</p>
</li>
<li><p class="first">Eventually the plan is to handle XML namespace changes completely,
and there is incipient code to deal with this; for now the safe
thing to do if you have a file using multiple namespaces is to
declare them once and for all on the top element, and never change
them throughout the document. Otherwise, problems are likely.</p>
<p>[A significant issue here is that the various browsers do not handle
namespaces in the same way. For instance FF and Chrome are
absolutely fine if you specify <tt class="docutils literal"><span class="pre">xmlns</span></tt> with DOM&#8217;s <tt class="docutils literal"><span class="pre">setAttribute</span></tt> on
an element that is on the same namespace as the namespace specified
with the new <tt class="docutils literal"><span class="pre">xmlns</span></tt> attribute and they will produce a correct
serialization. IE, on the other hand, will produce a node with two
<tt class="docutils literal"><span class="pre">xmlns</span></tt> attributes.]</p>
</li>
<li><p class="first">We&#8217;ve not tested a setup in which more than one wed instance appears
on the same page.</p>
</li>
<li><p class="first">Keyboard navigation in contextual menus works. However, if the mouse
is hovering over menu items, two items will be highlighted at once,
which may be confusing. This seems to be a limitation of CSS which
Bootstrap does nothing to deal with. (One element may be in the
focused state (keyboard) while another is in the hover state.)</p>
</li>
<li><p class="first">Wed does not work with RTL scripts. There no inherent reason wed
could not support them but the project for which it is developed
currently does not need support for RTL scripts. So no resources
have been expended towards supporting this.</p>
</li>
<li><p class="first">Wed is not internationalized. Although the contents of a document
could be in any language, wed&#8217;s UI is in English. Again, there is no
inherent reason wed could not support other languages for the
UI. The project for which it is developed currently does not need
support for other languages, hence this state of affairs.</p>
</li>
<li><p class="first">See also <a class="reference internal" href="#browser-requirements">Browser Requirements</a>.</p>
</li>
</ul>
</div>
<div class="section" id="browser-requirements">
<span id="usage-browser-requirements"></span><h1>Browser Requirements<a class="headerlink" href="#browser-requirements" title="Permalink to this headline">¶</a></h1>
<p>Wed is primarily developed using a recent version of Chrome (version
38; versions 26-37 have also been used earlier) and a recent version
of Firefox (version 31; versions 20-30 have also been used earlier)
for testing. (But see a note about Chrome 34 below.) The fact that wed
is developed using these browsers influences the severity and
frequency of bugs you can expect to run into.</p>
<p>Here is the list of officially supported browsers, in order of
decreasing priority:</p>
<ul class="simple">
<li>Chrome 38 and higher and Firefox 31 and higher, about equally.</li>
<li>The current ESR (Extended Support Release) of Firefox, which is
Firefox 31 at the time of writing.</li>
<li>IE 10 and 11, about equally.</li>
<li>Relatively recent versions of Chrome and Firefox: older than the
latest releases but not very old. (Yeah, this is vague. Sorry about
that.) In the case of Firefox this means versions newer than the
current ESR but older than the latest release.</li>
<li>The previous ESR of Firefox, provided it does not cause too much of
a burden. (Support for FF24 was dropped due to this: there was an
obscure bug that was not worth fighting against.)</li>
</ul>
<p>File an issue on github if you find a problem with one of the
supported browsers above.</p>
<p>We would like to support phone and tablet browsers but due to a lack
of development resources, such support is unlikely to materialize
soon. In decreasing order of likelihood, the following cases are
unlikely to ever be supported:</p>
<ul class="simple">
<li>Versions of Chrome and Firefox older than those mentioned above.</li>
<li>Chrome 34: the luminaries at Google decided to remove
<tt class="docutils literal"><span class="pre">Attr.ownerElement</span></tt> from Chrome 34. It was reintroduced in
Chrome 35.</li>
<li>IE 9. We&#8217;d need a) a substantial demand for it and b) people willing
to participate in providing support. As time goes by, wed is
accumulating features that are not supported natively in IE 9, so
this possibility is becoming more and more remote.</li>
<li>IE 8 and earlier.</li>
<li>Antique browsers.</li>
<li>Oddball browsers or other software or hardware systems that present
web pages. (E.g. gaming consoles, smart TVs.)</li>
<li>Operating systems or browsers no longer supported by their own
vendors.</li>
</ul>
<div class="section" id="os-x">
<h2>OS X<a class="headerlink" href="#os-x" title="Permalink to this headline">¶</a></h2>
<p>The test suite depends on native events to do its work, but support
for native events in OS X is spotty:</p>
<ul class="simple">
<li>Chrome: it is possible to generate <em>some</em> native events.</li>
<li>Firefox reports that it does not support native events at all.</li>
<li>Safari does not support native events at all.</li>
</ul>
<p>Your best bet in OS X is to use Chrome because we can&#8217;t run the test
suite with Firefox or Safari.</p>
</div>
<div class="section" id="safari">
<h2>Safari<a class="headerlink" href="#safari" title="Permalink to this headline">¶</a></h2>
<p>Safari is a vexing case. Wed may or may not work on Safari. We
currently cannot run the automated test suite with Safari. Manual
testing is out of the question.</p>
<p>We would like to have wed be supported on recent versions of Safari to
the same extent it is supported on recent versions of Chrome, Firefox
and IE. The tool we use to test it is Selenium. For better or for
worse this is the go-to tool to do the kind of test wed
needs. Selenium&#8217;s support for Chrome and Firefox benefits from
collaboration from developers who are responsible for developing these
two browsers. In the case of IE, it appears (from reading bug reports)
that Microsoft is communicating with the Selenium developers to
resolve issues. However, we&#8217;ve not seen evidence of any collaboration
between the Selenium project and Apple. Thus testing support for
Safari is deficient, and it is not something that we here have the
resources to fix.</p>
<p>If you desire that wed be actually tested on Safari and are in a
position to contribute substantial monetary or technical resources
towards this goal, you are welcome to contact us. In particular,
immediate problem we&#8217;ve run into when trying to test on Safari is this
<a class="reference external" href="http://code.google.com/p/selenium/issues/detail?id=4136">Selenium issue</a>. If you
want fix it, then this would bring us one step closer to being able to
test wed on Safari. And regarding the state of Selenium support for
Safari, take note this response from a Selenium project member:</p>
<blockquote>
<div>Safari is not a priority, sorry. But your patches are welcome!</div></blockquote>
<p>Absent these patches, wed is unlikely to support Safari.</p>
<p>On the other hand, if you feel the urge to write an email saying &#8220;You
should just...&#8221;, then please abstain because there is nothing &#8220;just&#8221;
about testing web applications.</p>
</div>
</div>
<div class="section" id="dependencies">
<h1>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h1>
<p>Wed is packaged as a RequireJS module. To use it in a browser
environment, you need to first load RequireJS and pass to it a
configuration that will allow it to find wed&#8217;s code. An example of
such configuration, which allows running the browser-dependent test
suite, is located in <a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/config/requirejs-config-dev.js">config/requirejs-config-dev.js</a>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you want to change this configuration for
experimentation or to match your local setup, please copy
it to the <tt class="docutils literal"><span class="pre">local_config</span></tt> directory and edit it
<em>there</em>. This directory is not tracked by git. This is
true of all files that are stored in <a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/config/">config/</a>.</p>
</div>
<p>Please see the <a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/package.json">package.json</a>,
<a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/config/requirejs-config-dev.js">config/requirejs-config-dev.js</a>, <a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/Makefile">Makefile</a> and
<a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/build.mk">build.mk</a> files for details regarding run-time and
development dependencies. Running the test suite also requires that
<a class="reference external" href="http://saxon.sourceforge.net/">saxon</a> be installed.</p>
<p>Building wed&#8217;s documentation <strong>additionally</strong> requires the following
packages:</p>
<ul class="simple">
<li>jsdoc3</li>
<li>rst2html</li>
<li>perl (a stop-gap measure which we plan to get rid of eventually)</li>
</ul>
<p>Running wed&#8217;s selenium-based tests <strong>additionally</strong> requires the
following:</p>
<ul class="simple">
<li>Python 2.7.</li>
<li>Python&#8217;s Selenium package.</li>
<li><a class="reference external" href="http://github.com/mangalam-research/selenic">selenic</a></li>
<li>behave (the python package)</li>
</ul>
<p>If you want to contribute to wed, your code will have to pass the
checks listed in <a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/.glerbl/repo_conf.py">.glerbl/repo_conf.py</a>. So you either have to
install glerbl to get those checks done for you or run the checks
through other means. See <a class="reference internal" href="#contributing">Contributing</a>.</p>
</div>
<div class="section" id="building">
<h1>Building<a class="headerlink" href="#building" title="Permalink to this headline">¶</a></h1>
<p>Everything generated during a build is output to the <tt class="docutils literal"><span class="pre">build/</span></tt>
subdirectory, except for some documentation files like
<tt class="docutils literal"><span class="pre">README.html</span></tt> and <tt class="docutils literal"><span class="pre">CHANGELOG.html</span></tt>, which are in the root
directory.</p>
<p>For now, wed uses a <tt class="docutils literal"><span class="pre">Makefile</span></tt> and associated <tt class="docutils literal"><span class="pre">build.mk</span></tt> to build
itself. You might want to create a <tt class="docutils literal"><span class="pre">local.mk</span></tt> file to record
settings specific to your own build environment. See the start of the
<a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/build.mk">build.mk</a> to see what variables you can set. When everything
is set, run:</p>
<div class="highlight-python"><pre>$ make</pre>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you get a failure please try issuing <tt class="docutils literal"><span class="pre">make</span></tt> a second
time. There are some (rare) usage scenarios in which make
can get confused about its dependencies. A second run
clears it up.</p>
</div>
<p>The Makefile will download external packages (like jquery and
Bootstrap) and place them in <tt class="docutils literal"><span class="pre">downloads/</span></tt>. It will then create a
tree of files that could be served by a web server. The files will be
in <tt class="docutils literal"><span class="pre">build/standalone/</span></tt>. As the name &#8220;standalone&#8221; implies, this build
includes <strong>everything</strong> needed to run wed on your own server, except
the configuration for RequireJS.</p>
<p>Make will additionally create an optimized version of wed in
<tt class="docutils literal"><span class="pre">build/standalone-optimized/</span></tt>. This is a version that has been
optimized using RequireJS&#8217;s <tt class="docutils literal"><span class="pre">r.js</span></tt> optimizer. This optimization
exists for illustration purposes and for testing wed. See the
<a class="reference internal" href="tech_notes.html#tech-notes-deployment-considerations"><em>Deployment Considerations</em></a> section in <a class="reference internal" href="tech_notes.html"><em>Advanced Usage Notes</em></a> to
determine whether this is the optimization you want to use to deploy
wed.</p>
</div>
<div class="section" id="testing">
<h1>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h1>
<p>See <a class="reference internal" href="tech_notes.html"><em>Advanced Usage Notes</em></a>.</p>
</div>
<div class="section" id="local-demos">
<h1>Local Demos<a class="headerlink" href="#local-demos" title="Permalink to this headline">¶</a></h1>
<div class="section" id="demo-saving-to-local-storage">
<h2>Demo Saving to Local Storage<a class="headerlink" href="#demo-saving-to-local-storage" title="Permalink to this headline">¶</a></h2>
<p>The demo that uses your own browser&#8217;s local storage is ready to use
once wed is built.</p>
</div>
<div class="section" id="demos-saving-to-a-server">
<h2>Demos Saving to a Server<a class="headerlink" href="#demos-saving-to-a-server" title="Permalink to this headline">¶</a></h2>
<p>To see this demo, you must have a minimal server running just like the
one needed to run the browser-dependent test suite (see the
<a class="reference internal" href="tech_notes.html#tech-notes-in-browser-tests"><em>In-Browser Tests</em></a> section in <a class="reference internal" href="tech_notes.html"><em>Advanced Usage Notes</em></a>) and
then point your browser to either:</p>
<ul class="simple">
<li><a class="reference external" href="http://localhost:8888/build/standalone/kitchen-sink.html">http://localhost:8888/build/standalone/kitchen-sink.html</a> to
view the demo with the unoptimized file tree.</li>
<li>or
<a class="reference external" href="http://localhost:8888/build/standalone-optimized/kitchen-sink.html">http://localhost:8888/build/standalone-optimized/kitchen-sink.html</a>
to view the demo with an optimized file tree.</li>
</ul>
<p>The demo currently starts with an empty document using a vanilla TEI
schema. Things you can do:</p>
<ul>
<li><p class="first">Hit F1 to get help. This help also displays the information
regarding how and when the wed instance you are using was built.</p>
</li>
<li><p class="first">Use the left mouse button to bring up a context menu. Such a menu
exists for starting tags and all positions that are editable. This
menu allows inserting elements. Ctrl-/ also brings up this menu.</p>
</li>
<li><p class="first">Insert text where text is valid.</p>
</li>
<li><p class="first">Ctrl-[ to reduce the <a class="reference internal" href="#label-visibility"><em>label visibility</em></a> level.</p>
</li>
<li><p class="first">Ctrl-[ to increase the label visibility level.</p>
</li>
<li><p class="first">Ctrl-Z to undo.</p>
</li>
<li><p class="first">Ctrl-Y to redo.</p>
</li>
<li><p class="first">Ctrl-C to copy.</p>
</li>
<li><p class="first">Ctrl-V to paste.</p>
</li>
<li><p class="first">Ctrl-X to cut.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Browsers put significant obstacles into the path of any
JavaScript code that wants to handle cutting
itself. (It is a security issue.) Consequently, it is
possible that cutting won&#8217;t work on your platform. Wed
<em>cannot</em> verify that cutting <em>will</em> work on your
platform and cannot for now <em>reliably</em> issue warnings
about problems. So... it is possible that if you try to
cut, the selected data will be deleted from the editing
screen but will <strong>not</strong> be copied into the clipboard.</p>
</div>
</li>
<li><p class="first">Ctrl-S to save. The data is currently dumped into a file located at
<tt class="docutils literal"><span class="pre">build/ajax/save.txt</span></tt>, and you won&#8217;t be able to reload it. For full
functionality wed needs to be used with a server able to save the
data and serve it intelligently.</p>
</li>
<li><p class="first">Ctrl-` to go into development mode. Since this is meant only for
developers, you should read the source code of wed to know what this
allows. (In particular, search for <tt class="docutils literal"><span class="pre">this._development_mode</span></tt> in the
<tt class="docutils literal"><span class="pre">_globalKeydownHandler</span></tt> method.)</p>
</li>
</ul>
<p>It is possible to run the kitchen sink with a different mode than the
default one (generic) by passing a <tt class="docutils literal"><span class="pre">mode</span></tt> parameter in the URL, for
instance the URL
<a class="reference external" href="http://localhost:8888/web/kitchen-sink.html?mode=tei">http://localhost:8888/web/kitchen-sink.html?mode=tei</a> would tell
the kitchen sink to load the tei mode.</p>
</div>
<div class="section" id="label-visibility">
<span id="id1"></span><h2>Label Visibility<a class="headerlink" href="#label-visibility" title="Permalink to this headline">¶</a></h2>
<p>Wed allows the user to reduce or increase the number of element
labeled on the screen. How this works is dependent in part on the
specific mode that the user has selected. For instance, the default
mode that comes with wed (the &#8220;generic&#8221; mode) knows only two levels of
visibility: 0 and 1. At level 0, no elements are labeled. At level 1,
all elements are labeled. A mode with levels 0, 1, and 2 would label
all elements at level 2, no elements at level 0 and some elements at
level 1. Which elements are labeled depends on how the mode designer
designed the mode.</p>
</div>
</div>
<div class="section" id="using">
<h1>Using<a class="headerlink" href="#using" title="Permalink to this headline">¶</a></h1>
<p>To include wed in a web page you must:</p>
<ul>
<li><p class="first">Require <a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/lib/wed/wed.js">lib/wed/wed.js</a></p>
</li>
<li><p class="first">Instantiate an <tt class="docutils literal"><span class="pre">Editor</span></tt> object of that module as follows:</p>
<div class="highlight-python"><pre>var editor = new wed.Editor();
[...]
editor.init(widget, options, data);</pre>
</div>
<p>Between the creation of the <tt class="docutils literal"><span class="pre">Editor</span></tt> object and the call to
<tt class="docutils literal"><span class="pre">init</span></tt>, there conceivably could be some calls to add event
handlers or condition handlers. The <tt class="docutils literal"><span class="pre">widget</span></tt> parameter must be an
element (preferably a <tt class="docutils literal"><span class="pre">div</span></tt>) that wed will take over to install
its GUI. The <tt class="docutils literal"><span class="pre">options</span></tt> parameter is a dictionary which at present
understands the following keys:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">schema</span></tt>: the path to the schema to use for interpreting the
document. This file must contain the result of doing the schema
conversion required by salve since wed uses salve. See
salve&#8217;s documentation.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">mode</span></tt>: a simple object recording mode parameters. This object
must have a <tt class="docutils literal"><span class="pre">path</span></tt> field set to the RequireJS path of the
mode. An optional <tt class="docutils literal"><span class="pre">options</span></tt> field may contain options to be
passed to the mode. Wed comes bundled with a generic mode located
at <a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/lib/wed/modes/generic/generic.js">lib/wed/modes/generic/generic.js</a>.</p>
<p>The <tt class="docutils literal"><span class="pre">path</span></tt> field may be abbreviated. For instance if wed is
given the path <tt class="docutils literal"><span class="pre">&quot;foo&quot;</span></tt>, it will try to load the module
<tt class="docutils literal"><span class="pre">foo</span></tt>. If this fails, it will try to load <tt class="docutils literal"><span class="pre">modes/foo/foo</span></tt>.  If
this fails, it will try to load <tt class="docutils literal"><span class="pre">modes/foo/foo_mode</span></tt>. These
paths are all relative to the <tt class="docutils literal"><span class="pre">wed/</span></tt> root directory.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">ajaxlog</span></tt>: See the documentation about <a class="reference internal" href="tech_notes.html#remote-logging"><em>remote logging</em></a>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">save</span></tt>: See the documentation about <a class="reference internal" href="tech_notes.html#saving"><em>saving</em></a>.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">ignore_module_config</span></tt>: This tells wed to not try to get a
configuration from RequireJS&#8217; <tt class="docutils literal"><span class="pre">module.config()</span></tt>. This may be
necessary to handle some configuration scenarios.</p>
</li>
</ul>
<p>Wed will get a configuration from RequireJS <tt class="docutils literal"><span class="pre">module.config()</span></tt> and
will <strong>merge</strong> it with the <tt class="docutils literal"><span class="pre">options</span></tt> parameter using jQuery&#8217;s
<tt class="docutils literal"><span class="pre">$.extend</span></tt>. So if a key appears both in the <tt class="docutils literal"><span class="pre">module.config()</span></tt>
object and in the <tt class="docutils literal"><span class="pre">options</span></tt> object, the latter value will override
the former. <strong>Note that it is not possible to undefine a value set
in ``module.config()``</strong> because <tt class="docutils literal"><span class="pre">$.extend</span></tt> ignores undefined
values. One way around this problem is to specify
<tt class="docutils literal"><span class="pre">ignore_module_config</span></tt> in the <tt class="docutils literal"><span class="pre">options</span></tt> object. See the
RequireJS documentation. The <tt class="docutils literal"><span class="pre">wed/wed</span></tt> configuration in
<a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/config/requirejs-config-dev.js">config/requirejs-config-dev.js</a> gives an example of how
this can be used.</p>
<p>The <tt class="docutils literal"><span class="pre">data</span></tt> parameter is a string containing the document to edit,
in XML format.</p>
</li>
</ul>
<p>Here is an example of an <tt class="docutils literal"><span class="pre">options</span></tt> object:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
     <span class="n">schema</span><span class="p">:</span> <span class="s">&#39;test/tei-simplified-rng.js&#39;</span><span class="p">,</span>
     <span class="n">mode</span><span class="p">:</span> <span class="p">{</span>
         <span class="n">path</span><span class="p">:</span> <span class="s">&#39;wed/modes/generic/generic&#39;</span><span class="p">,</span>
         <span class="n">options</span><span class="p">:</span> <span class="p">{</span>
             <span class="n">meta</span><span class="p">:</span> <span class="s">&#39;test/tei-meta&#39;</span>
         <span class="p">}</span>
     <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">mode.options</span></tt> will be passed to the generic mode when it is
created. What options are accepted and what they mean is determined by
each mode.</p>
<p>The <a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/lib/wed/onerror.js">lib/wed/onerror.js</a> module installs a global onerror
handler. By default it calls whatever onerror handler already existed
at the time of installation. Sometimes this is not the desired
behavior (for instance when testing with mocha). In such cases the
<tt class="docutils literal"><span class="pre">suppress_old_onerror</span></tt> option set to a true value will prevent the
module from calling the old onerror.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Wed installs its own handler so that if any error occurs
it knows about it, attempts to save the data and forces
the user to reload. The unfortunate upshot of this is
that any other JavaScript executing on a page where wed
is running could trip wed&#8217;s onerror handler and cause wed
to think it crashed. For this reason you must not run
wed with JavaScript code that causes onerror to fire.</p>
</div>
</div>
<div class="section" id="round-tripping">
<h1>Round-Tripping<a class="headerlink" href="#round-tripping" title="Permalink to this headline">¶</a></h1>
<p>At this stage wed does not guarantee that saving an <strong>unmodified</strong>
document will sent the exact same string as what it was originally
given to edit. This is due to the fact that the same document can be
represented in XML in multiple ways. Notably:</p>
<ul class="simple">
<li>Comments, CDATA, and processing instructions are not preserved.</li>
<li>The order of the attributes could differ.</li>
<li>The order and location of namespaces declarations could differ.</li>
<li>The encoding of empty elements could differ. That is, <tt class="docutils literal"><span class="pre">&lt;foo&gt;&lt;/foo&gt;</span></tt>
could become <tt class="docutils literal"><span class="pre">&lt;foo/&gt;</span></tt> or vice-versa.</li>
<li>The presence or absence of a newline on the last line may not be
preserved.</li>
</ul>
</div>
<div class="section" id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h1>
<p>Contributions must pass the commit checks turned on in
<a class="reference external" href="https://github.com/mangalam-research/wed/blob/master/.glerbl/repo_conf.py">.glerbl/repo_conf.py</a>. Use <tt class="docutils literal"><span class="pre">glerbl</span> <span class="pre">install</span></tt> to install the
hooks. Glerbl itself can be found at
<a class="reference external" href="https://github.com/lddubeau/glerbl">https://github.com/lddubeau/glerbl</a>. It will eventually make its way to
the Python package repository so that <tt class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">glerbl</span></tt> will
work.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Basic Usage</a></li>
<li><a class="reference internal" href="#browser-requirements">Browser Requirements</a><ul>
<li><a class="reference internal" href="#os-x">OS X</a></li>
<li><a class="reference internal" href="#safari">Safari</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
<li><a class="reference internal" href="#building">Building</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
<li><a class="reference internal" href="#local-demos">Local Demos</a><ul>
<li><a class="reference internal" href="#demo-saving-to-local-storage">Demo Saving to Local Storage</a></li>
<li><a class="reference internal" href="#demos-saving-to-a-server">Demos Saving to a Server</a></li>
<li><a class="reference internal" href="#label-visibility">Label Visibility</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using">Using</a></li>
<li><a class="reference internal" href="#round-tripping">Round-Tripping</a></li>
<li><a class="reference internal" href="#contributing">Contributing</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/usage.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="index.html">Wed v0.20.4 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, 2014 Mangalam Research Center for Buddhist Languages.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>