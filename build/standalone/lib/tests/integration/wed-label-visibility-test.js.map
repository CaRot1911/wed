{"version":3,"file":"wed-label-visibility-test.js","sourceRoot":"","sources":["../../../../../lib/tests/integration/wed-label-visibility-test.ts"],"names":[],"mappings":";;;IAWA,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;IAE3B,QAAQ,CAAC,6BAA6B,EAAE;QACtC,IAAI,KAAkB,CAAC;QACvB,IAAI,MAAc,CAAC;QACnB,IAAI,YAA0B,CAAC;QAC/B,IAAI,EAAuB,CAAC;QAC5B,IAAI,MAA2B,CAAC;QAEhC,MAAM,CAAC;YACL,KAAK,GAAG,IAAI,2BAAW,CACrB,qEAAqE,EACrE,YAAY,CAAC,MAAM,EACnB,QAAQ,CAAC,CAAC;YACZ,CAAG,qBAAM,CAAW,CAAC;YACrB,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC;gBACvB,kCAAkC;gBACjC,MAAM,CAAC,SAAiB,CAAC,aAAa,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,CAAC;gBAC7D,YAAY,GAAG,MAAM,CAAC,YAAY,CAAC;gBACnC,EAAE,GAAG,MAAM,CAAC,OAAO,CAAC,gBAAgB,CAAC,UAAU,CAAC,CAAC;gBACjD,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC;YAC1D,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,SAAS,CAAC;YACR,KAAK,CAAC,KAAK,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC;QAEH,KAAK,CAAC;YACJ,KAAK,CAAC,OAAO,EAAE,CAAC;YAEhB,kCAAkC;YACjC,MAAc,GAAG,SAAS,CAAC;YAC5B,kCAAkC;YACjC,YAAoB,GAAG,SAAS,CAAC;QACpC,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,kCAAkC,EAAE;YACrC,kCAAkC;YAClC,MAAM,CAAE,MAAc,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACtD,IAAM,MAAM,GAAG,MAAM,CAAC,MAAM;iBACzB,aAAa,CACZ,yDAAyD,CAC3C,CAAC;YACnB,MAAM,CAAC,KAAK,EAAE,CAAC;YACf,kCAAkC;YAClC,MAAM,CAAE,MAAc,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACxD,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,oCAAoC,EAAE;YACvC,kCAAkC;YAClC,MAAM,CAAE,MAAc,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACtD,IAAM,MAAM,GAAG,MAAM,CAAC,MAAM;iBACzB,aAAa,CACZ,yDAAyD,CAC3C,CAAC;YACnB,MAAM,CAAC,KAAK,EAAE,CAAC;YACf,kCAAkC;YAClC,MAAM,CAAE,MAAc,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;QACxD,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC","sourcesContent":["/**\n * @author Louis-Dominique Dubeau\n * @license MPL 2.0\n * @copyright Mangalam Research Center for Buddhist Languages\n */\nimport { CaretManager } from \"wed/caret-manager\";\nimport { Editor } from \"wed/editor\";\n\nimport * as globalConfig from \"../base-config\";\nimport { EditorSetup } from \"../wed-test-util\";\n\nconst expect = chai.expect;\n\ndescribe(\"wed label visibility level:\", () => {\n  let setup: EditorSetup;\n  let editor: Editor;\n  let caretManager: CaretManager;\n  let ps: NodeListOf<Element>;\n  let titles: NodeListOf<Element>;\n\n  before(() => {\n    setup = new EditorSetup(\n      \"/base/build/standalone/lib/tests/wed_test_data/source_converted.xml\",\n      globalConfig.config,\n      document);\n    ({ editor } = setup);\n    return setup.init().then(() => {\n      // tslint:disable-next-line:no-any\n      (editor.validator as any)._validateUpTo(editor.dataRoot, -1);\n      caretManager = editor.caretManager;\n      ps = editor.guiRoot.querySelectorAll(\".body .p\");\n      titles = editor.guiRoot.getElementsByClassName(\"title\");\n    });\n  });\n\n  afterEach(() => {\n    setup.reset();\n  });\n\n  after(() => {\n    setup.restore();\n\n    // tslint:disable-next-line:no-any\n    (editor as any) = undefined;\n    // tslint:disable-next-line:no-any\n    (caretManager as any) = undefined;\n  });\n\n  it(\"can be reduced using the toolbar\", () => {\n    // tslint:disable-next-line:no-any\n    expect((editor as any).currentLabelLevel).to.equal(1);\n    const button = editor.widget\n      .querySelector(\n        \"[data-original-title='Decrease label visibility level']\",\n      ) as HTMLElement;\n    button.click();\n    // tslint:disable-next-line:no-any\n    expect((editor as any).currentLabelLevel).to.equal(0);\n  });\n\n  it(\"can be increased using the toolbar\", () => {\n    // tslint:disable-next-line:no-any\n    expect((editor as any).currentLabelLevel).to.equal(1);\n    const button = editor.widget\n      .querySelector(\n        \"[data-original-title='Increase label visibility level']\",\n      ) as HTMLElement;\n    button.click();\n    // tslint:disable-next-line:no-any\n    expect((editor as any).currentLabelLevel).to.equal(2);\n  });\n});\n"]}