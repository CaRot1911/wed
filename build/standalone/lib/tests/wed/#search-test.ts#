/**
 * @author Louis-Dominique Dubeau
 * @license MPL 2.0
 * @copyright Mangalam Research Center for Buddhist Languages
 */
import { Search } from "wed/search";
import * as wed from "wed/wed";

import * as globalConfig from "../base-config";

import { EditorSetup } from "../wed-test-util";

const expect = chai.expect;

describe("search", () => {
  let setup: EditorSetup;
  let editor: wed.Editor;

  before(() => {
    setup = new EditorSetup(
      "/base/build/standalone/lib/tests/wed_test_data/source_converted.xml",
      globalConfig.config,
      document);
    ({ editor } = setup);
    return setup.init();
  });

  afterEach(() => {
    setup.reset();
  });

  after(() => {
    setup.restore();
    // tslint:disable-next-line:no-any
    (editor as any) = undefined;
  });

  describe("Search", () => {
    it("uses the whole document if no scope is specified", () => {
      const search = new Search(editor.caretManager,
                                editor.guiRoot,
                                editor.caretManager.caret!, undefined);
      expect(search).to.have.property("scope").equal(
    });
  });
});
