define("wed",["jquery","bootstrap","salve-dom","merge-options","ajv","salve","bootbox","interactjs","rangy","typeahead","bootstrap-notify","log4javascript","dexie","bluejax"],function(t,e,n,r,i,o,a,s,u,c,l,d,f,h){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=76)}([function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}e.a=r;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};Object.assign},function(t,e,n){"use strict";function r(t){return t instanceof d||"syncErrorThrowable"in t&&t[u.a]}n.d(e,"a",function(){return d});var i=n(0),o=n(28),a=n(79),s=n(8),u=n(55),c=n(40),l=n(54),d=function(t){function e(e,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a.a;break;case 1:if(!e){o.destination=a.a;break}if("object"==typeof e){if(r(e)){var s=e[u.a]();o.syncErrorThrowable=s.syncErrorThrowable,o.destination=s,s.add(o)}else o.syncErrorThrowable=!0,o.destination=new f(o,e);break}default:o.syncErrorThrowable=!0,o.destination=new f(o,e,n,i)}return o}return i.a(e,t),e.prototype[u.a]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this,e=t._parent,n=t._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=n,this},e}(s.a),f=function(t){function e(e,n,r,i){var s=t.call(this)||this;s._parentSubscriber=e;var u,c=s;return Object(o.a)(n)?u=n:n&&(u=n.next,r=n.error,i=n.complete,n!==a.a&&(c=Object.create(n),Object(o.a)(c.unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=u,s._error=r,s._complete=i,s}return i.a(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=c.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(l.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(l.a)(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};c.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.a.useDeprecatedSynchronousErrorHandling)throw t;Object(l.a)(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!c.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return c.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(Object(l.a)(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(d)},function(t,e,n){"use strict";function r(t){if(t||(t=s.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}n.d(e,"a",function(){return u});var i=n(130),o=n(24),a=n(56),s=n(40),u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,o=Object(i.a)(t,e,n);if(r?r.call(o,this.source):o.add(this.source||!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),s.a.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){s.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=r(e))(function(e,r){var i;i=n.subscribe(function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}},r,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[o.a]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:Object(a.b)(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=r(t))(function(t,n){var r;e.subscribe(function(t){return r=t},function(t){return n(t)},function(){return t(r)})})},t.create=function(e){return new t(e)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(i.a)},function(t,e,n){"use strict";function r(t,e,n,r){var a=new i.a(t,n,r);return Object(o.a)(e)(a)}e.a=r;var i=n(144),o=n(92)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(7),n(6),n(17)],void 0!==(i=function(t,e,n,r,i){"use strict";function s(t,e){for(var n=t.length,r=0;r<n;++r)if(t[r]===e)return r;return-1}function u(t,e,n){for(var r=t.firstChild,i=0;null!==r&&!r.contains(n);)i++,r=r.nextSibling;return e-i<=0?-1:1}function c(t,e,n,r){if(t===n){var i=e-r;return 0===i?0:i<0?-1:1}var o=t.compareDocumentPosition(n);if(0!=(o&Node.DOCUMENT_POSITION_DISCONNECTED))throw new Error("cannot compare disconnected nodes");if(0!=(o&Node.DOCUMENT_POSITION_CONTAINED_BY))return u(t,e,n);if(0!=(o&Node.DOCUMENT_POSITION_CONTAINS))return u(n,r,t)<0?1:-1;if(0!=(o&Node.DOCUMENT_POSITION_PRECEDING))return 1;if(0!=(o&Node.DOCUMENT_POSITION_FOLLOWING))return-1;throw new Error("neither preceding nor following: this should not happen")}function l(t){var e=t.getSelection();if(!(void 0===e||e.rangeCount<1))return e.getRangeAt(0)}function d(t,e,n,r){var i=t.ownerDocument.createRange(),o=!1;return c(t,e,n,r)<=0?(i.setStart(t,e),i.setEnd(n,r)):(i.setStart(n,r),i.setEnd(t,e),o=!0),{range:i,reversed:o}}function f(t){switch(null!=t?t.nodeType:void 0){case Node.TEXT_NODE:if(null==t.parentNode)throw new Error("detached node");t.parentNode.focus();break;case Node.ELEMENT_NODE:t.focus();break;default:throw new Error("tried to focus something other than a text node or an element.")}}function h(t,e,n){var i=t[0],o=t[1],a=!1;if(!e.contains(i))return null;var u,c=r.isDocument(i)?i:i.ownerDocument,l=c.defaultView;t:for(;!a;)switch(u=i.parentNode,i.nodeType){case Node.TEXT_NODE:if(o>=i.length||null!=u&&u.lastChild===i&&"normal"===l.getComputedStyle(u,void 0).whiteSpace&&/^\s+$/.test(i.data.slice(o))){if(null==u||i===e)break t;o=s(u.childNodes,i)+1,i=u}else o++,a=!0;break;case Node.ELEMENT_NODE:if(o>=i.childNodes.length){if(null==u||i===e)break t;o=s(u.childNodes,i)+1,i=u,a=!0}else i=i.childNodes[o],o=0,a=!(i.childNodes.length>0&&r.isText(i.childNodes[o]))}if(!a)return null;if(n&&r.isText(i)){if(null==(u=i.parentNode))throw new Error("detached node");o=s(u.childNodes,i),i=u}return!e.contains(i)||i===e&&o>=i.childNodes.length?null:[i,o]}function p(t,e,n){var i=t[0],o=t[1],a=!1;if(!e.contains(i))return null;var u,c=r.isDocument(i)?i:i.ownerDocument,l=c.defaultView;t:for(;!a;){if(o--,i===e&&o<0)return null;switch(u=i.parentNode,i.nodeType){case Node.TEXT_NODE:if(o<0||null!=u&&u.firstChild===i&&"normal"===l.getComputedStyle(u,void 0).whiteSpace&&/^\s+$/.test(i.data.slice(0,o))){if(null===u||i===e)break t;o=s(u.childNodes,i),i=u}else a=!0;break;case Node.ELEMENT_NODE:if(o<0||0===i.childNodes.length){if(null==u||i===e)break t;o=s(u.childNodes,i),i=u,a=!0}else i=i.childNodes[o],r.isElement(i)?(o=i.childNodes.length,a=!(i.childNodes.length>0&&r.isText(i.childNodes[o-1]))):o=i.length+1}}if(!a)return null;if(n&&r.isText(i)){if(null==(u=i.parentNode))throw new Error("detached node");o=s(u.childNodes,i),i=u}return!e.contains(i)||i===e&&o<0?null:[i,o]}function v(t,e,n){for(var r=[],i=n;i!==t;){var o=i.parentNode;if(null==o)throw new Error("nodeInA is not treeA or a child of treeA");r.unshift(s(o.childNodes,i)),i=o}for(var a=e;0!==r.length;)a=a.childNodes[r.shift()];return a}function m(t){var e=document.createElement("span");return e.className="_placeholder",e.setAttribute("contenteditable","true"),e.textContent=void 0!==t?t:" ",e}function y(t,e,n,i){if(void 0===i&&(i=!0),!r.isText(t))throw new Error("insertIntoText called on non-text");var o,a;void 0===i&&(i=!0),e<0?e=0:e>t.length&&(e=t.length);var u,c,l=r.isDocumentFragment(n),d=t.parentNode;if(null==d)throw new Error("detached node");var f=s(d.childNodes,t);if(i&&(null==n||l&&0===n.childNodes.length))o=a=[t,e];else{var h=document.createDocumentFragment();u=document.createTextNode(t.data.slice(0,e)),h.appendChild(u),null!=n&&h.appendChild(n),c=document.createTextNode(t.data.slice(e));var p=c.length;if(h.appendChild(c),i&&h.normalize(),o=i&&0===e?[d,f]:[h.firstChild,e],a=i&&e===t.length?[d,f+h.childNodes.length]:[h.lastChild,h.lastChild.length-p],this.deleteNode(t),void 0!==this.insertFragAt)this.insertFragAt(d,f,h);else for(;null!=h.firstChild;)this.insertNodeAt(d,f++,h.firstChild)}return[o,a]}function b(t,e,n){if(null==n)throw new Error("must pass an actual node to insert");return y.call(this,t,e,n)}function g(t,e,n,i){if(void 0===i&&(i=!0),""===n)return{node:void 0,isNew:!1,caret:[t,e]};var o,a,s=!1;t:for(;;)switch(t.nodeType){case Node.ELEMENT_NODE:var u=t.childNodes[e];if(r.isText(u)){t=u,e=0;continue t}var c=t.childNodes[e-1];if(r.isText(c)){t=c,e=c.length;continue t}o=document.createTextNode(n),s=!0,this.insertNodeAt(t,e,o),a=[o,i?n.length:0];break t;case Node.TEXT_NODE:o=t;var l=o.data.slice(0,e),d=o.data.slice(e);this.setTextNodeValue(o,l+n+d),a=[o,i?e+n.length:e];break t;default:throw new Error("unexpected node type: "+t.nodeType)}return{node:o,isNew:s,caret:a}}function _(t,e,n){if(!r.isText(t))throw new Error("deleteText called on non-text");if(t.deleteData(e,n),0===t.length){if(null==t.parentNode)throw new Error("detached node");t.parentNode.removeChild(t)}}function w(t,e){n.default.data(t,"wed_mirror_node",e),n.default.data(e,"wed_mirror_node",t);for(var r=0;r<t.children.length;++r){w(t.children[r],e.children[r])}}function x(t){n.default.removeData(t,"wed_mirror_node");for(var e=0;e<t.children.length;++e)x(t.children[e])}function E(t){for(void 0===t&&(t=null);null!==t&&null!==t.firstChild;)t=t.firstChild;return t}function T(t){for(void 0===t&&(t=null);null!==t&&null!==t.lastChild;)t=t.lastChild;return t}function C(t){if(null==t.parentNode)throw new Error("detached node");t.parentNode.removeChild(t)}function N(t,e,n){var r=t.childNodes[e];t.insertBefore(n,null!=r?r:null)}function O(t,e,n,r){return g.call({insertNodeAt:N,setTextNodeValue:function(t,e){t.data=e}},t,e,n,r)}function S(t,e,n,r){return void 0===r&&(r=!0),y.call(J,t,e,n,r)}function k(t,e,n){return b.call(J,t,e,n)}function A(t,e){var n=S(t,e,void 0,!1);return[n[0][0],n[1][0]]}function j(t){var e=t.nextSibling;if(r.isText(t)&&r.isText(e)){var n=t.length;return t.appendData(e.data),e.parentNode.removeChild(e),[t,n]}var i=t.parentNode;if(null==i)throw new Error("detached node");return[i,s(i.childNodes,t)+1]}function M(t){var e;switch(t.startContainer.nodeType){case Node.TEXT_NODE:if(null==(e=t.startContainer.parentNode))throw new Error("detached node");break;case Node.ELEMENT_NODE:e=t.startContainer;break;default:throw new Error("unexpected node type: "+t.startContainer.nodeType)}var n;switch(t.endContainer.nodeType){case Node.TEXT_NODE:if(null==(n=t.endContainer.parentNode))throw new Error("detached node");break;case Node.ELEMENT_NODE:n=t.endContainer;break;default:throw new Error("unexpected node type: "+t.endContainer.nodeType)}return[e,n]}function R(t){var e=M(t);return e[0]===e[1]}function D(t,e){if(!R({startContainer:t[0],startOffset:t[1],endContainer:e[0],endOffset:e[1]}))throw new Error("range is not well-formed");var n=t[0],i=t[1],o=e[0],a=e[1],u=n.parentNode;if(null==u)throw new Error("detached node");var c,l;if(r.isText(n)&&0===i&&(i=s(u.childNodes,n),n=u,null==(u=n.parentNode)))throw new Error("detached node");if(r.isText(n)){var d=n===o,f=s(u.childNodes,n),h=d?a:n.length;if(l=u.ownerDocument.createTextNode(n.data.slice(i,h)),this.deleteText(n,i,l.length),c=null!=n.parentNode?[n,i]:[u,f],d)return[c,[l]];i=null!=n.parentNode?f+1:f,n=u}else c=[n,i];var p;if(r.isText(o)){if(null==(u=o.parentNode))throw new Error("detached node");var v=s(u.childNodes,o);p=u.ownerDocument.createTextNode(o.data.slice(0,a)),this.deleteText(o,0,a),a=v,o=u}if(n!==o)throw new Error("internal error in cut: containers unequal");if(!r.isElement(n))throw new Error("internal error in cut: not an element");var m=[];for(a--;a>=i;)m.unshift(o.childNodes[a]),this.deleteNode(o.childNodes[a]),a--;return null!=l&&m.unshift(l),null!=p&&m.push(p),null!=o.childNodes[a]&&this.mergeTextNodes(o.childNodes[a]),[c,m]}function L(t,e){null==e?console.log(t,"no range"):console.log(t,e.startContainer,e.startOffset,e.endContainer,e.endOffset)}function P(t,e){L(t,l(e))}function I(t,e){var n;return n=null==e?[t,"no range"]:[t,e.startContainer.outerHTML,e.startOffset,e.endContainer.outerHTML,e.endOffset],n.join(", ")}function B(t,e,n){var r=t.ownerDocument.body,i=t.getBoundingClientRect();return e-=i.left+r.scrollLeft,n-=i.top+r.scrollTop,e>=0&&n>=0&&e<t.clientWidth&&n<t.clientHeight}function H(t,e,n){if(null==t)return null;for(r.isText(t)&&(t=t.parentNode);null!=t;){if(!r.isElement(t))return null;if(t.matches(e))break;if(t===n){t=null;break}t=t.parentNode}return t}function U(t,e,n){if(null==t)return null;for(r.isText(t)&&(t=t.parentNode);null!=t;){if(!r.isElement(t))return null;if(t.classList.contains(e))break;if(t===n){t=null;break}t=t.parentNode}return t}function F(t,e){if(!r.isElement(t))return null;var n=t.parentNode;if(null==n)return null;for(var i=n.firstElementChild;null!=i&&!i.classList.contains(e);)i=i.nextElementSibling;return i}function V(t,e){if(!r.isElement(t))return[];for(var n=[],i=t.firstElementChild;null!=i;)i.classList.contains(e)&&n.push(i),i=i.nextElementSibling;return n}function W(t,e){if(!r.isElement(t))return null;for(var n=t.firstElementChild;null!=n&&!n.classList.contains(e);)n=n.nextElementSibling;return n}function K(t){return null==tt&&(tt=document.createElement("span")),tt.textContent=t,tt.innerHTML}function $(t,e){if(/[\]['"()]/.test(t))throw new Error("selector is too complex");if(/\\:/.test(t))throw new Error("we do not accept escaped colons for now");for(var n=t.split(nt),r=[],o=0,a=n;o<a.length;o++){var s=a[o];if(0!==s.length)if(et.indexOf(s)>-1)r.push(s);else if(/[a-zA-Z]/.test(s[0])){s=s.trim();var u=s.split(/(.#)/);r.push(i.classFromOriginalName(u[0],e)),r=r.concat(u.slice(1))}else r.push(s)}return r.join("")}function z(t,e,r){var i=$(e,r),o=n.default.data(t,"wed_mirror_node"),a=o.querySelector(i);if(null==a)return null;var s=n.default.data(a,"wed_mirror_node");return null!=s?s:null}function G(t,e,r){for(var i=$(e,r),o=n.default.data(t,"wed_mirror_node"),a=o.querySelectorAll(i),s=[],u=0;u<a.length;++u)s.push(n.default.data(a[u],"wed_mirror_node"));return s}function q(t,e){var n=null!=e?e:window.document,r=n.createDocumentFragment(),i=n.createElement("div");r.appendChild(i),i.innerHTML=t;for(var o=Array.prototype.slice.call(i.childNodes);null!==i.firstChild;)i.removeChild(i.firstChild);return o}function Y(t){var e=t[0],n=t[1];switch(e.nodeType){case Node.TEXT_NODE:return e.data[n-1];case Node.ELEMENT_NODE:var i=e.childNodes[n-1];if(r.isText(i))return i.data[i.data.length-1];break;default:throw new Error("unexpected node type: "+e.nodeType)}}function X(t){var e=t[0],n=t[1];switch(e.nodeType){case Node.TEXT_NODE:return e.data[n];case Node.ELEMENT_NODE:var i=e.childNodes[n];if(r.isText(i))return i.data[0];break;default:throw new Error("unexpected node type: "+e.nodeType)}}function Z(t,e){for(var n=t.ownerDocument.defaultView;null!=t&&t!==e;){if("none"===t.style.display)return!0;if("none"===n.getComputedStyle(t).getPropertyValue("display"))return!0;t=t.parentNode}return!1}function Q(t,e){return r.isAttr(e)&&(e=e.ownerElement),t.contains(e)}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),i=a(i),e.isAttr=r.isAttr,e.indexOf=s,e.comparePositions=c,e.getSelectionRange=l,e.rangeFromPoints=d,e.focusNode=f,e.nextCaretPosition=h,e.prevCaretPosition=p,e.correspondingNode=v,e.makePlaceholder=m,e.genericInsertIntoText=b,e.genericInsertText=g,e.deleteText=_,e.linkTrees=w,e.unlinkTree=x,e.firstDescendantOrSelf=E,e.lastDescendantOrSelf=T,e.deleteNode=C,e.insertText=O;var J={insertNodeAt:N,insertFragAt:N,deleteNode:C};e.insertIntoText=k,e.splitTextNode=A,e.mergeTextNodes=j,e.isWellFormedRange=R,e.genericCutFunction=D,e.dumpRange=L,e.dumpCurrentSelection=P,e.dumpRangeToString=I,e.pointInContents=B,e.closest=H,e.closestByClass=U,e.siblingByClass=F,e.childrenByClass=V,e.childByClass=W;var tt;e.textToHTML=K;var et=",>+~ ",nt=new RegExp("(["+et+"]+)");e.toGUISelector=$,e.dataFind=z,e.dataFindAll=G,e.htmlToElements=q,e.getCharacterImmediatelyBefore=Y,e.getCharacterImmediatelyAt=X,e.isNotDisplayed=Z,e.contains=Q}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";function n(t){return null!=t&&"number"==typeof t.nodeType}function r(t){return null!=t&&t.nodeType===Node.ELEMENT_NODE}function i(t){return null!=t&&t.nodeType===Node.TEXT_NODE}function o(t){return t instanceof Attr||null!=t&&t.nodeType===c}function a(t){return t instanceof Attr}function s(t){return null!=t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function u(t){return null!=t&&t.nodeType===Node.DOCUMENT_NODE}Object.defineProperty(e,"__esModule",{value:!0}),e.isNode=n,e.isElement=r,e.isText=i;var c=Node.ATTRIBUTE_NODE,l=void 0===c?a:o;e.isAttr=l,e.isDocumentFragment=s,e.isDocument=u}.apply(e,r))&&(t.exports=i)},function(e,n){e.exports=t},function(t,e,n){"use strict";function r(t){return t.reduce(function(t,e){return t.concat(e instanceof c.a?e.errors:e)},[])}n.d(e,"a",function(){return l});var i=n(10),o=n(80),a=n(28),s=n(18),u=n(14),c=n(81),l=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this,l=n._parent,d=n._parents,f=n._unsubscribe,h=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,v=d?d.length:0;l;)l.remove(this),l=++p<v&&d[p]||null;if(Object(a.a)(f)){var m=Object(s.a)(f).call(this);m===u.a&&(e=!0,t=t||(u.a.e instanceof c.a?r(u.a.e.errors):[u.a.e]))}if(Object(i.a)(h))for(p=-1,v=h.length;++p<v;){var y=h[p];if(Object(o.a)(y)){var m=Object(s.a)(y.unsubscribe).call(y);if(m===u.a){e=!0,t=t||[];var b=u.a.e;b instanceof c.a?t=t.concat(r(b.errors)):t.push(b)}}}if(e)throw new c.a(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new t,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this,n=e._parent,r=e._parents;n&&n!==t?r?-1===r.indexOf(t)&&r.push(t):this._parents=[t]:this._parent=t},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}()},function(t,e,n){"use strict";n.d(e,"b",function(){return l}),n.d(e,"a",function(){return d});var r=n(0),i=n(2),o=n(1),a=n(8),s=n(42),u=n(83),c=n(55),l=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return r.a(e,t),e}(o.a),d=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return r.a(e,t),e.prototype[c.a]=function(){return new l(this)},e.prototype.lift=function(t){var e=new f(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new s.a;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new s.a;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),a.a.EMPTY):this.isStopped?(t.complete(),a.a.EMPTY):(this.observers.push(t),new u.a(this,t))},e.prototype.asObservable=function(){var t=new i.a;return t.source=this,t},e.create=function(t,e){return new f(t,e)},e}(i.a),f=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return r.a(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):a.a.EMPTY},e}(d)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,n){"use strict";function r(t){return t?i(t):a}function i(t){return new o.a(function(e){return t.schedule(function(){return e.complete()})})}n.d(e,"a",function(){return a}),e.b=r;var o=n(2),a=new o.a(function(t){return t.complete()})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(29),i=n(30),o=new i.a(r.a)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(7),n(6),n(5)],void 0!==(i=function(t,e,n,r,i){"use strict";function a(t){var e;if(r.isAttr(t))e=t.value.length;else switch(t.nodeType){case Node.TEXT_NODE:e=t.data.length;break;case Node.DOCUMENT_NODE:case Node.ELEMENT_NODE:e=t.childNodes.length;break;default:throw new Error("unexpected node type")}return e}function s(t){for(;null!=t;){if(r.isElement(t)||r.isDocument(t)){var e=n.default.data(t,"wed-dloc-root");if(null!=e)return e}t=t.parentNode}}function u(t){var e=s(t);if(null==e)throw new Error("no root found");return e}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var c=function(){function t(t){if(this.node=t,null!=n.default.data(t,"wed-dloc-root"))throw new Error("node already marked as root");n.default.data(t,"wed-dloc-root",this)}return t.prototype.nodeToPath=function(t){if(null==t)throw new Error("invalid node parameter");var e=this.node;if(e===t)return"";if(!i.contains(e,t))throw new Error("node is not a descendant of root");for(var n=[];t!==e;){var o=void 0;if(r.isAttr(t))o=t.ownerElement,n.unshift("@"+t.name);else{var a=0;o=t.parentNode;for(var s=t.previousSibling;null!==s;){var u=s.nodeType;u!==Node.TEXT_NODE&&u!==Node.ELEMENT_NODE||a++,s=s.previousSibling}n.unshift(String(a))}t=o}return n.join("/")},t.prototype.pathToNode=function(t){var e=this.node;if(""===t)return e;var n,i=t.split(/\//),o=e;"@"===i[i.length-1][0]&&(n=i.pop());for(var a=0,s=i;a<s.length;a++){var u=s[a];if(!/^(\d+)$/.test(u))throw new Error("malformed path expression");for(var c=parseInt(u),l=null,d=o.firstChild;null!==d&&null===l;){var f=d.nodeType;(f===Node.TEXT_NODE||f===Node.ELEMENT_NODE)&&--c<0&&(l=d),d=d.nextSibling}if(null===l)return null;o=l}if(void 0===n)return o;if(!r.isElement(o))throw new Error("parent must be an element since we are looking for an attribute");return o.getAttributeNode(n.slice(1))},t}();e.DLocRoot=c;var l=function(){function t(t,e,n){this.root=t,this.node=e,this.offset=n}return Object.defineProperty(t.prototype,"pointedNode",{get:function(){return r.isElement(this.node)?this.node.childNodes[this.offset]:this.node},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.root,this.node,this.offset)},t.makeDLoc=function(e,r,o,s){if(r instanceof Array&&(s=o,d=r,r=d[0],o=d[1]),void 0===s&&(s=!1),null!=r){if(void 0===o){var u=r.parentNode;if(null===u)throw new Error("trying to get parent of a detached node");o=i.indexOf(u.childNodes,r),r=u}else{if("number"!=typeof o)throw new Error("offset is not a number, somehow");if(o<0){if(!s)throw new Error("negative offsets are not allowed");o=0}}if(e instanceof c)e=e.node;else if(null==n.default.data(e,"wed-dloc-root"))throw new Error("root has not been marked as a root");if(!i.contains(e,r))throw new Error("node not in root");var l=a(r);if(o>l){if(!s)throw new Error("offset greater than allowable value");o=l}return new t(e,r,o);var d}},t.mustMakeDLoc=function(t,e,n,r){var i=e;if(i instanceof Array&&(i=i[0]),null==i)throw new Error("called mustMakeDLoc with an absent node");return this.makeDLoc.apply(this,arguments)},t.prototype.make=function(e,n){if(e instanceof Array)return t.mustMakeDLoc(this.root,e);if(void 0!==n&&"number"!=typeof n)throw new Error("if the 1st argument is a node, the 2nd must be a number or undefined");return t.mustMakeDLoc(this.root,e,n)},t.prototype.makeWithOffset=function(t){return t===this.offset?this:this.make(this.node,t)},t.prototype.getLocationInParent=function(){var t=this.node,e=t.parentNode;if(null===e)throw new Error("trying to get parent of a detached node");return this.make(e,i.indexOf(e.childNodes,t))},t.prototype.getLocationAfterInParent=function(){var t=this.node,e=t.parentNode;if(null===e)throw new Error("trying to get parent of a detached node");return this.make(e,i.indexOf(e.childNodes,t)+1)},t.prototype.toArray=function(){return[this.node,this.offset]},t.prototype.makeRange=function(t){if(r.isAttr(this.node))throw new Error("cannot make range from attribute node");if(this.isValid()){if(void 0===t){var e=this.node.ownerDocument.createRange();return e.setStart(this.node,this.offset),e}if(r.isAttr(t.node))throw new Error("cannot make range from attribute node");if(t.isValid())return i.rangeFromPoints(this.node,this.offset,t.node,t.offset)}},t.prototype.makeDLocRange=function(t){if(this.isValid()){if(void 0===t)return new d(this,this);if(t.isValid())return new d(this,t)}},t.prototype.mustMakeDLocRange=function(t){var e=void 0!==t?this.makeDLocRange(t):this.makeDLocRange();if(void 0===e)throw new Error("cannot make a range");return e},t.prototype.isValid=function(){var t=this.node;return this.root.contains(r.isAttr(t)?t.ownerElement:t)&&this.offset<=a(t)},t.prototype.normalizeOffset=function(){var t=this.node,e=a(t);return this.offset>e?this.make(t,e):this},t.prototype.equals=function(t){return null!=t&&(this===t||this.node===t.node&&this.offset===t.offset)},t.prototype.compare=function(t){if(this.equals(t))return 0;var e=this,n=e.node,o=e.offset,a=t.node,s=t.offset;if(r.isAttr(n)){if(r.isAttr(a)&&n.ownerElement===a.ownerElement){return[n.name,a.name].sort()[0]===n.name?-1:1}var u=n.ownerElement;if(u===t.pointedNode)return 1;n=u.parentNode,o=i.indexOf(n.childNodes,u)}if(r.isAttr(a)){var u=a.ownerElement;if(u===this.pointedNode)return-1;a=u.parentNode,s=i.indexOf(a.childNodes,u)}return i.comparePositions(n,o,a,s)},t}();e.DLoc=l,e.findRoot=s,e.getRoot=u;var d=function(){function t(t,e){if(this.start=t,this.end=e,t.root!==e.root)throw new Error("the start and end must be in the same document")}return Object.defineProperty(t.prototype,"collapsed",{get:function(){return this.start.equals(this.end)},enumerable:!0,configurable:!0}),t.prototype.makeDOMRange=function(){if(r.isAttr(this.start.node))throw new Error("cannot make range from attribute node");if(this.start.isValid()){if(r.isAttr(this.end.node))throw new Error("cannot make range from attribute node");if(this.end.isValid())return i.rangeFromPoints(this.start.node,this.start.offset,this.end.node,this.end.offset).range}},t.prototype.mustMakeDOMRange=function(){var t=this.makeDOMRange();if(void 0===t)throw new Error("cannot make a range");return t},t.prototype.equals=function(t){return null!=t&&(this===t||this.start.equals(t.start)&&this.end.equals(t.end))},t.prototype.isValid=function(){return this.start.isValid()&&this.end.isValid()},t.prototype.contains=function(t){return this.start.compare(t)*this.end.compare(t)<=0},t}();e.DLocRange=d}.apply(e,r))&&(t.exports=i)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={e:{}}},function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}e.a=r},function(t,e,n){"use strict";function r(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(t,e))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.project,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i.a(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.a)},function(t,e,n){var r,i;r=[n,e,n(128)],void 0!==(i=function(t,e,n){"use strict";function r(t,e){return Math.sqrt(t*t+e*e)}function i(t,e,n,i,o,a){var s=e-i,u=t-n,c=e-a,l=t-o,d=s<0,f=c>0,h=u<0,p=l>0;return r(h?u:p?l:0,d?s:f?c:0)}function o(t,e,n,r,i,o){var a=e-r,s=t-n,u=e-o,c=t-i,l=a<0,d=u>0,f=s<0,h=c>0,p=f?s:h?c:0,v=l?a:d?u:0;return{x:Math.abs(p),y:Math.abs(v)}}function a(t){return t.replace(/([\][\\\/!"#$%&'()*+,.:;<=>?@^`{|}~])/g,"\\$1")}function s(t){return t.classList[0]}function u(t,e){if("*"===t)return"._real";var n=t.split(":"),r=n[0],i=n[1];void 0===i&&(i=r,r="");var o=e[r];if(void 0===o)throw new Error("prefix "+r+" is not defined in namespaces");return"._local_"+a(i)+"._xmlns_"+a(o)+"._real"}function c(t){for(var e="",n=0,r=t;n<r.length;n++){e+="x"+r[n].charCodeAt(0).toString(16)}return e}function l(t){if(!N.test(t))throw new Error("badly encoded string");for(var e="",n=0,r=t.slice(1).split("x");n<r.length;n++){var i=r[n];e+=String.fromCharCode(parseInt(i,16))}return e}function d(t,e){var r="";if(t!==e)for(var i=n.diffChars(e,t),o=i[i.length-1],a=0;a<i.length;++a){var s=i[a];if(!0===s.added)r+="p"+c(s.value);else if(!0===s.removed){var u=i[a+1];void 0!==u&&!0===u.added&&s.value.toUpperCase()===u.value?(r+="u"+s.value.length,a++):r+="m"+s.value.length}else s!==o&&(r+="g"+s.value.length)}return r}function f(t,e){if(""===e)return t;for(var n=0,r="";e.length>0;){var i=e.match(O);if(null!==i){e=e.slice(i[0].length);var o=i[0][0];switch(o){case"g":case"m":case"u":var a=parseInt(i[2]);switch(o){case"g":r+=t.slice(n,n+a);break;case"u":r+=t.slice(n,n+a).toUpperCase();break;case"m":break;default:throw new Error("internal error: unexpected op "+o)}n+=a;break;case"p":r+=l(i[1]);break;default:throw new Error("unexpected operator "+o)}}if(null===i)throw new Error("cannot parse diff: "+e)}return r+=t.slice(n)}function h(t){var e=/^data-wed-(.+)-([^-]*?)$/.exec(t);if(null===e)throw new Error("malformed name");var n,r=e[1],i=e[2];if("-"===r[0]){var o=/^-(.+?)-(.+)$/.exec(r);if(null===o)throw new Error("malformed name");n=o[1],r=o[2]}return r=r.replace(/---/,":").replace(/---(-+)/g,"--$1"),""!==i&&(r=f(r,i)),{name:r,qualifier:n}}function p(t,e){var n=document.createElement("div");n.setAttribute("data-"+t,"");var r=n.attributes[0].name.slice(5),i=r.replace(/--(-+)/g,"---$1").replace(/:/,"---");return"data-wed-"+(e=void 0===e?"":"-"+e+"-")+i+"-"+d(t,r)}function v(t){return/^data-wed-(?!-)/.test(t)}function m(t){for(var e=Object.create(null),n=t.attributes,r=0;r<n.length;++r){var i=n[r],o=i.localName;v(o)&&(e[h(o).name]=i.value)}return e}function y(){return"WED-ID-"+ ++S}function b(t){var e=t;return e.altKey||e.ctrlKey||e.metaKey}function g(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=window;void 0===n.selenium_log&&(n.selenium_log=[]),n.selenium_log.push.apply(n.selenium_log,t)}function _(t){try{throw t}catch(t){return t.stack}}function w(){var t=new Error;return null!=t.stack?t.stack:_(t)}function x(t,e){if(null!=t.a&&null!=t.b)return"("+x(t.a,e)+") or ("+x(t.b,e)+")";var n;if("AnyName"===t.pattern)n="*:*";else{if(void 0===t.ns)throw new Error("unexpected undefined obj.ns");if(void 0!==t.name)void 0===(n=e.unresolveName(t.ns,t.name))&&(n="{"+t.ns+"}"+t.name);else{var r=e.prefixFromURI(t.ns);n=void 0===r?"{"+t.ns+"}":""!==r?r+":":r,n+="*"}}return null!=t.except&&(n+=" except ("+x(t.except,e)+")"),n}function E(t){var e=new FileReader;return new Promise(function(n,r){e.onload=function(){n(e.result)},e.onerror=r,e.readAsText(t)})}function T(t,e){(void 0!==Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__)!==e&&(void 0!==Object.setPrototypeOf?Object.setPrototypeOf(t,e.prototype):t.__proto__=e.prototype)}function C(t){var e=t;return e.suppressUnhandledRejections&&e.suppressUnhandledRejections(),t}Object.defineProperty(e,"__esModule",{value:!0}),e.distFromDeltas=r,e.distFromRect=i,e.distsFromRect=o,e.escapeCSSClass=a,e.getOriginalName=s,e.classFromOriginalName=u,e.stringToCodeSequence=c;var N=/^(?:x[a-f0-9]+)+$/;e.codeSequenceToString=l,e.encodeDiff=d;var O=/^(?:p([xa-f0-9]+))|(?:[gmu](\d+))/;e.decodeDiff=f,e.decodeAttrName=h,e.encodeAttrName=p,e.isXMLAttrName=v,e.getOriginalAttributes=m;var S=0;e.newGenericID=y,e.anySpecialKeyHeld=b,e.seleniumLog=g,e.stackTrace=w,e.convertPatternObj=x,e.readFile=E,e.fixPrototype=T,e.suppressUnhandledRejections=C}.apply(e,r))&&(t.exports=i)},function(t,e,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(t){return a.a.e=t,a.a}}function i(t){return o=t,r}e.a=i;var o,a=n(14)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2);n.d(e,"Observable",function(){return r.a});var i=n(82);n.d(e,"ConnectableObservable",function(){return i.a});var o=n(84);n.d(e,"GroupedObservable",function(){return o.a});var a=n(24);n.d(e,"observable",function(){return a.a});var s=n(9);n.d(e,"Subject",function(){return s.a});var u=n(85);n.d(e,"BehaviorSubject",function(){return u.a});var c=n(58);n.d(e,"ReplaySubject",function(){return c.a});var l=n(44);n.d(e,"AsyncSubject",function(){return l.a});var d=n(90);n.d(e,"asapScheduler",function(){return d.a});var f=n(12);n.d(e,"asyncScheduler",function(){return f.a});var h=n(86);n.d(e,"queueScheduler",function(){return h.a});var p=n(137);n.d(e,"animationFrameScheduler",function(){return p.a});var v=n(140);n.d(e,"VirtualTimeScheduler",function(){return v.b}),n.d(e,"VirtualAction",function(){return v.a});var m=n(87);n.d(e,"Scheduler",function(){return m.a});var y=n(8);n.d(e,"Subscription",function(){return y.a});var b=n(1);n.d(e,"Subscriber",function(){return b.a});var g=n(43);n.d(e,"Notification",function(){return g.a});var _=n(56);n.d(e,"pipe",function(){return _.a});var w=n(41);n.d(e,"noop",function(){return w.a});var x=n(25);n.d(e,"identity",function(){return x.a});var E=n(141);n.d(e,"isObservable",function(){return E.a});var T=n(31);n.d(e,"ArgumentOutOfRangeError",function(){return T.a});var C=n(32);n.d(e,"EmptyError",function(){return C.a});var N=n(42);n.d(e,"ObjectUnsubscribedError",function(){return N.a});var O=n(81);n.d(e,"UnsubscriptionError",function(){return O.a});var S=n(91);n.d(e,"TimeoutError",function(){return S.a});var k=n(142);n.d(e,"bindCallback",function(){return k.a});var A=n(143);n.d(e,"bindNodeCallback",function(){return A.a});var j=n(62);n.d(e,"combineLatest",function(){return j.b});var M=n(45);n.d(e,"concat",function(){return M.a});var R=n(64);n.d(e,"defer",function(){return R.a});var D=n(11);n.d(e,"empty",function(){return D.b});var L=n(150);n.d(e,"forkJoin",function(){return L.a});var P=n(20);n.d(e,"from",function(){return P.a});var I=n(151);n.d(e,"fromEvent",function(){return I.a});var B=n(152);n.d(e,"fromEventPattern",function(){return B.a});var H=n(153);n.d(e,"generate",function(){return H.a});var U=n(154);n.d(e,"iif",function(){return U.a});var F=n(155);n.d(e,"interval",function(){return F.a});var V=n(99);n.d(e,"merge",function(){return V.a});var W=n(100);n.d(e,"never",function(){return W.b});var K=n(59);n.d(e,"of",function(){return K.a});var $=n(156);n.d(e,"onErrorResumeNext",function(){return $.a});var z=n(157);n.d(e,"pairs",function(){return z.a});var G=n(101);n.d(e,"race",function(){return G.a});var q=n(158);n.d(e,"range",function(){return q.a});var Y=n(61);n.d(e,"throwError",function(){return Y.a});var X=n(102);n.d(e,"timer",function(){return X.a});var Z=n(159);n.d(e,"using",function(){return Z.a});var Q=n(65);n.d(e,"zip",function(){return Q.b}),n.d(e,"EMPTY",function(){return D.a}),n.d(e,"NEVER",function(){return W.a});var J=n(40);n.d(e,"config",function(){return J.a})},function(t,e,n){"use strict";function r(t,e){if(!e)return t instanceof i.a?t:new i.a(Object(h.a)(t));if(null!=t){if(Object(s.a)(t))return Object(f.a)(t,e);if(Object(o.a)(t))return Object(l.a)(t,e);if(Object(a.a)(t))return Object(c.a)(t,e);if(Object(u.a)(t)||"string"==typeof t)return Object(d.a)(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}e.a=r;var i=n(2),o=n(97),a=n(96),s=n(145),u=n(146),c=n(21),l=n(147),d=n(148),f=n(149),h=n(92)},function(t,e,n){"use strict";function r(t,e){return e?new i.a(function(n){var r=new o.a,i=0;return r.add(e.schedule(function(){if(i===t.length)return void n.complete();n.next(t[i++]),n.closed||r.add(this.schedule())})),r}):new i.a(Object(a.a)(t))}e.a=r;var i=n(2),o=n(8),a=n(89)},function(t,e,n){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=navigator.userAgent;e.EDGE=-1!==n.indexOf(" Edge/"),e.CHROME=!e.EDGE&&-1!==n.indexOf(" Chrome/"),e.MSIE_TO_10=-1!==n.indexOf(" MSIE ");e.MSIE_11_AND_UP=-1!==n.indexOf(" like Gecko",navigator.userAgent.length-" like Gecko".length),e.MSIE=e.MSIE_11_AND_UP||e.MSIE_TO_10,e.FIREFOX=-1!==n.indexOf(" Firefox/"),e.FIREFOX_24=-1!==n.indexOf(" Firefox/24"),e.GECKO=-1!==n.indexOf(" Gecko/"),e.OSX=0===navigator.platform.lastIndexOf("Mac",0),e.WINDOWS="Win32"===navigator.platform}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(22),n(51)],void 0!==(i=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r=o(r),e.LEFT_ARROW=r.makeKey(37,!1),e.UP_ARROW=r.makeKey(38,!1),e.RIGHT_ARROW=r.makeKey(39,!1),e.DOWN_ARROW=r.makeKey(40,!1),e.BACKSPACE=r.makeKey(8,!1),e.DELETE=r.makeKey(46,!1),e.ENTER=r.makeKey(13,!1),e.SPACE=r.makeKey(32,!1),e.ESCAPE=r.makeKey(27,!1),e.SAVE=r.makeCtrlEqKey("S",!1),e.UNDO=r.makeCtrlEqKey("Z",!1),e.REDO=r.makeCtrlEqKey("Y",!1),e.COPY=r.makeCtrlEqKey("C",!1),e.CUT=r.makeCtrlEqKey("X",!1),e.PASTE=r.makeCtrlEqKey("V",!1),e.DEVELOPMENT=r.makeCtrlEqKey(192,!1),e.QUICKSEARCH_FORWARD=r.makeCtrlEqKey("F",!1),e.QUICKSEARCH_BACKWARDS=r.makeCtrlEqKey("B",!1),e.SEARCH_FORWARD=r.makeCtrlEqKey("F",!0),e.SEARCH_BACKWARDS=r.makeCtrlEqKey("B",!0),e.CONTEXTUAL_MENU=r.makeCtrlEqKey(191,!1),e.REPLACEMENT_MENU=r.makeCtrlEqKey(191,!0),e.LOWER_LABEL_VISIBILITY=n.OSX?r.NULL_KEY:r.makeCtrlKey(219,!1),e.INCREASE_LABEL_VISIBILITY=n.OSX?r.NULL_KEY:r.makeCtrlKey(221,!1)}.apply(e,r))&&(t.exports=i)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(t,e,n){"use strict";function r(t){return t}e.a=r},function(t,e,n){"use strict";function r(t,e){return function(n){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return n.lift(new o(r,e));var a=Object.create(n,i.b);return a.source=n,a.subjectFactory=r,a}}e.a=r;var i=n(82),o=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(t);return i.add(e.subscribe(r)),i},t}()},function(t,n){t.exports=e},function(t,e,n){"use strict";function r(t){return"function"==typeof t}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(132),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return r.a(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending?e:clearInterval(e)&&void 0||void 0},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(87),o=function(t){function e(n,r){void 0===r&&(r=i.a.now);var o=t.call(this,n,function(){return e.delegate&&e.delegate!==o?e.delegate.now():r()})||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return r.a(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)return void e.push(t);var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return r.a(e,t),e}(Error)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return r.a(e,t),e}(Error)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(i){return i.pipe(r(function(n,r){return Object(u.a)(t(n,r)).pipe(Object(s.a)(function(t,i){return e(n,t,r,i)}))},n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new c(t,n))})}e.a=r;var i=n(0),o=n(4),a=n(3),s=n(16),u=n(20),c=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.concurrent))},t}(),l=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i.a(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Object(o.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(a.a)},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=null),function(e){return e.lift(new a(t))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.defaultValue))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return i.a(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return function(n){return n.lift(new a(t,e))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i.a(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(o.a)},function(t,e,n){var r,i;r=[n,e,n(13),n(6),n(71)],void 0!==(i=function(t,e,n,r,i){"use strict";function o(t,e){var r=t.parentNode;return e.contains(r)?a(n.DLoc.mustMakeDLoc(e,t)):{left:0,top:0,bottom:0}}function a(t){var e,n=t.node,i=t.offset,a=r.isElement(n),s=r.isText(n);if(a)e=n.childNodes.length;else{if(!s)throw new Error("unexpected node type: "+n.nodeType);e=n.length}if(0===e)return o(n,t.root);for(var u,c,l=n.ownerDocument.createRange();i<e;){if(c=n.childNodes[i],r.isElement(c)?u=c.getClientRects()[0]:(l.setStart(n,i),l.setEnd(n,i+1),u=l.getClientRects()[0]),null!=u&&(0!==u.left||0!==u.right||0!==u.top||0!==u.bottom))return{left:u.left,top:u.top,bottom:u.bottom};i++}i=t.offset;for(var d=n.ownerDocument.defaultView;0!==i;){i--,c=void 0;var f=void 0;if(s)f=!0;else{if(!a)throw new Error("unexpected node type: "+n.nodeType);if(c=n.childNodes[i],r.isText(c))f=!0;else{if(!r.isElement(c))throw new Error("unexpected node type: "+c.nodeType);var h=d.getComputedStyle(c).getPropertyValue("display");f="inline"===h||"inline-block"===h}}var p=void 0;if(r.isElement(c)?p=c.getClientRects():(l.setStart(n,i),l.setEnd(n,i+1),p=l.getClientRects()),null!=(u=p[p.length-1]))return f?{left:u.right,top:u.top,bottom:u.bottom}:{left:u.left,top:u.top,bottom:u.bottom}}return o(n,t.root)}function s(t){if(!t.classList.contains("_attribute_value"))throw new Error("getAttrValueNode operates only on attribute values");var e=t,n=t.firstChild;if(null!==n){for(;null!==n&&!r.isText(n);)n=n.nextSibling;null!==n&&(e=n)}return e}function u(t,e){if(null!=e)try{var n=t.caretManager.fromDataLocation(e,0);return null!=n?n.node:void 0}catch(t){if(t instanceof i.AttributeNotFound)return;throw t}}Object.defineProperty(e,"__esModule",{value:!0}),e.boundaryXY=a,e.getAttrValueNode=s,e.getGUINodeIfExists=u}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";function n(t){var e=r[t];if(void 0===e)throw new Error("unknown icon name: "+t);return'<i class="fa fa-fw '+e+'"></i>'}Object.defineProperty(e,"__esModule",{value:!0});/**
     * The icons used by the user interface.
     * @author Louis-Dominique Dubeau
     * @license MPL 2.0
     * @copyright Mangalam Research Center for Buddhist Languages
     */
var r=Object.create(null);r.add="fa-plus",r.delete="fa-times",r.wrap="fa-caret-square-o-down",r.unwrap="fa-caret-square-o-up",r.documentation="fa-question-circle",r.transform="fa-cog",r.any="fa-asterisk",r.element="fa-angle-left",r.attribute="fa-at",r.other="fa-circle-thin",r.exclamation="fa-exclamation",r["arrow-up"]="fa-arrow-up",r["arrow-down"]="fa-arrow-down",r.upload="fa-cloud-upload",r.undo="fa-undo",r.redo="fa-repeat",e.makeHTML=n}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(118),n(19),n(49),n(6),n(5),n(73),n(38)],void 0!==(i=function(t,e,n,r,i,u,c,l,d){"use strict";function f(t,e){if(void 0!==t)return t;var n=C[e];return void 0!==n?d.makeHTML(n):void 0}function h(t,e,n,r){var i=t.createElementNS(e,n);if(void 0!==r)for(var o=Object.keys(r).sort(),a=0,s=o;a<s.length;a++){var u=s[a];i.setAttribute(u,r[u])}return i}function p(t,e,n,r,i,o){var a=u.isDocument(e)?e:e.ownerDocument,s=h(a,r,i,o);return t.insertAt(e,n,s),s}function v(t,e,n,r,i,o,a){var s=e.data.slice(n,r),u=e.parentNode;if(null===u)throw new Error("detached node");var l=c.indexOf(u.childNodes,e);t.deleteText(e,n,s.length);var d=h(e.ownerDocument,i,o,a);return""!==s&&d.appendChild(e.ownerDocument.createTextNode(s)),null===e.parentNode?t.insertAt(u,l,d):t.insertAt(e,n,d),d}function m(t,e,n){var r=e.parentNode;if(null===r)throw new Error("detached node");var i=c.indexOf(r.childNodes,e);if(0===n)n=i;else if(n>=e.length)n=i+1;else{var o=e.data.slice(n);t.setTextNode(e,e.data.slice(0,n)),t.insertNodeAt(r,i+1,e.ownerDocument.createTextNode(o)),n=i+1}return[r,n]}function y(t,e,n,r,i,o,a,s){if(!c.isWellFormedRange({startContainer:e,startOffset:n,endContainer:r,endOffset:i}))throw new Error("malformed range");if(u.isText(e)){if(e===r)return v(t,e,n,i,o,a,s);f=m(t,e,n),e=f[0],n=f[1]}if(u.isText(r)&&(p=m(t,r,i),r=p[0],i=p[1]),e!==r)throw new Error("startContainer and endContainer are not the same;probably due to an algorithmic mistake");for(var l=h(e.ownerDocument,o,a,s);--i>=n;){var d=r.childNodes[i];t.deleteNode(d),l.insertBefore(d,l.firstChild)}return t.insertAt(e,n,l),l;var f,p}function b(t,e){var n=e.parentNode;if(null===n)throw new Error("detached node");var r=Array.prototype.slice.call(e.childNodes),i=e.previousSibling,o=e.nextSibling;t.deleteNode(e);for(var a=null!==o?c.indexOf(n.childNodes,o):n.childNodes.length,s=e.lastChild;null!=e.firstChild;)t.insertNodeAt(n,a++,e.firstChild);return null!==s&&t.mergeTextNodes(s),t.mergeTextNodesNF(i),r}function g(t,e){var n=t.caretManager.getDataCaret();if(void 0===n)throw new Error("no caret");if(!e.contains(n.node))throw new Error("caret outside node");var r=t.dataUpdater.splitAt(e,n);t.caretManager.setCaret(c.firstDescendantOrSelf(r[1]),0)}function _(t,e){var n=e.previousElementSibling;if(null!==n&&n.localName===e.localName&&n.namespaceURI===e.namespaceURI){for(var r=n.childNodes.length,i=n.lastChild,o=u.isText(i),a=o?i.length:0,s=n.childNodes.length,c=e.childNodes.length-1;c>=0;--c)t.dataUpdater.insertAt(n,s,e.childNodes[c].cloneNode(!0));o?(t.dataUpdater.mergeTextNodes(i),t.caretManager.setCaret(n.childNodes[r-1],a)):t.caretManager.setCaret(n,r),t.dataUpdater.removeNode(e)}}function w(t,e){var n=e.nextElementSibling;null!==n&&_(t,n)}function x(t,e){var n=e.previousElementSibling;if(null!==n&&n.localName===e.localName&&n.namespaceURI===e.namespaceURI){var r=n.parentNode;if(null===r)throw new Error("detached node");t.dataUpdater.removeNode(e),t.dataUpdater.insertBefore(r,e,n),t.caretManager.setCaret(e)}}function E(t,e){var n=e.nextElementSibling;null!==n&&x(t,n)}function T(t){var e=t.caretManager.sel;if(void 0!==e&&!e.collapsed){if(!e.wellFormed)throw t.modals.getModal("straddling").modal(),new l.AbortTransformationException("selection is not well-formed");for(var n=e.asDataCarets(),r=n[0],i=n[1],o=t.dataUpdater.cut(r,i),a="",s=o[1],u=0,c=s;u<c.length;u++){a+=c[u].textContent}var d=t.dataUpdater.insertText(o[0],a);t.caretManager.setRange(r.make(d.node,d.isNew?o[0].offset:0),d.caret)}}Object.defineProperty(e,"__esModule",{value:!0}),n=a(n),d=s(d);var C=n.default.extend(Object.create(null),{add:"add",delete:"delete",transform:"transform",insert:"add","delete-element":"delete","delete-parent":"delete",wrap:"wrap","wrap-content":"wrap","merge-with-next":"transform","merge-with-previous":"transform","swap-with-next":"transform","swap-with-previous":"transform",split:"transform",append:"add",prepend:"add",unwrap:"unwrap","add-attribute":"add","delete-attribute":"delete"}),N=n.default.extend(Object.create(null),{add:"other",delete:"other",transform:"other",insert:"element","delete-element":"element","delete-parent":"element",wrap:"element","wrap-content":"element","merge-with-next":"element","merge-with-previous":"element","swap-with-next":"element","swap-with-previous":"element",split:"element",append:"element",prepend:"element",unwrap:"element","add-attribute":"attribute","delete-attribute":"attribute"}),O=function(t){function e(e,n,r,i,o,a,s){var u=this;if("function"==typeof i)s=i,u=t.call(this,e,r,void 0,f(void 0,n),!1)||this;else{if(void 0!==i&&"string"!=typeof i)throw new TypeError("abbreviatedDesc must be a string or undefined");if("function"==typeof o)s=o,u=t.call(this,e,r,i,f(void 0,n),!1)||this;else{if(void 0!==o&&"string"!=typeof o)throw new TypeError("iconHtml must be a string or undefined");if("function"==typeof a)s=a,u=t.call(this,e,r,i,f(o,n),!1)||this;else{if(void 0!==a&&"boolean"!=typeof a)throw new TypeError("needsInput must be a boolean or undefined");u=t.call(this,e,r,i,f(o,n),a)||this}}}if(void 0===s)throw new Error("did not specify a handler");return u.handler=s,u.transformationType=n,u.kind=C[n],u.nodeType=N[n],u}return o(e,t),e.prototype.getDescriptionFor=function(t){return void 0===t.name?this.desc:this.desc.replace(/<name>/,t.name)},e.prototype.execute=function(t){this.editor.fireTransformation(this,t)},e}(i.Action);e.Transformation=O;var S=function(){function t(t,e){this.name=t,this.transformation=e,this._aborted=!1}return Object.defineProperty(t.prototype,"aborted",{get:function(){return this._aborted},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){this._aborted=!0,this._abortMessage=t},t.prototype.throwIfAborted=function(){if(this.aborted)throw new l.AbortTransformationException(this._abortMessage)},t}();e.TransformationEvent=S;var k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.next=function(t){if(this.closed)throw new r.ObjectUnsubscribedError;if(!this.isStopped&&!t.aborted)for(var e=0,n=this.observers.slice();e<n.length;e++){var i=n[e];if(i.next(t),t.aborted)break}},e}(r.Subject);e.TransformationEventSubject=k,e.makeElement=h,e.insertElement=p,e.wrapTextInElement=v,e.wrapInElement=y,e.unwrap=b,e.splitNode=g,e.mergeWithPreviousHomogeneousSibling=_,e.mergeWithNextHomogeneousSibling=w,e.swapWithPreviousHomogeneousSibling=x,e.swapWithNextHomogeneousSibling=E,e.removeMarkup=T}.apply(e,r))&&(t.exports=i)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){(new Error).stack}r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},function(t,e,n){"use strict";function r(){}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return r.a(e,t),e}(Error)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(11),i=n(59),o=n(61),a=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return Object(i.a)(this.value);case"E":return Object(o.a)(this.error);case"C":return Object(r.b)()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(9),o=n(8),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return r.a(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),o.a.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),o.a.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(i.a)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&Object(i.a)(t[1])?Object(a.a)(t[0]):Object(s.a)()(o.a.apply(void 0,t))}e.a=r;var i=n(15),o=n(59),a=n(20),s=n(98)},function(t,e,n){"use strict";function r(t){return!Object(i.a)(t)&&t-parseFloat(t)+1>=0}e.a=r;var i=n(10)},function(t,e,n){"use strict";function r(){return new o.a}n.d(e,"a",function(){return a});var i=n(109),o=n(32),a=function(t){return void 0===t&&(t=r),Object(i.a)({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})}},function(t,e,n){"use strict";function r(t,e){return arguments.length>=2?function(n){return Object(s.a)(Object(i.a)(t,e),Object(o.a)(1),Object(a.a)(e))(n)}:function(e){return Object(s.a)(Object(i.a)(function(e,n,r){return t(e,n,r+1)}),Object(o.a)(1))(e)}}e.a=r;var i=n(68),o=n(67),a=n(35),s=n(56)},function(t,e,n){var r,i;r=[n,e,n(50)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n,r,i){void 0===r&&(r=""),void 0===i&&(i=!1),this.editor=t,this.desc=e,this.abbreviatedDesc=n,this.icon=r,this.needsInput=i,this.needsInput=!!i,this.boundHandler=this.eventHandler.bind(this),this.boundTerminalHandler=this.terminalEventHandler.bind(this)}return t.prototype.eventHandler=function(t){var e=null!=t.data?t.data:{};this.execute(e),t.preventDefault()},t.prototype.terminalEventHandler=function(t){return this.eventHandler(t),t.preventDefault(),t.stopPropagation(),!1},t.prototype.getDescription=function(){return this.desc},t.prototype.getDescriptionFor=function(t){return this.getDescription()},t.prototype.getAbbreviatedDescription=function(){return this.abbreviatedDesc},t.prototype.getIcon=function(){return this.icon},t.prototype.getLabelFor=function(t){var e=this.getDescriptionFor(t),n=this.getIcon();return""!==n&&""!==e?n+" "+e:""!==n?n:e},t.prototype.toString=function(){return this.getDescription()},t.prototype.makeButton=function(t){var e=this,r=new n.Button(void 0!==t?this.getDescriptionFor(t):this.getDescription(),this.getAbbreviatedDescription(),this.getIcon());return r.events.subscribe(function(){e.execute(void 0!==t?t:{})}),r},t}();e.Action=r}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();r=[n,e,n(19)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,r,i){void 0===r&&(r=""),void 0===i&&(i=""),this.desc=t,this.abbreviatedDesc=e,this.icon=r,this.extraClass=i,this._events=new n.Subject,this.events=this._events.asObservable()}return Object.defineProperty(t.prototype,"buttonClassName",{get:function(){var t=this.extraClass;return""!==t&&(t=" "+t),"btn btn-default"+t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonText",{get:function(){return void 0===this.abbreviatedDesc?this.desc:this.abbreviatedDesc},enumerable:!0,configurable:!0}),t.prototype.render=function(t){var e=null;if(void 0!==this.el){e=this.el.nextSibling,t=this.el.parentNode;var n=$(this.el);n.remove(),n.tooltip("destroy")}if(null==t)throw new Error("called first render without a parent");var r=this.makeButton(t.ownerDocument);this.el=r,t.insertBefore(r,e)},t.prototype.makeButton=function(t){var e=t.createElement("button");e.className=this.buttonClassName;var n=$(e);return this.setButtonContent(e),this.setButtonTooltip(n),this.setButtonEventHandlers(n),e},t.prototype.setButtonContent=function(t){var e=this.icon;""!==e?t.innerHTML=e:t.textContent=this.buttonText},t.prototype.setButtonTooltip=function(t){var e=this.desc;""===this.icon&&this.buttonText===e||(t[0].setAttribute("title",e),t.tooltip({title:e,container:"body",placement:"auto",trigger:"hover"}))},t.prototype.setButtonEventHandlers=function(t){var e=this;t.click(function(){return e._events.next({name:"Click",button:e}),!1}),t.mousedown(!1)},t}();e.Button=r;var i=function(t){function e(e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o="");var a=t.call(this,n,r,i,o)||this;return a.desc=n,a.abbreviatedDesc=r,a.icon=i,a.extraClass=o,a._pressed=e,a.events.subscribe(function(t){"Click"===t.name&&void 0!==a.el&&(a._pressed=!a._pressed,a.render())}),a}return o(e,t),Object.defineProperty(e.prototype,"pressed",{get:function(){return this._pressed},set:function(t){this._pressed!==t&&(this._pressed=t,void 0!==this.el&&this.render())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonClassName",{get:function(){var t=this.extraClass;return""!==t&&(t=" "+t),"btn btn-default"+t+(this._pressed?" active":"")},enumerable:!0,configurable:!0}),e}(r);e.ToggleButton=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(22),n(7)],void 0!==(i=function(t,e,n){"use strict";function r(t,r,i,o,a,s,u,c){if(void 0===r&&(r=!0),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===u&&(u=!1),void 0===c&&(c=e.EITHER),"string"==typeof t){if(1!==t.length)throw new Error("when the first parameter is a string, a one-character string is required");t=t.charCodeAt(0)}else if("number"!=typeof t)throw new Error("the first parameter must be a string or number");return r=void 0===r||!!r,null==i&&(i=r&&n.GECKO?0:t),null==o&&(o=r?t:0),a=!!a,s=!!s,u=!!u,c!==e.EITHER&&(c=!!c),l.make(t,r,i,o,a,s,u,c)}function i(t,n){return void 0===n&&(n=e.EITHER),r(t,!1,void 0,void 0,!0,!1,!1,n)}function a(t,n){return void 0===n&&(n=e.EITHER),r(t,!1,void 0,void 0,!1,!1,!0,n)}function s(t,r){return void 0===r&&(r=e.EITHER),n.OSX?a(t,r):i(t,r)}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var u=0,c=function(){function t(){}return t.prototype.toString=function(){return"EITHER"},t}();e.EITHER_=c,e.EITHER=new c;var l=function(){function t(t,n,r,i,o,a,s,c,l){if(void 0===r&&(r=!0),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===c&&(c=!1),void 0===l&&(l=e.EITHER),r&&l!==e.EITHER)throw new Error("shiftKey with key presses must be EITHER");this.which=n,this.keyCode=i,this.charCode=o,this.ctrlKey=a,this.altKey=s,this.metaKey=c,this.shiftKey=l,this.keypress=r,this.hashKey=t,this.id=u++}return t.make=function(n,r,i,o,a,s,u,c){void 0===r&&(r=!0),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===u&&(u=!1),void 0===c&&(c=e.EITHER);var l=[n,i,o,a,s,u,c,r].join(","),d=t.__cache[l];return void 0===d&&(t.__cache[l]=d=new t(l,n,r,i,o,a,s,u,c)),d},t.prototype.matchesEvent=function(t){return t.which===this.which&&t.keyCode===this.keyCode&&t.charCode===this.charCode&&t.ctrlKey===this.ctrlKey&&t.altKey===this.altKey&&t.metaKey===this.metaKey&&(this.shiftKey===e.EITHER||t.shiftKey===this.shiftKey)&&(this.keypress?"keypress"===t.type:"keydown"===t.type||"keyup"===t.type)},t.prototype.setEventToMatch=function(t){var n=t;n.which=this.which,n.keyCode=this.keyCode,n.charCode=this.charCode,n.ctrlKey=this.ctrlKey,n.altKey=this.altKey,n.metaKey=this.metaKey,this.shiftKey!==e.EITHER&&(n.shiftKey=this.shiftKey),this.keypress?n.type="keypress":n.type="keydown"},t.prototype.hash=function(){return this.id},t.prototype.anyModifier=function(){return this.ctrlKey||this.altKey||this.metaKey},t.__cache=Object.create(null),t}();e.Key=l,e.NULL_KEY=l.make(-1,!1,-1),e.makeKey=r,e.makeCtrlKey=i,e.makeMetaKey=a,e.makeCtrlEqKey=s}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(7),n(5),n(27)],void 0!==(i=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),r=a(r);var i=function(){function t(t,e,r,i,o,a){void 0===a&&(a=!0),this.dismissCallback=o,this.dismissed=!1;var s=this.dropdown=t.createElement("div");s.className="dropdown wed-context-menu",s.innerHTML="<a href='#' data-toggle='dropdown'></a><ul class='dropdown-menu' role='menu'></ul>",e-=5,r-=5,s.style.top=r+"px",s.style.left=e+"px",this.x=e,this.y=r;var u=this.menu=s.lastElementChild,c=this.$menu=n.default(u),l=this.toggle=s.firstElementChild,d=this.$toggle=n.default(l),f=this.backdrop=t.createElement("div");f.className="wed-context-menu-backdrop",n.default(f).click(this.backdropClickHandler.bind(this)),c.on("click",this.contentsClickHandler.bind(this)),d.on("click",this.contentsClickHandler.bind(this)),c.on("mousedown",function(t){t.stopPropagation()}),n.default(s).on("contextmenu mouseup",!1);var h=t.body;h.insertBefore(s,h.firstChild),h.insertBefore(f,h.firstChild),a&&this.display(i)}return t.prototype.display=function(t){var e=this.dropdown,i=n.default(e.firstElementChild);this.render(t);var o=this.$menu,a=this.menu,s=e.ownerDocument,u=this.x,c=this.y,l=o.outerWidth(),d=n.default(s.defaultView).width();e.style.left=Math.max(0,Math.min(u,d-l))+"px",a.style.maxWidth=d+"px";var f=5*Number(o.css("line-height").replace("px","")),h=n.default(s.defaultView).height(),p=h-c;p<f&&(c-=f-p,p=f),e.style.top=c+"px",a.style.maxHeight=p+"px",i.focus(this.handleToggleFocus.bind(this)),i.dropdown("toggle");var v=r.childByClass(e,"dropdown-backdrop");null!==v&&e.removeChild(v)},t.prototype.handleToggleFocus=function(){},t.prototype.contentsClickHandler=function(t){return this.dismiss(),t.stopPropagation(),t.preventDefault(),!1},t.prototype.backdropClickHandler=function(){return this.dismiss(),!1},t.prototype.render=function(t){this.$menu.append(t)},t.prototype.dismiss=function(){this.dismissed||(this.$menu.dropdown("toggle"),null!==this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown),null!==this.backdrop.parentNode&&this.backdrop.parentNode.removeChild(this.backdrop),void 0!==this.dismissCallback&&this.dismissCallback(),this.dismissed=!0)},t}();e.ContextMenu=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();r=[n,e,n(19)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.stack=[],this.list=[],this.index=-1,this._undoingOrRedoing=!1,this._events=new n.Subject,this.events=this._events.asObservable()}return t.prototype.reset=function(){if(this._undoingOrRedoing)throw new Error("may not reset while undoing or redoing");this.stack.length=0,this.index=-1;for(var t=0,e=this.list;t<e.length;t++){e[t].subscription.unsubscribe()}this.list=[]},t.prototype.record=function(t){if(this.stack.length>0)this.stack[0].record(t);else{var e=this.list;this.list=this.list.splice(0,this.index+1);for(var n=0,r=e;n<r.length;n++){r[n].subscription.unsubscribe()}this.list.push({undo:t,subscription:t.events.subscribe(this._events)}),this.index++}},t.prototype.undo=function(){if(this._undoingOrRedoing)throw new Error("calling undo while undoing or redoing");for(this._undoingOrRedoing=!0;this.stack.length>0;)this.endGroup();this.index>=0&&this.list[this.index--].undo.undo(),this._undoingOrRedoing=!1},t.prototype.redo=function(){if(this._undoingOrRedoing)throw new Error("calling redo while undoing or redoing");this._undoingOrRedoing=!0,this.index<this.list.length-1&&this.list[++this.index].undo.redo(),this._undoingOrRedoing=!1},t.prototype.undoingOrRedoing=function(){return this._undoingOrRedoing},t.prototype.canUndo=function(){return this.index>-1||this.stack.length>0},t.prototype.canRedo=function(){return this.index<this.list.length-1},t.prototype.startGroup=function(t){this.stack.unshift(t)},t.prototype.endGroup=function(){var t=this.stack.shift();if(void 0===t)throw new Error("ending a non-existent group.");t.end(),this.record(t)},t.prototype.endAllGroups=function(){for(;this.stack.length>0;)this.endGroup()},t.prototype.getGroup=function(){return this.stack[0]},t.prototype.toString=function(){var t=[];t.push("Start of list\n");for(var e=0,n=this.list;e<n.length;e++){var r=n[e];t.push(r.toString())}t.push("End of list\n"),t.push("Unfinished groups:\n");for(var i=this.stack.length-1;i>=0;--i){var o=this.stack[i];t.push(o.toString())}return t.push("End of unfinished groups\n"),t.join("")},t}();e.UndoList=r;var i=function(){function t(t){this.desc=t,this._events=new n.Subject,this.events=this._events.asObservable()}return t.prototype.undo=function(){this.performUndo(),this._events.next({name:"Undo",undo:this})},t.prototype.redo=function(){this.performRedo(),this._events.next({name:"Redo",undo:this})},t.prototype.toString=function(){return this.desc+"\n"},t}();e.Undo=i;var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.list=[],e}return o(e,t),e.prototype.performUndo=function(){for(var t=this.list.length-1;t>=0;--t)this.list[t].undo()},e.prototype.performRedo=function(){for(var t=0,e=this.list;t<e.length;t++){e[t].redo()}},e.prototype.record=function(t){this.list.push(t),t.events.subscribe(this._events)},e.prototype.end=function(){},e.prototype.toString=function(){var t=[];t.push("Start of "+this.desc+"\n");for(var e=0,n=this.list;e<n.length;e++){var r=n[e];t.push(r.toString().replace(/(^|\n)/g,"$1 ").slice(0,-1))}return t.push("End of "+this.desc+"\n"),t.join("")},e}(i);e.UndoGroup=a;var s=function(t){function e(e){return t.call(this,"*** MARKER *** "+e)||this}return o(e,t),e.prototype.performUndo=function(){},e.prototype.performRedo=function(){},e}(i);e.UndoMarker=s}.apply(e,r))&&(t.exports=i)},function(t,e,n){"use strict";function r(t){setTimeout(function(){throw t})}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber"},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t)}function i(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:o.a}e.a=r,e.b=i;var o=n(41)},function(t,e,n){"use strict";function r(){return function(t){return t.lift(new a(t))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i.a(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(!t)return void(this.connection=null);this.connectable=null;var e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()},e}(o.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n(0),i=n(9),o=n(86),a=n(8),s=n(88),u=n(42),c=n(83),l=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.a(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new d(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new u.a;if(this.isStopped||this.hasError?e=a.a.EMPTY:(this.observers.push(t),e=new c.a(this,t)),i&&t.add(t=new s.a(t,i)),n)for(var l=0;l<o&&!t.closed;l++)t.next(r[l]);else for(var l=0;l<o&&!t.closed;l++)t.next(r[l].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||o.a).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(i.a),d=function(){function t(t,e){this.time=t,this.value=e}return t}()},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(Object(i.a)(n)?t.pop():n=void 0,t.length){case 0:return Object(a.b)(n);case 1:return n?Object(o.a)(t,n):Object(s.a)(t[0]);default:return Object(o.a)(t,n)}}e.a=r;var i=n(15),o=n(21),a=n(11),s=n(60)},function(t,e,n){"use strict";function r(t){var e=new i.a(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}e.a=r;var i=n(2)},function(t,e,n){"use strict";function r(t,e){return e?new o.a(function(n){return e.schedule(i,0,{error:t,subscriber:n})}):new o.a(function(e){return e.error(t)})}function i(t){var e=t.error;t.subscriber.error(e)}e.a=r;var o=n(2)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Object(o.a)(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(a.a)(t[0])&&(t=t[0]),Object(c.a)(t,r).lift(new d(n))}e.b=r,n.d(e,"a",function(){return d});var i=n(0),o=n(15),a=n(10),s=n(3),u=n(4),c=n(21),l={},d=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},t}(),f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i.a(e,t),e.prototype._next=function(t){this.values.push(l),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(Object(u.a)(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,a=o[n],s=this.toRespond?a===l?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(s.a)},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),Object(i.a)(o.a,t)}e.a=r;var i=n(34),o=n(25)},function(t,e,n){"use strict";function r(t){return new i.a(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Object(o.a)(n):Object(a.b)()).subscribe(e)})}e.a=r;var i=n(2),o=n(20),a=n(11)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Object(o.a)(t,void 0).lift(new d(n))}e.b=r,n.d(e,"a",function(){return d});var i=n(0),o=n(21),a=n(10),s=n(1),u=n(3),c=n(4),l=n(33),d=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.resultSelector))},t}(),f=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i.a(e,t),e.prototype._next=function(t){var e=this.iterators;Object(a.a)(t)?e.push(new p(t)):"function"==typeof t[l.a]?e.push(new h(t[l.a]())):e.push(new v(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0===e)return void this.destination.complete();this.active=e;for(var n=0;n<e;n++){var r=t[n];r.stillUnsubscribed?this.add(r.subscribe(r,n)):this.active--}},e.prototype.notifyInactive=function(){0===--this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){var i=t[r];if("function"==typeof i.hasValue&&!i.hasValue())return}for(var o=!1,a=[],r=0;r<e;r++){var i=t[r],s=i.next();if(i.hasCompleted()&&(o=!0),s.done)return void n.complete();a.push(s.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(s.a),h=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),p=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[l.a]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),v=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i.a(e,t),e.prototype[l.a]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Object(c.a)(this,this.observable,this,e)},e}(u.a)},function(t,e,n){"use strict";function r(t){return function(e){return 0===t?Object(s.b)():e.lift(new u(t))}}e.a=r;var i=n(0),o=n(1),a=n(31),s=n(11),u=function(){function t(t){if(this.total=t,this.total<0)throw new a.a}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return i.a(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return 0===t?Object(s.b)():e.lift(new u(t))}}e.a=r;var i=n(0),o=n(1),a=n(31),s=n(11),u=function(){function t(t){if(this.total=t,this.total<0)throw new a.a}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return i.a(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;if(e.length<n)e.push(t);else{e[r%n]=t}},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(o.a)},function(t,e,n){"use strict";function r(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new a(t,e,n))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.accumulator,this.seed,this.hasSeed))},t}(),s=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return i.a(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return"function"==typeof e?function(n){return n.pipe(r(function(n,r){return Object(u.a)(t(n,r)).pipe(Object(s.a)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new c(t))}}e.a=r;var i=n(0),o=n(3),a=n(4),s=n(16),u=n(20),c=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return i.a(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=this.innerSubscription;r&&r.unsubscribe(),this.add(this.innerSubscription=Object(a.a)(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e}(o.a)},function(t,e){t.exports=n},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();r=[n,e,n(13),n(6),n(5),n(17)],void 0!==(i=function(t,e,n,r,i,a){"use strict";function s(t){if(!r.isElement(t)||!t.classList.contains("_phantom_wrap"))throw new Error("the node should be a _phantom_wrap element");for(var e=0,n=t.firstChild;null!==n;){if(r.isElement(n)){if(n.classList.contains("_phantom_wrap"))e+=s(n);else if(n.classList.contains("_real"))e+=1;else if(!n.classList.contains("_phantom"))throw new Error("unexpected element in _phantom_wrap")}else if(n.nodeType!==Node.TEXT_NODE)throw new Error("unexpected node in _phantom_wrap");n=n.nextSibling}return e}function u(t,e){if(!r.isElement(t)||!t.classList.contains("_phantom_wrap"))throw new Error("the node should be a _phantom_wrap element");for(var n=e,i=null,o=t.firstChild;null===i&&null!==o;){if(r.isElement(o)){if(o.classList.contains("_phantom_wrap")){var a=u(o,e);null!==a.found&&(i=a.found),e-=a.count}else if(o.classList.contains("_real"))(e-=1)<0&&(i=o);else if(!o.classList.contains("_phantom"))throw new Error("unexpected element in _phantom_wrap")}else if(o.nodeType!==Node.TEXT_NODE)throw new Error("unexpected node in _phantom_wrap");o=o.nextSibling}return{found:i,count:n-e}}Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(n){var r=t.call(this,n)||this;return a.fixPrototype(r,e),r}return o(e,t),e}(Error);e.AttributeNotFound=c;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.nodeToPath=function(t){var e=this.node;if(null!==i.closestByClass(t,"_placeholder",e))throw new Error("cannot provide path to node because it is a placeholder node");if(e===t)return"";if(!e.contains(t))throw new Error("node is not a descendant of root");for(var n=[];t!==e;){var o=void 0;if(r.isElement(t)&&!t.matches("._real, ._phantom_wrap, ._attribute_value"))throw new Error("only nodes of class ._real, ._phantom_wrap, and ._attribute_value are supported");var a=i.closestByClass(t,"_attribute_value",e);if(null!==a){var u=i.siblingByClass(a,"_attribute_name");if(null===u)throw new Error("no attribute name found");if(n.unshift("@"+u.textContent),null===(o=i.closestByClass(a,"_real",e)))throw new Error("attribute is detached from real element")}else{if(null===(o=t.parentNode))throw new Error("detached node");for(var c=0,l=i.indexOf(o.childNodes,t),d=0;d<l;++d){var u=o.childNodes[d];r.isText(u)||r.isElement(u)&&u.classList.contains("_real")?c++:r.isElement(u)&&u.classList.contains("_phantom_wrap")&&(c+=s(u))}r.isElement(o)&&o.classList.contains("_phantom_wrap")||n.unshift(String(c))}t=o}return n.join("/")},e.prototype.pathToNode=function(t){var e=this.node;if(""===t)return e;var n,o=t.split(/\//),a=e;"@"===o[o.length-1][0]&&(n=o.pop());for(var s=null,l=0,d=o;l<d.length;l++){var f=d[l],h=/^(\d+)$/.exec(f);if(null===h)throw new Error("malformed path expression");s=null;for(var p=parseInt(h[1]),v=0;null===s&&v<a.childNodes.length;v++){var m=a.childNodes[v];if((r.isText(m)||r.isElement(m)&&m.classList.contains("_real"))&&--p<0)s=m;else if(r.isElement(m)&&m.classList.contains("_phantom_wrap")){var y=u(m,p);null!==y.found&&(s=y.found),p-=y.count}}if(null===s)return null;a=s}if(void 0!==n){var b=n.slice(1);if(!r.isElement(a))throw new Error("looking for attribute on something which is not an element");var g=a.getElementsByClassName("_attribute_name");s=null;for(var _=0;_<g.length;++_){var w=g[_];if(w.textContent===b){s=w;break}}if(null===s)throw new c("could not find attribute with name: "+b);a=i.siblingByClass(s,"_attribute_value")}return a},e}(n.DLocRoot);e.GUIRoot=l}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";function n(t,e){var r=t[e];if("object"==typeof r){for(var i in r)if(n(r,i))return!0;return!1}return r}function r(t,e,i,o){for(var a in t)if(n(t,a)){var s=void 0!==i?[i,a].join("."):a;if(a in e){var u=e[a],c=t[a];u instanceof Array||"object"!=typeof u||"object"!=typeof c||r(c,u,s,o)}else o.missing.push(s)}for(var l in e)if(!(l in t)){var s=void 0!==i?[i,l].join("."):l;o.extra.push(s)}}function i(t,e){var n={missing:[],extra:[]};r(t,e,void 0,n);var i=n;for(var o in i)0===i[o].length&&delete i[o];return i}function o(t,e){var n=i(t,e);if(void 0!==n.missing)throw new Error("missing option: "+n.missing[0]);if(void 0!==n.extra)throw new Error("extra option: "+n.extra[0])}function a(t,e){var n=i(t,e),r=[];if(void 0!==n.missing)for(var o=0,a=n.missing;o<a.length;o++){var s=a[o];r.push("missing option: "+s)}if(void 0!==n.extra)for(var u=0,c=n.extra;u<c.length;u++){var l=c[u];r.push("extra option: "+l)}if(0!==r.length)throw new Error(r.join(", "))}Object.defineProperty(e,"__esModule",{value:!0}),e.check=i,e.assertSummarily=o,e.assertExtensively=a}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();r=[n,e,n(17)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(r){var i=t.call(this,r)||this;return n.fixPrototype(i,e),i}return o(e,t),e}(Error);e.AbortTransformationException=r}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(19),n(13),n(6),n(5)],void 0!==(i=function(t,e,n,r,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),s=a(s);var u=s.indexOf,c=function(){function t(t){this.tree=t;var e=r.findRoot(t);if(void 0===e)throw new Error("the tree must have a DLocRoot");this.dlocRoot=e,this._events=new n.Subject,this.events=this._events.asObservable()}return t.prototype._emit=function(t){this._events.next(t),this._events.next({name:"Changed"})},t.prototype.insertAt=function(t,e,n){var o,a;if(t instanceof r.DLoc){if(o=t.node,a=t.offset,"number"==typeof e)throw new Error("incorrect call on insertAt: offset cannot be a number");n=e}else{if(o=t,"number"!=typeof e)throw new Error("incorrect call on insertAt: offset must be a number");a=e}if(n instanceof Array||n instanceof NodeList)for(var s=0;s<n.length;++s,++a){var u=n[s];if("string"!=typeof u&&!i.isElement(u)&&!i.isText(u))throw new Error("Array or NodeList element of the wrong type");this.insertAt(o,a,u)}else if("string"==typeof n)this.insertText(o,a,n);else if(i.isText(n))switch(o.nodeType){case Node.TEXT_NODE:this.insertText(o,a,n.data);break;case Node.ELEMENT_NODE:this.insertNodeAt(o,a,n);break;default:throw new Error("unexpected node type: "+o.nodeType)}else{if(!i.isElement(n))throw new Error("unexpected value for what: "+n);switch(o.nodeType){case Node.TEXT_NODE:this.insertIntoText(o,a,n);break;case Node.DOCUMENT_NODE:case Node.ELEMENT_NODE:this.insertNodeAt(o,a,n);break;default:throw new Error("unexpected node type: "+o.nodeType)}}},t.prototype.splitAt=function(t,e,n){var i;if(e instanceof r.DLoc?(i=e.node,n=e.offset):i=e,void 0===n)throw new Error("splitAt was called with undefined index");if(i===t&&i.nodeType===Node.TEXT_NODE)throw new Error("splitAt called in a way that would result in two adjacent text nodes");if(!t.contains(i))throw new Error("split location is not inside top");var o=t.cloneNode(!0),a=s.correspondingNode(t,o,i),c=this._splitAt(o,a,n),l=c[0],d=c[1],f=t.parentNode;if(null===f)throw new Error("called with detached top");var h=u(f.childNodes,t);return this.deleteNode(t),null!==l&&this.insertNodeAt(f,h,l),null!==d&&this.insertNodeAt(f,h+1,d),c},t.prototype._splitAt=function(t,e,n){var r,o=e===t,a=e.parentNode;if(i.isText(e))if(0===n)r=[null,e];else if(n===e.length)r=[e,null];else{var s=e.data.slice(n);e.deleteData(n,e.length-n),null!==a&&a.insertBefore(a.ownerDocument.createTextNode(s),e.nextSibling),r=[e,e.nextSibling]}else{if(!i.isElement(e))throw new Error("unexpected node type: "+e.nodeType);n<0?n=0:n>e.childNodes.length&&(n=e.childNodes.length);for(var c=e.cloneNode(!0);null!=e.childNodes[n];)e.removeChild(e.childNodes[n]);for(;0!=n--;)c.removeChild(c.firstChild);null!==a&&a.insertBefore(c,e.nextSibling),r=[e,c]}if(o)return r;if(null===a)throw new Error("unable to reach the top");return this._splitAt(t,a,u(a.childNodes,e)+1)},t.prototype.insertBefore=function(t,e,n){var r=null==n?t.childNodes.length:u(t.childNodes,n);if(-1===r)throw new Error("insertBefore called with a beforeThis value which is not a child of parent");this.insertAt(t,r,e)},t.prototype.insertText=function(t,e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!0);var a;if(t instanceof r.DLoc){if("string"!=typeof e)throw new Error("text must be a string");if("boolean"!=typeof n)throw new Error("caretAtEnd must be a boolean");i=n,n=e,a=t.node,e=t.offset}else a=t;var u=s.genericInsertText.call(this,a,e,n,i);return o({},u,{caret:r.DLoc.makeDLoc(this.dlocRoot,u.caret[0],u.caret[1])})},t.prototype.deleteText=function(t,e,n){var o;if(t instanceof r.DLoc)n=e,o=t.node,e=t.offset;else if(o=t,void 0===n)throw new Error("length cannot be undefined");if(!i.isText(o))throw new Error("deleteText called on non-text");this.setTextNode(o,o.data.slice(0,e)+o.data.slice(e+n))},t.prototype.insertIntoText=function(t,e,n){var o;if(t instanceof r.DLoc){if(!i.isNode(e))throw new Error("must pass a node as the 2nd argument");n=e,e=t.offset,o=t.node}else o=t;var a=s.genericInsertIntoText.call(this,o,e,n);return[r.DLoc.mustMakeDLoc(this.tree,a[0]),r.DLoc.mustMakeDLoc(this.tree,a[1])]},t.prototype.insertNodeAt=function(t,e,n){var o;if(t instanceof r.DLoc){if(!i.isNode(e))throw new Error("the 2nd argument must be a Node");n=e,e=t.offset,o=t.node}else if(o=t,"number"!=typeof e)throw new Error("index must be a number");if(null==n)throw new Error("called insertNodeAt with absent node");if(i.isDocumentFragment(n))throw new Error("document fragments cannot be passed to insertNodeAt");this._emit({name:"BeforeInsertNodeAt",parent:o,index:e,node:n});var a=o.childNodes[e];o.insertBefore(n,null!=a?a:null),this._emit({name:"InsertNodeAt",parent:o,index:e,node:n})},t.prototype.setTextNode=function(t,e){if(!i.isText(t))throw new Error("setTextNode called on non-text");""!==e?this.setTextNodeValue(t,e):this.deleteNode(t)},t.prototype.setTextNodeValue=function(t,e){if(!i.isText(t))throw new Error("setTextNodeValue called on non-text");var n=t.data;t.data=e,this._emit({name:"SetTextNodeValue",node:t,value:e,oldValue:n})},t.prototype.removeNode=function(t){if(null==t)throw new Error("called without a node value");var e=t.previousSibling,n=t.parentNode;if(null===n)throw new Error("called with detached node");var i=u(n.childNodes,t);return this.deleteNode(t),null===e?r.DLoc.mustMakeDLoc(this.tree,n,i):this.mergeTextNodes(e)},t.prototype.removeNodeNF=function(t){if(null!=t)return this.removeNode(t)},t.prototype.removeNodes=function(t){if(0!==t.length){var e=t[0].previousSibling,n=t[0].parentNode;if(null===n)throw new Error("called with detached node");for(var i=u(n.childNodes,t[0]),o=0;o<t.length;++o){if(o<t.length-1&&t[o].nextSibling!==t[o+1])throw new Error("nodes are not immediately contiguous in document order");this.deleteNode(t[o])}return null===e?r.DLoc.makeDLoc(this.tree,n,i):this.mergeTextNodes(e)}},t.prototype.cut=function(t,e){var n=s.genericCutFunction.call(this,t.toArray(),e.toArray());return n[0]=t.make(n[0]),n},t.prototype.mergeTextNodes=function(t){var e=t.nextSibling;if(i.isText(t)&&null!==e&&i.isText(e)){var n=t.length;return this.setTextNodeValue(t,t.data+e.data),this.deleteNode(e),r.DLoc.mustMakeDLoc(this.tree,t,n)}var o=t.parentNode;if(null===o)throw new Error("called with detached node");return r.DLoc.mustMakeDLoc(this.tree,o,u(o.childNodes,t)+1)},t.prototype.mergeTextNodesNF=function(t){if(null!=t)return this.mergeTextNodes(t)},t.prototype.deleteNode=function(t){this._emit({name:"BeforeDeleteNode",node:t});var e=t.parentNode;if(null===e)throw new Error("called with detached node");e.removeChild(t),this._emit({name:"DeleteNode",node:t,formerParent:e})},t.prototype.setAttribute=function(t,e,n){this.setAttributeNS(t,"",e,n)},t.prototype.setAttributeNS=function(t,e,n,r){if(void 0===r&&(r=null),!i.isElement(t))throw new Error("setAttribute called on non-element");var o=t.getAttributeNS(e,n);""!==o||t.hasAttributeNS(e,n)||(o=null),null!=r?t.setAttributeNS(e,n,r):t.removeAttributeNS(e,n),this._emit({name:"SetAttributeNS",node:t,ns:e,attribute:n,oldValue:o,newValue:r})},t.prototype.nodeToPath=function(t){return this.dlocRoot.nodeToPath(t)},t.prototype.pathToNode=function(t){return this.dlocRoot.pathToNode(t)},t}();e.TreeUpdater=c}.apply(e,r))&&(t.exports=i)},function(t,e){t.exports=r},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(77),n(6),n(5),n(78),n(73),n(285),n(51),n(23),n(287),n(72),n(124),n(125),n(39),n(74),n(17),n(49),n(288),n(13),n(114),n(78),n(289),n(290),n(53),n(127),n(50),n(52),n(121),n(122),n(119)],void 0!==(i=function(t,e,n,r,i,a,s,u,c,l,d,f,h,p,v,m,y,b,g,_,w,x,E,T,C,N,O,S,k,A,j){"use strict";function M(t,e){return new a.Editor(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),r=o(r),i=o(i),s=o(s),u=o(u),c=o(c),l=o(l),d=o(d),f=o(f),p=o(p),v=o(v),m=o(m),y=o(y),O=o(O),S=o(S),k=o(k),A=o(A),j=o(j),e.convert=n,e.domtypeguards=r,e.domutil=i,e.exceptions=s,e.inputTriggerFactory=u,e.key=c,e.keyConstants=l,e.labelman=d,e.objectCheck=f,e.Runtime=h.Runtime,e.saver=p,e.transformation=v,e.treeUpdater=m,e.util=y,e.makeEditor=M,e.Action=b.Action,e.Decorator=g.Decorator,e.DLoc=_.DLoc,e.DLocRoot=_.DLocRoot,e.DOMListener=w.DOMListener,e.version=x.version,e.GUISelector=E.GUISelector,e.BaseMode=T.BaseMode,e.UndoMarker=C.UndoMarker,e.Validator=N.Validator;!function(t){t.button=O,t.contextMenu=S,t.modal=k,t.tooltip=A,t.typeaheadPopup=j}(e.gui||(e.gui={}))}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(6),n(17)],void 0!==(i=function(t,e,n,r){"use strict";function i(t){return null===t&&(t=""),t}function o(t,e){var u;if(n.isElement(e)){u=t.createElement("div"),u.className=e.tagName+" _local_"+e.localName+" _xmlns_"+i(e.namespaceURI)+" _real";for(var c=0;c<e.attributes.length;++c){var l=e.attributes[c];u.setAttribute(r.encodeAttrName(l.name),l.value);var d=l.namespaceURI;null!==d&&d!==a&&d!==s&&u.setAttribute(r.encodeAttrName(l.name,"ns"),d)}for(var f=e.firstChild;null!==f;)u.appendChild(o(t,f)),f=f.nextSibling}else{if(!n.isText(e))throw new Error("unhandled node type: "+e.nodeType);u=document.createTextNode(e.data)}return u}Object.defineProperty(e,"__esModule",{value:!0});var a="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/2000/xmlns/";e.toHTMLTree=o}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},u=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},l=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(103),n(7),n(104),n(113),n(70),n(49),n(242),n(13),n(114),n(6),n(5),n(5),n(246),n(73),n(247),n(248),n(253),n(259),n(38),n(120),n(260),n(121),n(261),n(263),n(129),n(264),n(122),n(71),n(51),n(23),n(123),n(266),n(270),n(271),n(272),n(273),n(124),n(125),n(278),n(126),n(39),n(74),n(53),n(280),n(17),n(281),n(127),n(37),n(284),n(27)],void 0!==(i=function(t,e,n,r,i,d,f,h,p,v,m,y,b,g,_,w,x,E,T,C,N,O,S,k,A,j,M,R,D,L,P,I,B,H,U,F,V,W,K,$,z,G,q,Y,X,Z,Q,J,tt,et,nt){"use strict";function rt(t,e){return e.name===t}Object.defineProperty(e,"__esModule",{value:!0}),n=c(n),r=c(r),d=l(d),m=l(m),b=l(b),_=l(_),N=l(N),I=l(I),B=l(B),U=l(U),F=l(F),V=l(V),W=l(W),Q=l(Q),nt=l(nt),e.version="2.0.0";var it,ot=P.makeKey(27),at=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"modal",{get:function(){if(void 0===this._modal){var t=this._modal=this.editor.makeModal();t.setTitle("Complex Name Pattern Encountered"),t.setBody("<p>The schema contains here a complex name pattern modal. While wed has no problem validating such cases. It does not currently have facilities to add elements or attributes that match such patterns. You can continue editing your document but you will not be able to take advantage of the possibilities provided by the complex pattern here.</p>"),t.addButton("Ok",!0)}return this._modal},enumerable:!0,configurable:!0}),e.prototype.execute=function(){this.modal.modal()},e}(h.Action);!function(t){t[t.DEFAULT=0]="DEFAULT",t[t.MINIBUFFER=1]="MINIBUFFER"}(it=e.WedEventTarget||(e.WedEventTarget={}));var st="<div class='row'> <div class='toolbar'></div> <div class='wed-frame col-sm-push-2 col-lg-10 col-md-10 col-sm-10'>  <div class='row'>   <div class='progress'>    <span></span>    <div class='wed-validation-progress progress-bar' style='width: 0%'></div>   </div>  </div>  <div class='row'>   <div class='wed-cut-buffer' contenteditable='true'></div>   <div class='wed-document-constrainer'>    <input class='wed-comp-field' type='text'></input>    <div class='wed-scroller'>     <div class='wed-caret-layer'></div>     <div class='wed-error-layer'></div>     <div class='wed-document'><span class='root-here'></span></div>    </div>   </div>   <div class='wed-minibuffer'></div>   <div class='wed-location-bar'>@&nbsp;<span>&nbsp;</span></div>  </div> </div> <div class='wed-sidebar col-sm-pull-10 col-lg-2 col-md-2 col-sm-2'>  <div class='wed-save-and-modification-status'>   <span class='wed-modification-status label label-success'          title='Modification status'>    <i class='fa fa-asterisk'></i>   </span>   <span class='wed-save-status label label-default'>    <i class='fa fa-cloud-upload'></i> <span></span>   </span>  </div>  <div id='sidebar-panel' class='panel-group wed-sidebar-panel'>   <div class='panel panel-info wed-navigation-panel'>    <div class='panel-heading'>     <div class='panel-title'>      <a class='accordion-toggle' data-toggle='collapse'          data-parent='#sidebar-panel' href='#sb-nav-collapse'>Navigation</a>     </div>    </div>   <div id='sb-nav-collapse' data-parent='#sidebar-panel'         class='panel-collapse collapse in'>     <div id='sb-nav' class='panel-body'>      <ul id='navlist' class='nav nav-list'>       <li class='inactive'>A list of navigation links will appear here</li>      </ul>     </div>    </div>   </div>   <div class='panel panel-danger'>    <div class='panel-heading'>     <div class='panel-title'>      <a class='accordion-toggle' data-toggle='collapse'         data-parent='#sidebar-panel' href='#sb-errors-collapse'>Errors</a>     </div>    </div>    <div id='sb-errors-collapse' data-parent='#sidebar-panel'         class='panel-collapse collapse'>     <div id='sb-errors' class='panel-body'>      <ul id='sb-errorlist' class='nav nav-list wed-errorlist'>       <li class='inactive'></li>      </ul>     </div>    </div>   </div>  </div> </div></div>",ut=function(){function t(t,e){var i=this;this._firstValidationComplete=!1,this.modeData={},this.developmentMode=!1,this.textUndoMaxLength=10,this.taskRunners=[],this.taskSuspension=0,this.normalizeEnteredSpaces=!0,this.strippedSpaces=/\u200B/g,this.replacedSpaces=/\s+/g,this.destroyed=!1,this.initialLabelLevel=0,this.currentLabelLevel=0,this.globalKeydownHandlers=[],this.updatingPlaceholder=0,this.composing=!1,this._transformations=new q.TransformationEventSubject,this.name="",this.saveAction=new _.Save(this),this.decreaseLabelVisibilityLevelAction=new _.DecreaseLabelVisibilityLevel(this),this.increaseLabelVisibilityLevelAction=new _.IncreaseLabelVisibilityLevel(this),this.undoAction=new _.Undo(this),this.redoAction=new _.Redo(this),this.toggleAttributeHidingAction=new _.ToggleAttributeHiding(this),this.transformations=this._transformations.asObservable(),this.maxLabelLevel=0,this.firstValidationComplete=new Promise(function(t){i.firstValidationCompleteResolve=t}),this.initialized=new Promise(function(t){i.initializedResolve=t}),F.editors.push(this),this.widget=t,this.$widget=r.default(this.widget),this.$frame=r.default(g.closest(this.widget,"html"));var o=this.doc=this.$frame[0].ownerDocument;this.window=o.defaultView,this.runtime=e instanceof K.Runtime?e:new K.Runtime(e),e=this.runtime.options,this.modals=new z.StockModals(this),e.ignore_module_config&&console.warn("the option ignore_module_config is no longer useful");var a=new n.default,s=a.compile(V);if(!s(e))throw new Error("the options passed to wed are not valid: "+a.errorsText(s.errors,{dataVar:"options"}));void 0!==e.ajaxlog&&(this.appender=B.addURL(e.ajaxlog.url,e.ajaxlog.headers)),this.name=void 0!==e.name?e.name:"",this.options=e;var u=this.options.docURL;this.docURL=null==u?"./doc/index.html":u,this.preferences=new W.Preferences({tooltips:!0});var c=g.htmlToElements(st,o)[0],l=this.guiRoot=c.getElementsByClassName("wed-document")[0];this.$guiRoot=r.default(l),this.scroller=new M.Scroller(c.getElementsByClassName("wed-scroller")[0]),this.constrainer=c.getElementsByClassName("wed-document-constrainer")[0];var d=this.toolbar=new R.Toolbar,f=c.getElementsByClassName("toolbar")[0];f.parentNode.insertBefore(d.top,f),f.parentNode.removeChild(f),this.inputField=c.getElementsByClassName("wed-comp-field")[0],this.$inputField=r.default(this.inputField),this.cutBuffer=c.getElementsByClassName("wed-cut-buffer")[0],this.caretLayer=new O.Layer(c.getElementsByClassName("wed-caret-layer")[0]),this.errorLayer=new C.ErrorLayer(c.getElementsByClassName("wed-error-layer")[0]),this.wedLocationBar=c.getElementsByClassName("wed-location-bar")[0],this.minibuffer=new S.Minibuffer(c.getElementsByClassName("wed-minibuffer")[0]);var h=this.sidebar=c.getElementsByClassName("wed-sidebar")[0];this.validationProgress=c.getElementsByClassName("wed-validation-progress")[0],this.validationMessage=this.validationProgress.previousElementSibling;var p=c.getElementsByClassName("root-here")[0];if(null!==this.widget.firstChild){if(!(this.widget.firstChild instanceof this.window.Element))throw new Error("the data is populated with DOM elements constructed from another window");p.parentNode.insertBefore(this.widget.firstChild,p)}p.parentNode.removeChild(p),this.widget.appendChild(c),this.caretOwners=l.getElementsByClassName("_owns_caret"),this.clickedLabels=l.getElementsByClassName("_label_clicked"),this.withCaret=l.getElementsByClassName("_with_caret"),this.$modificationStatus=r.default(h.getElementsByClassName("wed-modification-status")[0]),this.$saveStatus=r.default(h.getElementsByClassName("wed-save-status")[0]),this.$navigationPanel=r.default(h.getElementsByClassName("wed-navigation-panel")[0]),this.$navigationPanel.css("display","none"),this.$navigationList=r.default(o.getElementById("navlist")),this.$errorList=r.default(o.getElementById("sb-errorlist")),this.$excludedFromBlur=r.default(),this.errorItemHandlerBound=this.errorItemHandler.bind(this),this._undo=new X.UndoList,this.complexPatternAction=new at(this,"Complex name pattern",void 0,N.makeHTML("exclamation"),!0),this.pasteTr=new q.Transformation(this,"add","Paste",this.paste.bind(this)),this.cutTr=new q.Transformation(this,"delete","Cut",this.cut.bind(this)),this.replaceRangeTr=new q.Transformation(this,"transform","Replace Range",this.replaceRange.bind(this)),this.splitNodeTr=new q.Transformation(this,"split","Split <name>",function(t,e){q.splitNode(t,e.node)}),this.mergeWithPreviousHomogeneousSiblingTr=new q.Transformation(this,"merge-with-previous","Merge <name> with previous",function(t,e){q.mergeWithPreviousHomogeneousSibling(t,e.node)}),this.mergeWithNextHomogeneousSiblingTr=new q.Transformation(this,"merge-with-next","Merge <name> with next",function(t,e){q.mergeWithNextHomogeneousSibling(t,e.node)}),this.removeMarkupTr=new q.Transformation(this,"delete","Remove mixed-content markup","Remove mixed-content markup","<i class='fa fa-eraser'></i>",!0,q.removeMarkup),d.addButton([this.saveAction.makeButton(),this.undoAction.makeButton(),this.redoAction.makeButton(),this.decreaseLabelVisibilityLevelAction.makeButton(),this.increaseLabelVisibilityLevelAction.makeButton(),this.removeMarkupTr.makeButton(),this.toggleAttributeHidingAction.makeButton()]),r.default(this.window).on("unload.wed",{editor:this},function(t){t.data.editor.destroy()}),r.default(this.window).on("popstate.wed",function(){""===document.location.hash&&(i.guiRoot.scrollTop=0)})}return Object.defineProperty(t.prototype,"undoEvents",{get:function(){return this._undo.events},enumerable:!0,configurable:!0}),t.prototype.fireTransformation=function(t,e){this.editingMenuManager.dismiss();var n=this._undo.getGroup();n instanceof nt.TextUndoGroup&&this._undo.endGroup();var r=new nt.UndoGroup("Undo "+t.getDescriptionFor(e),this);this._undo.startGroup(r),this.caretManager.mark.suspend(),this.enterTaskSuspension();try{try{this._fireTransformation(t,e)}catch(t){throw t instanceof w.AbortTransformationException||B.handle(t),t}finally{do{n=this._undo.getGroup(),this._undo.endGroup()}while(n!==r)}}catch(t){if(this.undo(),!(t instanceof w.AbortTransformationException))throw t}finally{this.caretManager.mark.resume(),this.exitTaskSuspension(),this.validationController.refreshErrors()}},t.prototype._fireTransformation=function(t,e){var n=e.node;if(void 0!==n)if(this.guiRoot.contains(n)){var r=this.toDataNode(n);e.node=null===r?void 0:r}else if(!b.contains(this.dataRoot,n))throw new Error("node is neither in the gui tree nor the data tree");var i=e.moveCaretTo;if(void 0!==i&&this.caretManager.setCaret(i),void 0===this.caretManager.caret)throw new Error("transformation applied with undefined caret.");var o=new q.TransformationEvent("StartTransformation",t);this._transformations.next(o),o.throwIfAborted(),t.handler(this,e);var a=new q.TransformationEvent("EndTransformation",t);this._transformations.next(a),a.throwIfAborted()},t.prototype.enterTaskSuspension=function(){0===this.taskSuspension&&this.stopAllTasks(),this.taskSuspension++},t.prototype.exitTaskSuspension=function(){if(--this.taskSuspension<0)throw new Error("exitTaskSuspension underflow");0===this.taskSuspension&&this.resumeAllTasks()},t.prototype.stopAllTasks=function(){for(var t=0,e=this.taskRunners;t<e.length;t++){e[t].stop()}this.validationController.stop()},t.prototype.resumeAllTasks=function(){for(var t=0,e=this.taskRunners;t<e.length;t++){e[t].resume()}this.validationController.resume()},t.prototype.resumeTaskWhenPossible=function(t){0===this.taskSuspension&&t.resume()},t.prototype.recordUndo=function(t){this._undo.record(t)},t.prototype.undoAll=function(){for(;this._undo.canUndo();)this.undo()},t.prototype.undo=function(){this.caretManager.mark.suspend(),this.enterTaskSuspension(),this.undoRecorder.suppressRecording(!0),this._undo.undo(),this.undoRecorder.suppressRecording(!1),this.caretManager.mark.resume(),this.exitTaskSuspension()},t.prototype.redo=function(){this.caretManager.mark.suspend(),this.enterTaskSuspension(),this.undoRecorder.suppressRecording(!0),this._undo.redo(),this.undoRecorder.suppressRecording(!1),this.caretManager.mark.resume(),this.exitTaskSuspension()},t.prototype.dumpUndo=function(){console.log(this._undo.toString())},t.prototype.undoingOrRedoing=function(){return this._undo.undoingOrRedoing()},t.prototype.isAttrProtected=function(t,e){var n;if("string"==typeof t){if(n=t,void 0===e)throw new Error("must specify a parent")}else if(y.isAttr(t))n=t.name;else{if(!y.isElement(t))throw new Error("unexpected value for attr");n=b.siblingByClass(t,"_attribute_name").textContent}return"xmlns"===n||0===n.lastIndexOf("xmlns:",0)},t.prototype.save=function(){return this.saver.save()},t.prototype.initiateTextUndo=function(){var t=this._undo.getGroup();return void 0!==t&&t instanceof nt.TextUndoGroup||(t=new nt.TextUndoGroup("text",this,this._undo,this.textUndoMaxLength),this._undo.startGroup(t)),t},t.prototype.terminateTextUndo=function(){this._undo.getGroup()instanceof nt.TextUndoGroup&&this._undo.endGroup()},t.prototype.normalizeEnteredText=function(t){return this.normalizeEnteredSpaces?t.replace(this.strippedSpaces,"").replace(this.replacedSpaces," "):t},t.prototype.compensateForAdjacentSpaces=function(t,e){if(!this.normalizeEnteredSpaces)return t;var n=e.toArray();return" "===t[0]&&" "===b.getCharacterImmediatelyBefore(n)&&(t=t.slice(1)),t.length>0&&" "===t[t.length-1]&&" "===b.getCharacterImmediatelyAt(n)&&(t=t.slice(-1)),t},t.prototype.insertText=function(t){if(this.closeAllTooltips(),""!==(t=this.normalizeEnteredText(t))){var e=this.caretManager,n=e.caret;if(void 0!==n){var r=g.closestByClass(n.node,"_real",this.guiRoot);if(null!==r&&!r.classList.contains("_readonly")){this.enterTaskSuspension();try{var i=g.closestByClass(n.node,"_attribute_value",this.guiRoot);if(null===i){if(n=e.getDataCaret(),""===(t=this.compensateForAdjacentSpaces(t,n)))return;var o=this.initiateTextUndo(),a=this.dataUpdater.insertText(n,t).caret;e.setCaret(a,{textEdit:!0}),o.recordCaretAfter()}else this.spliceAttribute(i,n.offset,0,t)}finally{this.exitTaskSuspension(),this.validationController.refreshErrors()}}}}},t.prototype.spliceAttribute=function(t,e,n,i){if(!(e<0||this.isAttrProtected(t))){var o=this.toDataNode(t).value;if(!(e>o.length||e===o.length&&n>0)){this.normalizeEnteredSpaces&&(" "===i[0]&&" "===o[e-1]&&(i=i.slice(1))," "===i[i.length-1]&&" "===o[e+n]&&(i=i.slice(-1)));var a=this.initiateTextUndo();o=o.slice(0,e)+i+o.slice(e+n),e+=i.length;var s=r.default.data(g.closestByClass(t,"_real"),"wed_mirror_node"),u=this.nodeToPath(t),c=b.siblingByClass(t,"_attribute_name").textContent,l=this.modeTree.getMode(t),d=l.getAbsoluteResolver().resolveName(c,!0);if(void 0===d)throw new Error("cannot resolve "+c);this.dataUpdater.setAttributeNS(s,d.ns,d.name,o);var f;try{f=this.pathToNode(u),null!==f.firstChild&&(f=f.firstChild)}catch(t){if(!(t instanceof L.AttributeNotFound))throw t}null==f&&(f=s,e=0),this.caretManager.setCaret(f,e,{textEdit:!0}),a.recordCaretAfter()}}},t.prototype.insertTransientPlaceholderAt=function(t){var e=r.default("<span class='_placeholder _transient' contenteditable='false'> </span>",t.node.ownerDocument)[0];return this.guiUpdater.insertNodeAt(t,e),e},t.prototype.toDataNode=function(t){if(y.isElement(t)){var e=r.default.data(t,"wed_mirror_node");if(null!=e)return e}return this.dataUpdater.pathToNode(this.nodeToPath(t))},t.prototype.fromDataNode=function(t){if(y.isElement(t)){var e=r.default.data(t,"wed_mirror_node");if(null!=e)return e}return this.pathToNode(this.dataUpdater.nodeToPath(t))},t.prototype.onSaverSaved=function(){A.notify("Saved",{type:"success"}),this.refreshSaveStatus()},t.prototype.onSaverAutosaved=function(){A.notify("Autosaved",{type:"success"}),this.refreshSaveStatus()},t.prototype.onSaverChanged=function(){this.refreshSaveStatus()},t.prototype.onSaverFailed=function(t){var e=this;this.refreshSaveStatus();var n=t.error;"too_old"===n.type?this.modals.getModal("tooOld").modal(this.window.location.reload.bind(this.window.location)):"save_disconnected"===n.type?this.modals.getModal("disconnect").modal(function(){e.save()}):"save_edited"===n.type?this.modals.getModal("editedByOther").modal(function(){e.window.location.reload()}):A.notify("Failed to save!\n"+n.msg,{type:"danger"})},t.prototype.nodeToPath=function(t){return this.guiDLocRoot.nodeToPath(t)},t.prototype.pathToNode=function(t){return this.guiDLocRoot.pathToNode(t)},t.prototype.getModeData=function(t){return this.modeData[t]},t.prototype.setModeData=function(t,e){this.modeData[t]=e},t.prototype.destroy=function(){if(!this.destroyed){var t=F.editors.indexOf(this);t>=0&&F.editors.splice(t,1),void 0!==this.saver&&this.saver.setAutosaveInterval(0),void 0!==this.saveStatusInterval&&clearInterval(this.saveStatusInterval);try{void 0!==this.validationController&&this.validationController.terminate()}catch(t){B.unhandled(t)}if(void 0!==this.taskRunners)for(var e=0,n=this.taskRunners;e<n.length;e++){var i=n[e];try{i.stop()}catch(t){B.unhandled(t)}}try{void 0!==this.domlistener&&(this.domlistener.stopListening(),this.domlistener.clearPending())}catch(t){B.unhandled(t)}void 0!==this.editingMenuManager&&this.editingMenuManager.dismiss();try{this.$widget.empty(),this.$frame.find("*").off(".wed"),r.default(this.window).off(".wed")}catch(t){B.unhandled(t)}for(var o=0,a=Object.keys(this);o<a.length;o++){delete this[a[o]]}void 0!==this.appender&&B.removeAppender(this.appender),this.destroyed=!0,this.destroy=function(){}}},t.prototype.init=function(t){return s(this,void 0,void 0,function(){var e,n,i=this;return u(this,function(o){switch(o.label){case 0:return e=new this.window.DOMParser,void 0!==t&&""!==t?(this.dataRoot=e.parseFromString(t,"text/xml"),this._dataChild=this.dataRoot.firstChild):(this.dataRoot=e.parseFromString("<div></div>","text/xml"),this._dataChild=void 0),this.dataRoot.removeChild(this.dataRoot.firstChild),this.$dataRoot=r.default(this.dataRoot),this.guiDLocRoot=new L.GUIRoot(this.guiRoot),this.dataDLocRoot=new v.DLocRoot(this.dataRoot),this.dataUpdater=new Y.TreeUpdater(this.dataRoot),this.guiUpdater=new x.GUIUpdater(this.guiRoot,this.dataUpdater),this.undoRecorder=new Z.UndoRecorder(this,this.dataUpdater),this.guiUpdater.events.subscribe(function(t){switch(t.name){case"BeforeInsertNodeAt":y.isElement(t.node)&&i.initialContentEditableHandler(t);break;case"InsertNodeAt":y.isElement(t.node)&&i.finalContentEditableHandler(t)}}),n=document.getElementsByClassName("wed-has-tooltip"),this.guiUpdater.events.subscribe(function(t){if("BeforeDeleteNode"===t.name){var e=t.node;if(e.nodeType!==Node.TEXT_NODE)for(var i=0,o=Array.from(n);i<o.length;i++){var a=o[i];if(e.contains(a)){var s=r.default.data(a,"bs.tooltip");null!=s&&s.destroy()}}}}),this.domlistener=new m.DOMListener(this.guiRoot,this.guiUpdater),this.modeTree=new H.ModeTree(this,this.options.mode),[4,this.modeTree.init()];case 1:return o.sent(),[2,this.onModeChange(this.modeTree.getMode(this.guiRoot))]}})})},t.prototype.onModeChange=function(t){return s(this,void 0,void 0,function(){var e,n,r,i,o,a,s,c;return u(this,function(u){switch(u.label){case 0:if(this.destroyed)return[2,this];for(this.maxLabelLevel=this.modeTree.getMaxLabelLevel(),this.initialLabelLevel=this.modeTree.getInitialLabelLevel(),this.currentLabelLevel=this.initialLabelLevel,e=this.modeTree.getStylesheets(),n=this.$frame.children("head"),r=0,i=e;r<i.length;r++)o=i[r],n.append('<link rel="stylesheet" href="'+o+'" type="text/css" />');return this.guiRoot.setAttribute("tabindex","-1"),(this.$guiRoot.focus(),this.caretManager=new p.CaretManager(this.guiDLocRoot,this.dataDLocRoot,this.inputField,this.guiUpdater,this.caretLayer,this.scroller,this.modeTree),this.editingMenuManager=new T.EditingMenuManager(this),this.caretManager.events.subscribe(this.caretChange.bind(this)),this.resizeHandler(),(s=this.options.schema)instanceof d.Grammar)?(a=s,[3,4]):[3,1];case 1:return"string"!=typeof s?[3,3]:[4,this.runtime.resolveToString(s)];case 2:return c=u.sent(),a=d.constructTree(c),[3,4];case 3:throw new Error("unexpected value for schema");case 4:return this.validator=new tt.Validator(a,this.dataRoot,this.modeTree.getValidators()),this.validator.events.addEventListener("state-update",this.onValidatorStateChange.bind(this)),this.validator.events.addEventListener("possible-due-to-wildcard-change",this.onPossibleDueToWildcardChange.bind(this)),this.validationController=new J.ValidationController(this,this.validator,t.getAbsoluteResolver(),this.scroller,this.guiRoot,this.validationProgress,this.validationMessage,this.errorLayer,this.$errorList[0],this.errorItemHandlerBound),[2,this.postInitialize()]}})})},t.prototype.postInitialize=function(){return s(this,void 0,void 0,function(){var t,n,o,a,s,c,l,d,f,h=this;return u(this,function(u){switch(u.label){case 0:return this.destroyed?[2,this]:(this.domlistener.addHandler("children-changed","._real, ._phantom_wrap, .wed-document",function(t,e,n,r,i,o){for(var a=0,s=e.concat(n);a<s.length;a++){var u=s[a];if(y.isText(u)||y.isElement(u)&&(u.classList.contains("_real")||u.classList.contains("_phantom_wrap"))){h.validator.resetTo(o);break}}}),this.domlistener.addHandler("attribute-changed","._real",function(t,e,n,r){""===n&&0===r.indexOf("data-wed",0)&&setTimeout(function(){h.destroyed||h.validator.resetTo(e)},0)}),this.modeTree.addDecoratorHandlers(),this.domlistener.addHandler("included-element","._label",function(t,e,n,r,i,o){for(var a,s=o.classList,u=0;u<s.length&&void 0===a;++u)0===s[u].lastIndexOf("_label_level_",0)&&(a=Number(s[u].slice(13)));if(void 0===a)throw new Error("unable to get level");a>h.currentLabelLevel&&s.add("_invisible")}),this.domlistener.addHandler("children-changed","._real, ._phantom_wrap, .wed-document",function(t,e,n,r,i,o){if(0===h.updatingPlaceholder){h.updatingPlaceholder++;for(var a,s=[],u=o.firstChild;null!==u;)(y.isText(u)||y.isElement(u)&&(u.classList.contains("_real")||u.classList.contains("_phantom_wrap")||u.classList.contains("_text")))&&s.push(u),y.isElement(u)&&u.classList.contains("_placeholder")&&(a=u),u=u.nextSibling;var c=h.caretManager;if(0===s.length||1===s.length&&-1!==n.indexOf(s[0])){if(void 0===a){var l=h.modeTree.getMode(o),d=l.nodesAroundEditableContents(o);if(o===h.guiRoot){var f=c.makeCaret(h.guiRoot,0);a=h.insertTransientPlaceholderAt(f),c.setCaret(f,{textEdit:!0})}else a=l.makePlaceholderFor(o),h.guiUpdater.insertBefore(o,a,d[1])}}else if(void 0!==a&&!a.classList.contains("_transient")){var p,v=void 0!==c.caret?c.caret.node:void 0,m=void 0!==v&&a.contains(v),b=void 0;m&&(p=a.parentNode,b=g.indexOf(p.childNodes,a)),h.guiUpdater.removeNode(a),m&&c.setCaret(p,b,{textEdit:!0})}h.updatingPlaceholder--}}),t=function(t){if(0===h.updatingPlaceholder){h.updatingPlaceholder++;var e=h.toDataNode(t),n=b.childByClass(t,"_placeholder");""!==e.value?null!==n&&t.removeChild(n):null===n&&h.guiUpdater.insertBefore(t,b.makePlaceholder(),null),h.updatingPlaceholder--}},this.domlistener.addHandler("children-changed","._attribute_value",function(e,n,r,i,o,a){t(a)}),this.domlistener.addHandler("included-element","._attribute_value",function(e,n,r,i,o,a){t(a)}),this.modeTree.startListening(),void 0!==this._dataChild&&this.dataUpdater.insertAt(this.dataRoot,0,this._dataChild),n=this.$guiRoot,n.on("dragenter","*",!1),n.on("dragstart","*",!1),n.on("dragover","*",!1),n.on("drop","*",!1),n.on("wed-global-keydown",this.globalKeydownHandler.bind(this)),n.on("wed-global-keypress",this.globalKeypressHandler.bind(this)),n.on("keydown",this.keydownHandler.bind(this)),n.on("keypress",this.keypressHandler.bind(this)),this.$inputField.on("keydown",this.keydownHandler.bind(this)),this.$inputField.on("keypress",this.keypressHandler.bind(this)),this.$inputField.on("compositionstart compositionupdate compositionend",this.compositionHandler.bind(this)),this.$inputField.on("input",this.inputHandler.bind(this)),n.on("mousedown",this.mousedownHandler.bind(this)),n.on("mouseover",this.mouseoverHandler.bind(this)),n.on("mouseout",this.mouseoutHandler.bind(this)),n.on("contextmenu",this.mouseupHandler.bind(this)),n.on("paste",B.wrap(this.pasteHandler.bind(this))),this.$inputField.on("paste",B.wrap(this.pasteHandler.bind(this))),n.on("cut",B.wrap(this.cutHandler.bind(this))),r.default(this.window).on("resize.wed",this.resizeHandler.bind(this)),n.on("click","a",function(t){return t.ctrlKey&&(window.location.href=t.currentTarget.href),!1}),o=r.default(this.doc.body),o.on("mouseup.wed",function(){h.$guiRoot.off("mousemove.wed mouseup")}),o.on("contextmenu.wed",function(t){return!h.guiRoot.contains(t.target)}),o.on("click.wed",function(t){if(!(void 0===t.pageX||t.pageX<0||void 0===t.pageY||t.pageY<0||t.screenX===t.screenY&&0===t.screenX||h.widget.contains(t.target))){var e=h.doc.elementFromPoint(t.clientX,t.clientY);if(0===r.default(e).closest(h.$excludedFromBlur).length){var n=h.$guiRoot.offset(),i=t.pageX-n.left,o=t.pageY-n.top;i>=0&&o>=0&&i<h.$guiRoot.outerWidth()&&o<h.$guiRoot.outerHeight()||h.caretManager.onBlur()}}}),this.$widget.removeClass("loading"),this.$widget.css("display","block"),void 0!==(a=this.initializeNamespaces())?(s=this.modals.getModal("limitation"),s.setBody(a),s.modal(),this.destroy(),[2,this]):(this.domlistener.processImmediately(),this._undo.reset(),n.focus(),this.validator.start(),c=this.options.demo,void 0!==c&&("string"!=typeof c&&(c="Some functions may not be available."),l=this.makeModal(),l.setTitle("Demo"),l.setBody("<p>This is a demo of wed. "+c+"</p> <p>Click <a href='"+this.docURL+"' target='_blank'>this link</a> to see wed's generic help. The link by default will open in a new tab.</p>"),l.addButton("Ok",!0),l.modal()),d=this.options.save,f=void 0!==d?this.runtime.resolveModules(d.path).then(function(t){var n=t[0].Saver,r=void 0!==d.options?d.options:{},o=new n(h.runtime,e.version,h.dataUpdater,h.dataRoot,r);return h.saver=o,o.events.pipe(i.filter(rt.bind(void 0,"Saved"))).subscribe(h.onSaverSaved.bind(h)),o.events.pipe(i.filter(rt.bind(void 0,"Autosaved"))).subscribe(h.onSaverAutosaved.bind(h)),o.events.pipe(i.filter(rt.bind(void 0,"Failed"))).subscribe(h.onSaverFailed.bind(h)),o.events.pipe(i.filter(rt.bind(void 0,"Changed"))).subscribe(h.onSaverChanged.bind(h)),h.refreshSaveStatus(),h.saveStatusInterval=setInterval(h.refreshSaveStatus.bind(h),3e4),U.install(h.window,function(){return!h.destroyed&&!1!==h.saver.getModifiedWhen()},!0),o.init()}):Promise.resolve().then(function(){B.error("wed cannot save data due to the absence of a save option")}),[4,f]));case 1:return u.sent(),this.initializedResolve(this),[2,this]}})})},t.prototype.initialContentEditableHandler=function(t){var e=function(t){t.setAttribute("tabindex","-1"),t.setAttribute("contenteditable",String(t.classList.contains("_real")||t.classList.contains("_attribute_value")));for(var n=t.firstElementChild;null!==n;)e(n),n=n.nextElementSibling};e(t.node)},t.prototype.finalContentEditableHandler=function(t){for(var e=t.node,n=e.getElementsByClassName("_attribute_value"),r=0,i=Array.from(n);r<i.length;r++){var o=i[r];"edit"!==this.modeTree.getAttributeHandling(o)&&o.setAttribute("contenteditable","false")}},t.prototype.initializeNamespaces=function(){var t,e=this.modeTree.getMode(this.guiRoot),n=e.getAbsoluteResolver();if(null===this.dataRoot.firstChild){var r=Object.create(null);if(this.validator.getSchemaNamespaces().forEach(function(e){if("*"!==e&&"::except"!==e){var i=n.prefixFromURI(e);"xml"!==i&&(""===i?r.xmlns=e:(void 0===i&&(t="The mode does not allow determining the namespace prefix for "+e+". The most likely issue is that the mode is buggy or wed was started with incorrect options."),r["xmlns:"+i]=e))}}),void 0!==t)return t;var i=Array.from(this.validator.possibleAt(this.dataRoot,0));if(1===i.length&&"enterStartTag"===i[0].params[0]){var o=i[0].params[1],a=o.toArray();if(null!==a&&1===a.length){var s=a[0];q.insertElement(this.dataUpdater,this.dataRoot,0,s.ns,n.unresolveName(s.ns,s.name),r),this.caretManager.setCaret(this.dataRoot.firstElementChild,0)}}if(null===this.dataRoot.firstChild){var u=this.insertTransientPlaceholderAt(this.caretManager.makeCaret(this.guiRoot,0));this.caretManager.setCaret(u,0)}}else{var c=this.validator.getDocumentNamespaces();Object.keys(c).forEach(function(e){var r=c[e];r.length>1&&(t="The document you are trying to edit uses namespaces in a way not supported by this version of wed."),n.definePrefix(e,r[0])})}return t},t.prototype.addToolbarAction=function(t,e){this.toolbar.addButton(new t(this).makeButton(),e)},t.prototype.newTaskRunner=function(t){var e=new G.TaskRunner(t);return this.taskRunners.push(e),e},t.prototype.resize=function(){this.resizeHandler()},t.prototype.resizeHandler=function(){function t(t){e+=t.getBoundingClientRect().height}for(var e=0,n=this.constrainer.nextElementSibling;null!==n;)t(n),n=n.nextElementSibling;for(var i=this.widget;y.isElement(i);){for(var o=i.nextElementSibling;null!==o;)"script"!==o.tagName&&t(o),o=o.nextElementSibling;i=i.parentNode}var a=this.window.innerHeight-(this.scroller.getBoundingClientRect().top+this.window.pageYOffset)-e;a=Math.floor(a),this.scroller.coerceHeight(a);var s=this.sidebar,u=this.window.innerHeight-(s.getBoundingClientRect().top+this.window.pageYOffset)-e;s.style.maxHeight=u+"px",s.style.minHeight=u+"px";var c=s.getElementsByClassName("wed-sidebar-panel")[0];u=this.window.innerHeight-(c.getBoundingClientRect().top+this.window.pageYOffset)-e,c.style.maxHeight=u+"px",c.style.minHeight=u+"px";for(var l=c.getElementsByClassName("panel"),d=c.getElementsByClassName("panel-heading"),f=0,h=0;h<d.length;++h){var p=d[h],v=r.default(p.parentNode);f+=v.outerHeight(!0)-v.innerHeight(),f+=r.default(p).outerHeight(!0)}for(var m,g=u-f,h=0;h<l.length;++h){m=l[h],m.style.maxHeight=g+r.default(b.childByClass(m,"panel-heading")).outerHeight(!0)+"px";m.getElementsByClassName("panel-body")[0].style.height=g+"px"}void 0!==this.validationController&&this.validationController.refreshErrors(),this.caretManager.mark.refresh()},t.prototype.openDocumentationLink=function(t){window.open(t)},t.prototype.getElementTransformationsAt=function(t,e){var n=this,r=this.modeTree.getMode(t.node),i=r.getAbsoluteResolver(),o=[];return this.validator.possibleAt(t).forEach(function(a){if("enterStartTag"===a.params[0]){var s=a.params[1],u=s.toArray();if(null!==u)for(var c=0,l=u;c<l.length;c++){var d=l[c],f=i.unresolveName(d.ns,d.name),h=r.getContextualActions(e,f,t.node,t.offset);if(void 0===h)return;for(var p=0,v=h;p<v.length;p++){var m=v[p];o.push({tr:m,name:f})}}else o.push({tr:n.complexPatternAction,name:void 0})}}),o},t.prototype.cutHandler=function(t){if(void 0===this.caretManager.getDataCaret())return!1;var e=this.caretManager.sel;if(e.wellFormed){var n=g.closestByClass(e.anchor.node,"_real",this.guiRoot);return null!==n&&!n.classList.contains("_readonly")&&(this.fireTransformation(this.cutTr,{e:t}),!0)}return this.modals.getModal("straddling").modal(),!1},t.prototype.pasteHandler=function(t){var e=this,n=this.caretManager.getDataCaret();if(void 0===n)return!1;var r=g.closestByClass(this.caretManager.anchor.node,"_real",this.guiRoot);if(null===r||r.classList.contains("_readonly"))return!1;var i=t.originalEvent.clipboardData||this.window.clipboardData,o=i.getData("text");if(null==o||""===o)return!1;if(""===(o=this.normalizeEnteredText(o)))return!1;var a=new this.window.DOMParser,s=a.parseFromString("<div>"+o+"</div>","text/xml"),u=!0;y.isElement(s.firstChild)&&"parsererror"===s.firstChild.tagName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"===s.firstChild.namespaceURI&&(u=!1);var c;if(u){c=s.firstChild;if(this.validator.speculativelyValidate(n,Array.prototype.slice.call(c.childNodes))){var l=this.modals.getModal("paste");return l.modal(function(){"Yes"===l.getClickedAsText()&&(c=e.doc.createElement("div"),c.textContent=o,e.fireTransformation(e.pasteTr,{node:n.node,to_paste:c,e:t}))}),!1}}else c=this.doc.createElement("div"),c.textContent=o;return this.fireTransformation(this.pasteTr,{node:n.node,to_paste:c,e:t}),!1},t.prototype.keydownHandler=function(t){void 0!==this.caretManager.getNormalizedCaret()&&this.$guiRoot.trigger("wed-input-trigger-keydown",[t]),t.isImmediatePropagationStopped()||t.isPropagationStopped()||this.$guiRoot.trigger("wed-global-keydown",[t])},t.prototype.pushGlobalKeydownHandler=function(t){this.globalKeydownHandlers.push(t)},t.prototype.popGlobalKeydownHandler=function(t){if(this.globalKeydownHandlers.pop()!==t)throw new Error("did not pop the expected handler")},t.prototype.globalKeydownHandler=function(t,e){function n(){return e.stopPropagation(),e.preventDefault(),!1}var i;if(17===e.which||16===e.which||18===e.which||0===e.which)return!0;if(this.minibuffer.enabled)return!0;for(var o=0,a=this.globalKeydownHandlers;o<a.length;o++){if(!1===(0,a[o])(t,e))return n()}if(112===e.which)return this.modals.getModal("help").modal(),n();if(this.developmentMode){if(113===e.which)return this.caretManager.dumpCaretInfo(),n();if(114===e.which)return this.dumpUndo(),n();if(115===e.which)return console.log("manual focus"),console.log("document.activeElement before",document.activeElement),console.log('document.querySelector(":focus") before',document.querySelector(":focus")),this.caretManager.focusInputField(),console.log("document.activeElement after",document.activeElement),console.log('document.querySelector(":focus") after',document.querySelector(":focus")),n()}var s=this.caretManager.caret;if(e.which>=33&&e.which<=40){var u=void 0;return I.RIGHT_ARROW.matchesEvent(e)?u="right":I.LEFT_ARROW.matchesEvent(e)?u="left":I.DOWN_ARROW.matchesEvent(e)?u="down":I.UP_ARROW.matchesEvent(e)&&(u="up"),void 0===u||(this.caretManager.move(u,e.shiftKey),n())}if(I.ESCAPE.matchesEvent(e))return!this.closeAllTooltips()||n();if(I.SAVE.matchesEvent(e))return this.save(),n();if(I.UNDO.matchesEvent(e))return this.undo(),n();if(I.REDO.matchesEvent(e))return this.redo(),n();if(I.COPY.matchesEvent(e)||I.CUT.matchesEvent(e)||I.PASTE.matchesEvent(e))return!0;if(I.DEVELOPMENT.matchesEvent(e))return this.developmentMode=!this.developmentMode,A.notify(this.developmentMode?"Development mode on.":"Development mode off."),this.developmentMode&&B.showPopup(),n();if(I.LOWER_LABEL_VISIBILITY.matchesEvent(e))return this.decreaseLabelVisibilityLevelAction.terminalEventHandler(e);if(I.INCREASE_LABEL_VISIBILITY.matchesEvent(e))return this.increaseLabelVisibilityLevelAction.terminalEventHandler(e);if(I.CONTEXTUAL_MENU.matchesEvent(e)){if(void 0!==s){var c=s.node,l=g.closestByClass(c,"_gui",s.root);if(null!==l&&l.classList.contains("_label_clicked"))return y.isText(c)&&(c=c.parentNode),r.default(c).trigger("wed-context-menu",[e]),n()}if(!1===this.editingMenuManager.contextMenuHandler(e))return n()}else{if(I.REPLACEMENT_MENU.matchesEvent(e))return this.editingMenuManager.setupReplacementMenu(),n();if(I.QUICKSEARCH_FORWARD.matchesEvent(e))return void 0!==this.caretManager.caret&&new j.QuickSearch(this,this.scroller,j.Direction.FORWARD),n();if(I.QUICKSEARCH_BACKWARDS.matchesEvent(e))return void 0!==this.caretManager.caret&&new j.QuickSearch(this,this.scroller,j.Direction.BACKWARDS),n();if(I.SEARCH_FORWARD.matchesEvent(e))return void 0!==this.caretManager.caret&&new E.DialogSearchReplace(this,this.scroller,j.Direction.FORWARD),n();if(I.SEARCH_BACKWARDS.matchesEvent(e))return void 0!==this.caretManager.caret&&new E.DialogSearchReplace(this,this.scroller,j.Direction.BACKWARDS),n()}if(void 0===s)return!0;var d=g.closestByClass(s.node,"_placeholder",s.root);if(null!==d){if(i=this.caretManager.getDataCaret(),!Q.anySpecialKeyHeld(e)){var f=!1;if(d.parentNode.classList.contains("_attribute_value")?f=!0:this.validator.possibleAt(i).forEach(function(t){"text"===t.params[0]&&(f=!0)}),!f)return n()}if(I.BACKSPACE.matchesEvent(e)||I.DELETE.matchesEvent(e))return n()}var h=g.closestByClass(s.node,"_attribute_value",s.root),p=this.guiRoot.querySelector(".__start_label._label_clicked, .__end_label._label_clicked");if(null===h&&null!==p&&I.DELETE.matchesEvent(e)){var v=g.closestByClass(p,"_real",this.guiRoot),m=this.dataUpdater.pathToNode(this.nodeToPath(v));return this.modeTree.getMode(v).getContextualActions("delete-parent",m.tagName,m,0)[0].execute({node:m,name:m.tagName}),n()}if(y.isElement(s.node)&&(s.node.classList.contains("_phantom")||s.node.classList.contains("_phantom_wrap")))return n();var _,w,x;if(I.SPACE.matchesEvent(e))return void 0===(i=this.caretManager.getNormalizedCaret())?n():(null===h&&null!==g.closestByClass(i.node,"_phantom",i.root)||this.handleKeyInsertingText(e),n());if(I.DELETE.matchesEvent(e)){if(null!==h){if(""===h.textContent)return n();this.spliceAttribute(h,this.caretManager.getNormalizedCaret().offset,1,"")}else{var T=b.nextCaretPosition(s.toArray(),this.guiRoot,!0)[0];if(!y.isElement(T)||!T.classList.contains("_phantom")&&!T.classList.contains("_phantom_wrap")){if(this.cutSelection())return this.validationController.refreshErrors(),n();i=this.caretManager.getDataCaret(),y.isText(i.node)||(i=i.make(i.node.childNodes[i.offset],0)),y.isText(i.node)&&(w=i.node.parentNode,x=g.indexOf(w.childNodes,i.node),_=this.initiateTextUndo(),this.dataUpdater.deleteText(i,1),null!==i.node.parentNode?this.caretManager.setCaret(i,{textEdit:!0}):this.caretManager.setCaret(w,x,{textEdit:!0}),_.recordCaretAfter())}}return this.validationController.refreshErrors(),n()}if(I.BACKSPACE.matchesEvent(e)){if(null!==h){if(""===h.textContent)return n();this.spliceAttribute(h,this.caretManager.getNormalizedCaret().offset-1,1,"")}else{var C=b.prevCaretPosition(s.toArray(),this.guiRoot,!0)[0];if(!y.isElement(C)||!C.classList.contains("_phantom")&&!C.classList.contains("_phantom_wrap")){if(this.cutSelection())return this.validationController.refreshErrors(),n();if(i=this.caretManager.getDataCaret(),!y.isText(i.node)){var N=i.node.childNodes[i.offset-1],O=N.length;i=i.make(N,O)}if(y.isText(i.node)){if(w=i.node.parentNode,x=g.indexOf(w.childNodes,i.node),0===i.offset)return n();_=this.initiateTextUndo(),this.dataUpdater.deleteText(i.node,i.offset-1,1),null!==i.node.parentNode?this.caretManager.setCaret(i.node,i.offset-1,{textEdit:!0}):this.caretManager.setCaret(w,x,{textEdit:!0}),_.recordCaretAfter()}}}return this.validationController.refreshErrors(),n()}return!0},t.prototype.keypressHandler=function(t){return!!ot.matchesEvent(t)||(this.$guiRoot.trigger("wed-input-trigger-keypress",[t]),!(!t.isImmediatePropagationStopped()&&!t.isPropagationStopped())||void this.$guiRoot.trigger("wed-global-keypress",[t]))},t.prototype.type=function(t,e){void 0===e&&(e=it.DEFAULT),t instanceof P.Key&&(t=[t]);for(var n=0,i=t;n<i.length;n++){var o=i[n];"string"==typeof o&&(o=" "===o?I.SPACE:P.makeKey(o));var a=new r.default.Event("keydown");switch(o.setEventToMatch(a),e){case it.MINIBUFFER:this.minibuffer.forwardEvent(a);break;case it.DEFAULT:this.$inputField.trigger(a);break;default:var s=e;throw new Error("unhandled target: "+s)}}},t.prototype.globalKeypressHandler=function(t,e){function n(){return e.preventDefault(),e.stopPropagation(),!1}return void 0===this.caretManager.caret||(0===e.which||(8===e.which?n():!!(e.ctrlKey||e.altKey||e.metaKey)||(this.cutSelection(),this.handleKeyInsertingText(e),n())))},t.prototype.cutSelection=function(){var t=this.caretManager.sel;if(void 0!==t&&!t.collapsed){if(!t.wellFormed)return!0;var e=this.initiateTextUndo(),n=t.mustAsDataCarets(),r=n[0],i=n[1],o=this.dataUpdater.cut(r,i)[0];return this.caretManager.setCaret(o,{textEdit:!0}),e.recordCaretAfter(),!0}return!1},t.prototype.handleKeyInsertingText=function(t){var e=String.fromCharCode(t.which);if(""===e)return!1;this.insertText(e),t.preventDefault(),t.stopPropagation()},t.prototype.compositionHandler=function(t){if("compositionstart"===t.type)this.composing=!0,this.compositionData={data:t.originalEvent.data,startCaret:this.caretManager.caret},this.inputField.style.zIndex="10",this.caretManager.mark.refresh();else if("compositionupdate"===t.type)this.compositionData.data=t.originalEvent.data;else{if("compositionend"!==t.type)throw new Error("unexpected event type: "+t.type);this.composing=!1,this.inputField.style.zIndex="",this.inputField.style.top="",this.inputField.style.left=""}},t.prototype.inputHandler=function(){this.composing||""!==this.$inputField.val()&&(this.insertText(this.$inputField.val()),this.$inputField.val(""),this.caretManager.focusInputField())},t.prototype.mousemoveHandler=function(t){var e=this,n=this.doc.elementFromPoint(t.clientX,t.clientY);if(this.guiRoot.contains(n)){var r,i=function(t){var n=t.classList;return n.contains("_real")||n.contains("_attribute_value")&&"edit"===e.modeTree.getAttributeHandling(t)};if(i(n)){if(void 0===(r=this.pointToCharBoundary(t.clientX,t.clientY)))return}else{for(var o=n;!i(n);)if(o=n,n=o.parentNode,!this.guiRoot.contains(n))return;var a=g.indexOf(n.childNodes,o),s=this.doc.createRange();s.setStart(n,a),s.setEnd(n,a+1);var u=s.getBoundingClientRect();Math.abs(u.left-t.clientX)>=Math.abs(u.right-t.clientX)&&a++,r=this.caretManager.makeCaret(n,a)}this.caretManager.setRange(this.caretManager.anchor,r)}},t.prototype.mousedownHandler=function(t){if(!this.scroller.isPointInside(t.pageX,t.pageY))return!1;var e=this.pointToCharBoundary(t.clientX,t.clientY);if(void 0===e)return!0;this.$guiRoot.one("mouseup",this.mouseupHandler.bind(this)),this.errorLayer.unselectAll(),this.$errorList.find(".selected").removeClass("selected");var n=this.guiRoot,r=t.target,i=g.closestByClass(r,"_placeholder",n),o=g.closestByClass(r,"_label",n),a=this.caretManager;switch(t.which){case 1:if(null!==g.closest(r,"._gui, ._phantom",n)&&null===g.closestByClass(r,"_attribute_value",n)||this.$guiRoot.on("mousemove.wed",this.mousemoveHandler.bind(this)),null!==i?a.setCaret(i,0):null!==o?a.setCaretToLabelPosition(r,o,e):a.setCaret(e),t.target.classList.contains("wed-validation-error"))return!0;break;case 3:var s=this.caretManager.range;(void 0===s||s.collapsed)&&(null!==i?a.setCaret(i,0):null!==o?a.setCaretToLabelPosition(r,o,e):a.setCaret(e))}return!1},t.prototype.mouseupHandler=function(t){if(!this.scroller.isPointInside(t.pageX,t.pageY))return!1;var e=this.pointToCharBoundary(t.clientX,t.clientY);if(void 0===e)return!0;"contextmenu"===t.type&&(t.which=3);var n=this.guiRoot,i=t.target,o=g.closestByClass(i,"_placeholder",n),a=g.closestByClass(i,"_label",n),s=this.caretManager;switch(t.which){case 3:null!==o&&s.setCaret(i,0),null!==a?(s.setCaretToLabelPosition(i,a,e),r.default(i).trigger("wed-context-menu",[t])):(void 0===s.caret&&s.setCaret(e),null!==g.closest(i,"*[data-wed--custom-context-menu]",n)?r.default(i).trigger("wed-context-menu",[t]):this.editingMenuManager.contextMenuHandler(t))}return this.$guiRoot.off("mousemove"),t.preventDefault(),!1},t.prototype.mouseoverHandler=function(t){var e=this,n=this.guiRoot,i=g.closestByClass(t.target,"_label",n);if(null!==i){var o=g.closestByClass(i,"_real",n),a=Q.getOriginalName(o),s={title:function(){return e.modeTree.getMode(i).shortDescriptionFor(a)},container:"body",delay:{show:1e3},placement:"auto top",trigger:"hover"};this.makeGUITreeTooltip(r.default(i),s);var u=r.default.data(i,"bs.tooltip");u.enter(u)}},t.prototype.mouseoutHandler=function(t){var e=this.guiRoot,n=g.closestByClass(t.target,"_label",e);if(null!==n)return r.default(n).tooltip("destroy"),!1},t.prototype.refreshSaveStatus=function(){if(void 0!==this.saver){var t=this.saver.getSavedWhen();if(this.$saveStatus.children("span").first().text(void 0!==t?t:""),void 0===t)this.$saveStatus.removeClass("label-success label-info").addClass("label-default");else{var e=this.saver.getLastSaveKind(),n=void 0,r=void 0;switch(e){case $.SaveKind.AUTO:n="label-info",r="The last save was an autosave.";break;case $.SaveKind.MANUAL:n="label-success",r="The last save was a manual save.";break;default:throw new Error("unexpected kind of save: "+e)}this.$saveStatus.removeClass("label-default label-info label-success").addClass(n),this.$saveStatus.tooltip("destroy"),this.$saveStatus.tooltip({title:r,container:"body",placement:"auto top",trigger:"hover"})}!1!==this.saver.getModifiedWhen()?(this.$modificationStatus.removeClass("label-success"),this.$modificationStatus.addClass("label-warning"),this.$modificationStatus.children("i").css("visibility","")):(this.$modificationStatus.removeClass("label-warning"),this.$modificationStatus.addClass("label-success"),this.$modificationStatus.children("i").css("visibility","hidden"))}},t.prototype.onValidatorStateChange=function(t){var e=t.state;e!==f.WorkingState.VALID&&e!==f.WorkingState.INVALID||this._firstValidationComplete||(this._firstValidationComplete=!0,this.firstValidationCompleteResolve(this))},t.prototype.onPossibleDueToWildcardChange=function(t){var e=et.getGUINodeIfExists(this,t);if(y.isText(e)&&(e=g.closestByClass(e,"_attribute",this.guiRoot)),null!=e){this.modeTree.getDecorator(t).setReadOnly(e,this.validator.getNodeProperty(t,"PossibleDueToWildcard"))}},t.prototype.expandErrorPanelWhenNoNavigation=function(){"none"===this.$navigationPanel[0].style.display&&this.$errorList.parents(".panel-collapse").collapse("show")},t.prototype.errorItemHandler=function(t){var e=t.data,n=document.querySelector(t.target.getAttribute("href"));this.errorLayer.select(n);var i=r.default(t.target.parentNode);return i.siblings().removeClass("selected"),i.addClass("selected"),this.caretManager.setCaret(e.ev.node,e.ev.index),!1},t.prototype.setNavigationList=function(t){this.$navigationList.empty(),this.$navigationList.append(t),this.$navigationPanel.css("display","")},t.prototype.makeModal=function(t){var e=this,n=new k.Modal(t),r=n.getTopLevel();return r.on("show.bs.modal.modal",function(){e.caretManager.pushSelection()}),r.on("hidden.bs.modal.modal",function(){e.caretManager.popSelection()}),this.$widget.prepend(r),n},t.prototype.makeGUITreeTooltip=function(t,e){var n=this,r=e.title;void 0!==r&&(e=a({},e),e.title=function(){if(!n.destroyed&&n.preferences.get("tooltips"))return"function"==typeof r?r():r}),D.tooltip(t,e)},t.prototype.resetLabelVisibilityLevel=function(){this.setLabelVisibilityLevel(this.initialLabelLevel)},t.prototype.setLabelVisibilityLevel=function(t){if(!(t<0||t>this.maxLabelLevel)){for(;this.currentLabelLevel>t;)this.decreaseLabelVisiblityLevel();for(;this.currentLabelLevel<t;)this.increaseLabelVisibilityLevel()}},t.prototype.increaseLabelVisibilityLevel=function(){if(!(this.currentLabelLevel>=this.maxLabelLevel)){this.currentLabelLevel++;for(var t=this.guiRoot.getElementsByClassName("_label_level_"+this.currentLabelLevel),e=0,n=t.length;e<n;e++)t[e].classList.remove("_invisible");this.validationController.recreateErrors(),this.caretManager.mark.refresh()}},t.prototype.decreaseLabelVisiblityLevel=function(){if(0!==this.currentLabelLevel){var t=this.currentLabelLevel;this.currentLabelLevel--;for(var e=this.guiRoot.getElementsByClassName("_label_level_"+t),n=0,r=e.length;n<r;n++)e[n].classList.add("_invisible");this.validationController.recreateErrors(),this.caretManager.mark.refresh()}},t.prototype.toggleAttributeHiding=function(){this.guiRoot.classList.toggle("inhibit_attribute_hiding")},t.prototype.closeAllTooltips=function(){for(var t=this.doc.querySelectorAll("div.tooltip"),e=!1,n=0;n<t.length;++n){var i=r.default.data(t[n],"wed-tooltip-for"),o=r.default(i).data("bs.tooltip");null!=o&&(o.leave(o),e=!0)}return e},t.prototype.excludeFromBlur=function(t){this.$excludedFromBlur.add(t)},t.prototype.findLocationAt=function(t,e){var n=this.doc.elementFromPoint(t,e);if(null!==n&&this.guiRoot.contains(n))return this.findLocationInElementAt(n,t,e)},t.prototype.findLocationInElementAt=function(t,e,n,r){function i(t,r){var i;y.isText(t)?(a.setStart(t,r),a.setEnd(t,r+1),i=a.getClientRects()):i=t.childNodes[r].getClientRects();for(var s=0;s<i.length;++s){var u=i[s];if(0!==u.height&&0!==u.width){var c=Q.distsFromRect(e,n,u.left,u.top,u.right,u.bottom);if(void 0===o||o.dist.y>c.y||o.dist.y===c.y&&o.dist.x>c.x)return o={dist:c,node:t,start:r},0===c.y&&0===c.x}}return!1}void 0===r&&(r=!0);var o,a=this.doc.createRange(),s=t.firstChild,u=0;t:for(;null!==s;){if(r&&y.isText(s)){for(var c=0;c<s.length;++c)if(i(s,c))break t}else if(i(t,u))break;s=s.nextSibling,u++}return void 0===o?this.caretManager.makeCaret(t,0):this.caretManager.makeCaret(o.node,o.start)},t.prototype.pointToCharBoundary=function(t,e){var n=this.findLocationAt(t,e);if(void 0!==n){var r=n.node,i=n.offset,o=r.nodeType;if(y.isElement(r)&&i<r.childNodes.length||y.isText(r)&&i<r.length){var a=this.doc.createRange();a.setStart(r,i),a.setEnd(r,i+1);var s=a.getBoundingClientRect();switch(o){case Node.TEXT_NODE:var u=this.caretManager.newPosition(n,"right"),c=this.caretManager.newPosition(n.make(r,i+1),"left");void 0!==u&&void 0===c?n=u:void 0!==c&&void 0===u?n=c:void 0!==u&&void 0!==c&&(n=Math.abs(et.boundaryXY(u).left-t)>=Math.abs(et.boundaryXY(c).left-t)?c:u);break;case Node.ELEMENT_NODE:var l,d=r.childNodes[i];if(y.isElement(d)){var f=this.findLocationInElementAt(d,t,e),h=y.isElement(f.node)?f.node.childNodes.length-1:-1;switch(f.offset){case 0:l=!0;break;case h:l=!1}}void 0===l&&(l=Math.abs(s.left-t)<Math.abs(s.right-t)),l||(n=n.make(r,i+1));break;default:throw new Error("unexpected node type: "+o)}}}return n},t.prototype.caretChange=function(t){var e=t.options,n=t.caret,r=t.prevCaret,i=t.mode,o=t.prevMode,a=t.manager;if(void 0!==n){var s=!0===e.textEdit,u=!0===e.gainingFocus;for(u||this.editingMenuManager.setupCompletionMenu(),s||this.terminateTextUndo();void 0!==this.caretOwners[0];)this.caretOwners[0].classList.remove("_owns_caret");for(;void 0!==this.clickedLabels[0];)this.clickedLabels[0].classList.remove("_label_clicked");for(var c;void 0!==this.withCaret[0];)c=this.withCaret[0],c.classList.remove("_with_caret");if(void 0!==r){var l=g.closest(r.node,"._placeholder._transient",r.root);null!==l&&n.root.contains(l)&&this.guiUpdater.removeNode(l)}var d=y.isElement(n.node)?n.node:n.node.parentNode,f=n.root;if(this.guiRoot.contains(d)){i!==o&&this.toolbar.setModeButtons(void 0!==i?i.getToolbarButtons():[]);var h=g.closestByClass(d,"_real",f);null!==h&&h.classList.add("_owns_caret");var p,v=g.closestByClass(d,"_gui",f);if(null!==v){if(void 0===a.anchor||g.closestByClass(a.anchor.node,"_gui",f)===v){for(var m=0,_=b.childrenByClass(v.parentNode,"_gui");m<_.length;m++){var w=_[m];w.classList.add("_label_clicked")}v.classList.add("_with_caret"),p=v}}else d.classList.add("_owns_caret");c!==p&&(void 0!==p&&0!==p.getElementsByClassName("_shown_when_caret_in_label").length||void 0!==c&&0!==c.getElementsByClassName("_shown_when_caret_in_label").length)&&this.validationController.recreateErrors(),u||a.mark.scrollIntoView(),this.caretManager.mark.refresh(),this.setLocationTo(d)}}},t.prototype.setLocationTo=function(t){for(var e=[];t!==this.guiRoot;){if(t.nodeType!==Node.ELEMENT_NODE)throw new Error("unexpected node type: "+t.nodeType);t.classList.contains("_placeholder")||null!==g.closestByClass(t,"_phantom",this.guiRoot)||e.unshift("<span class='_gui _label'><span>&nbsp;"+Q.getOriginalName(t)+"&nbsp;</span></span>"),t=t.parentNode}this.wedLocationBar.getElementsByTagName("span")[0].innerHTML=0!==e.length?e.join("/"):"<span>&nbsp;</span>"},t.prototype.cut=function(){var t=this.caretManager,e=t.sel;if(void 0===e)throw new Error("no selection");if(!e.wellFormed)throw new Error("malformed range");for(var n=e.mustAsDataCarets(),r=n[0],i=n[1],o=this.cutBuffer;null!==o.firstChild;)o.removeChild(o.firstChild);if(y.isAttr(r.node)){var a=r.node;if(a!==i.node)throw new Error("attribute selection that does not start and end in the same attribute");var s=a.value.slice(r.offset,i.offset);this.spliceAttribute(g.closestByClass(t.mustFromDataLocation(r).node,"_attribute_value"),r.offset,i.offset-r.offset,""),o.textContent=s}else{for(var u=this.dataUpdater.cut(r,i),c=u[1],l=new this.window.DOMParser,d=l.parseFromString("<div></div>","text/xml"),f=0,h=c;f<h.length;f++){var p=h[f];d.firstChild.appendChild(d.adoptNode(p))}o.textContent=d.firstChild.innerHTML,t.setCaret(u[0])}var v=this.doc.createRange(),m=o;v.setStart(m,0),v.setEnd(m,m.childNodes.length);var b=this.window.getSelection();b.removeAllRanges(),b.addRange(v),setTimeout(function(){t.focusInputField()},0)},t.prototype.paste=function(t,e){var n=e.to_paste,r=n.cloneNode(!0),i=this.caretManager.getDataCaret();if(void 0===i)throw new Error("trying to paste without a caret");var o;if(1===n.childNodes.length&&y.isText(n.firstChild))if(y.isAttr(i.node)){var a=this.caretManager.mustGetNormalizedCaret();this.spliceAttribute(g.closestByClass(a.node,"_attribute_value",a.node),a.offset,0,n.firstChild.data)}else o=this.dataUpdater.insertText(i,n.firstChild.data).caret;else{for(var s=document.createDocumentFragment();null!==n.firstChild;)s.appendChild(n.firstChild);switch(i.node.nodeType){case Node.TEXT_NODE:o=this.dataUpdater.insertIntoText(i,s)[1];break;case Node.ELEMENT_NODE:var u=i.node.childNodes[i.offset],c=null!=u?u.nextSibling:null;this.dataUpdater.insertBefore(i.node,s,u),o=i.makeWithOffset(null!==c?g.indexOf(i.node.childNodes,c):i.node.childNodes.length);break;default:throw new Error("unexpected node type: "+i.node.nodeType)}}null!=o&&(this.caretManager.setCaret(o),i=o),this.$guiRoot.trigger("wed-post-paste",[e.e,i,r])},t.prototype.replaceRange=function(t,e){var n,r=t.caretManager,i=e.range,o=e.newText,a=e.caretAtEnd,s=i.start,u=i.end,c=r.toDataLocation(s),l=r.toDataLocation(u);if(y.isAttr(c.node)){var d=c.node,f=d.value;f=f.slice(0,c.offset)+o+f.slice(l.offset),t.dataUpdater.setAttributeNS(d.ownerElement,null===d.namespaceURI?"":d.namespaceURI,d.name,f),n=a?c.makeWithOffset(c.offset+o.length):c}else{var h=t.dataUpdater.cut(c,l)[0];n=t.dataUpdater.insertText(h,o,a).caret}r.setCaret(n,{textEdit:!0})},t}();e.Editor=ut}.apply(e,r))&&(t.exports=i)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(40),i=n(54),o={closed:!0,next:function(t){},error:function(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete:function(){}}},function(t,e,n){"use strict";function r(t){return null!=t&&"object"==typeof t}e.a=r},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t){function e(n){var r=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return r.errors=n,r.name="UnsubscriptionError",Object.setPrototypeOf(r,e.prototype),r}return r.a(e,t),e}(Error)},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return d});var r=n(0),i=n(9),o=n(2),a=n(1),s=n(8),u=n(57),c=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.a(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed?(this._connection=null,t=s.a.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return Object(u.a)()(this)},e}(o.a),l=c.prototype,d={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}},f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return r.a(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(i.b);a.a},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(8),o=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return r.a(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(i.a)},function(t,e,n){"use strict";function r(t,e,n,r){return function(i){return i.lift(new c(t,e,n,r))}}e.b=r,n.d(e,"a",function(){return f});var i=n(0),o=n(1),a=n(8),s=n(2),u=n(9),c=function(){function t(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),l=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.keySelector=n,a.elementSelector=r,a.durationSelector=i,a.subjectSelector=o,a.groups=null,a.attemptedToUnsubscribe=!1,a.count=0,a}return i.a(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(t){this.error(t)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new u.a,n.set(e,i);var o=new f(e,i,this);if(this.destination.next(o),this.durationSelector){var a=void 0;try{a=this.durationSelector(new f(e,i))}catch(t){return void this.error(t)}this.add(a.subscribe(new d(e,i,this)))}}i.closed||i.next(r)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(o.a),d=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i.key=e,i.group=n,i.parent=r,i}return i.a(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this,e=t.parent,n=t.key;this.key=this.parent=null,e&&e.removeGroup(n)},e}(o.a),f=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return i.a(e,t),e.prototype._subscribe=function(t){var e=new a.a,n=this,r=n.refCountSubscription,i=n.groupSubject;return r&&!r.closed&&e.add(new h(r)),e.add(i.subscribe(t)),e},e}(s.a),h=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return i.a(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(a.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(9),o=n(42),a=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return r.a(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.a;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(131),i=n(133),o=new i.a(r.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}()},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=0),function(n){return n.lift(new s(t,e))}}e.b=r,n.d(e,"a",function(){return u});var i=n(0),o=n(1),a=n(43),s=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.scheduler,this.delay))},t}(),u=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return i.a(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new c(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(a.a.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(a.a.createError(t))},e.prototype._complete=function(){this.scheduleMessage(a.a.createComplete())},e}(o.a),c=function(){function t(t,e){this.notification=t,this.destination=e}return t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(134),i=n(136),o=new i.a(r.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t){function e(){var n=t.call(this,"Timeout has occurred")||this;return n.name="TimeoutError",Object.setPrototypeOf(n,e.prototype),n}return r.a(e,t),e}(Error)},function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n(2),i=n(89),o=n(93),a=n(94),s=n(95),u=n(96),c=n(97),l=n(80),d=n(33),f=n(24),h=function(t){if(t instanceof r.a)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(Object(u.a)(t))return Object(i.a)(t);if(Object(c.a)(t))return Object(o.a)(t);if(t&&"function"==typeof t[d.a])return Object(a.a)(t);if(t&&"function"==typeof t[f.a])return Object(s.a)(t);var e=Object(l.a)(t)?"an invalid object":"'"+t+"'",n="You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(54),i=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,r.a),e}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(33),i=function(t){return function(e){for(var n=t[r.a]();;){var i=n.next();if(i.done){e.complete();break}if(e.next(i.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(24),i=function(t){return function(e){var n=t[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}},function(t,e,n){"use strict";function r(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}e.a=r},function(t,e,n){"use strict";function r(){return Object(i.a)(1)}e.a=r;var i=n(63)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,u=t[t.length-1];return Object(o.a)(u)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof u&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof i.a?t[0]:Object(a.a)(n)(Object(s.a)(t,r))}e.a=r;var i=n(2),o=n(15),a=n(63),s=n(21)},function(t,e,n){"use strict";function r(){return a}n.d(e,"a",function(){return a}),e.b=r;var i=n(2),o=n(41),a=new i.a(o.a)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!Object(o.a)(t[0]))return t[0];t=t[0]}return Object(a.a)(t,void 0).lift(new c)}e.a=r;var i=n(0),o=n(10),a=n(21),s=n(3),u=n(4),c=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new l(t))},t}(),l=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i.a(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=Object(u.a)(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var a=this.subscriptions[o];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)},e}(s.a)},function(t,e,n){"use strict";function r(t,e,n){void 0===t&&(t=0);var r=-1;return Object(s.a)(e)?r=Number(e)<1&&1||Number(e):Object(u.a)(e)&&(n=e),Object(u.a)(n)||(n=a.a),new o.a(function(e){var o=Object(s.a)(t)?t:+t-n.now();return n.schedule(i,o,{index:0,period:r,subscriber:e})})}function i(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}e.a=r;var o=n(2),a=n(12),s=n(46),u=n(15)},function(t,e){t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(105);n.d(e,"audit",function(){return r.a});var i=n(160);n.d(e,"auditTime",function(){return i.a});var o=n(161);n.d(e,"buffer",function(){return o.a});var a=n(162);n.d(e,"bufferCount",function(){return a.a});var s=n(163);n.d(e,"bufferTime",function(){return s.a});var u=n(164);n.d(e,"bufferToggle",function(){return u.a});var c=n(165);n.d(e,"bufferWhen",function(){return c.a});var l=n(166);n.d(e,"catchError",function(){return l.a});var d=n(167);n.d(e,"combineAll",function(){return d.a});var f=n(168);n.d(e,"combineLatest",function(){return f.a});var h=n(169);n.d(e,"concat",function(){return h.a});var p=n(98);n.d(e,"concatAll",function(){return p.a});var v=n(106);n.d(e,"concatMap",function(){return v.a});var m=n(170);n.d(e,"concatMapTo",function(){return m.a});var y=n(171);n.d(e,"count",function(){return y.a});var b=n(172);n.d(e,"debounce",function(){return b.a});var g=n(173);n.d(e,"debounceTime",function(){return g.a});var _=n(35);n.d(e,"defaultIfEmpty",function(){return _.a});var w=n(174);n.d(e,"delay",function(){return w.a});var x=n(175);n.d(e,"delayWhen",function(){return x.a});var E=n(176);n.d(e,"dematerialize",function(){return E.a});var T=n(177);n.d(e,"distinct",function(){return T.a});var C=n(108);n.d(e,"distinctUntilChanged",function(){return C.a});var N=n(178);n.d(e,"distinctUntilKeyChanged",function(){return N.a});var O=n(179);n.d(e,"elementAt",function(){return O.a});var S=n(180);n.d(e,"endWith",function(){return S.a});var k=n(181);n.d(e,"every",function(){return k.a});var A=n(182);n.d(e,"exhaust",function(){return A.a});var j=n(183);n.d(e,"exhaustMap",function(){return j.a});var M=n(184);n.d(e,"expand",function(){return M.a});var R=n(36);n.d(e,"filter",function(){return R.a});var D=n(185);n.d(e,"finalize",function(){return D.a});var L=n(110);n.d(e,"find",function(){return L.b});var P=n(186);n.d(e,"findIndex",function(){return P.a});var I=n(187);n.d(e,"first",function(){return I.a});var B=n(84);n.d(e,"groupBy",function(){return B.b});var H=n(188);n.d(e,"ignoreElements",function(){return H.a});var U=n(189);n.d(e,"isEmpty",function(){return U.a});var F=n(190);n.d(e,"last",function(){return F.a});var V=n(16);n.d(e,"map",function(){return V.a});var W=n(191);n.d(e,"mapTo",function(){return W.a});var K=n(192);n.d(e,"materialize",function(){return K.a});var $=n(193);n.d(e,"max",function(){return $.a});var z=n(194);n.d(e,"merge",function(){return z.a});var G=n(63);n.d(e,"mergeAll",function(){return G.a});var q=n(34);n.d(e,"mergeMap",function(){return q.a}),n.d(e,"flatMap",function(){return q.a});var Y=n(195);n.d(e,"mergeMapTo",function(){return Y.a});var X=n(196);n.d(e,"mergeScan",function(){return X.a});var Z=n(197);n.d(e,"min",function(){return Z.a});var Q=n(26);n.d(e,"multicast",function(){return Q.a});var J=n(88);n.d(e,"observeOn",function(){return J.b});var tt=n(198);n.d(e,"onErrorResumeNext",function(){return tt.a});var et=n(199);n.d(e,"pairwise",function(){return et.a});var nt=n(200);n.d(e,"partition",function(){return nt.a});var rt=n(202);n.d(e,"pluck",function(){return rt.a});var it=n(203);n.d(e,"publish",function(){return it.a});var ot=n(204);n.d(e,"publishBehavior",function(){return ot.a});var at=n(205);n.d(e,"publishLast",function(){return at.a});var st=n(206);n.d(e,"publishReplay",function(){return st.a});var ut=n(207);n.d(e,"race",function(){return ut.a});var ct=n(48);n.d(e,"reduce",function(){return ct.a});var lt=n(208);n.d(e,"repeat",function(){return lt.a});var dt=n(209);n.d(e,"repeatWhen",function(){return dt.a});var ft=n(210);n.d(e,"retry",function(){return ft.a});var ht=n(211);n.d(e,"retryWhen",function(){return ht.a});var pt=n(57);n.d(e,"refCount",function(){return pt.a});var vt=n(212);n.d(e,"sample",function(){return vt.a});var mt=n(213);n.d(e,"sampleTime",function(){return mt.a});var yt=n(68);n.d(e,"scan",function(){return yt.a});var bt=n(214);n.d(e,"sequenceEqual",function(){return bt.a});var gt=n(215);n.d(e,"share",function(){return gt.a});var _t=n(216);n.d(e,"shareReplay",function(){return _t.a});var wt=n(217);n.d(e,"single",function(){return wt.a});var xt=n(218);n.d(e,"skip",function(){return xt.a});var Et=n(219);n.d(e,"skipLast",function(){return Et.a});var Tt=n(220);n.d(e,"skipUntil",function(){return Tt.a});var Ct=n(221);n.d(e,"skipWhile",function(){return Ct.a});var Nt=n(222);n.d(e,"startWith",function(){return Nt.a});var Ot=n(223);n.d(e,"subscribeOn",function(){return Ot.a});var St=n(225);n.d(e,"switchAll",function(){return St.a});var kt=n(69);n.d(e,"switchMap",function(){return kt.a});var At=n(226);n.d(e,"switchMapTo",function(){return At.a});var jt=n(66);n.d(e,"take",function(){return jt.a});var Mt=n(67);n.d(e,"takeLast",function(){return Mt.a});var Rt=n(227);n.d(e,"takeUntil",function(){return Rt.a});var Dt=n(228);n.d(e,"takeWhile",function(){return Dt.a});var Lt=n(109);n.d(e,"tap",function(){return Lt.a});var Pt=n(111);n.d(e,"throttle",function(){return Pt.b});var It=n(229);n.d(e,"throttleTime",function(){return It.a});var Bt=n(47);n.d(e,"throwIfEmpty",function(){return Bt.a});var Ht=n(230);n.d(e,"timeInterval",function(){return Ht.a});var Ut=n(231);n.d(e,"timeout",function(){return Ut.a});var Ft=n(112);n.d(e,"timeoutWith",function(){return Ft.a});var Vt=n(232);n.d(e,"timestamp",function(){return Vt.a});var Wt=n(233);n.d(e,"toArray",function(){return Wt.a});var Kt=n(234);n.d(e,"window",function(){return Kt.a});var $t=n(235);n.d(e,"windowCount",function(){return $t.a});var zt=n(236);n.d(e,"windowTime",function(){return zt.a});var Gt=n(237);n.d(e,"windowToggle",function(){return Gt.a});var qt=n(238);n.d(e,"windowWhen",function(){return qt.a});var Yt=n(239);n.d(e,"withLatestFrom",function(){return Yt.a});var Xt=n(240);n.d(e,"zip",function(){return Xt.a});var Zt=n(241);n.d(e,"zipAll",function(){return Zt.a})},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new c(t))}}e.a=r;var i=n(0),o=n(18),a=n(14),s=n(3),u=n(4),c=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.durationSelector))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r}return i.a(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=Object(o.a)(this.durationSelector)(t);if(e===a.a)this.destination.error(a.a.e);else{var n=Object(u.a)(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this,e=t.value,n=t.hasValue,r=t.throttled;r&&(this.remove(r),this.throttled=null,r.unsubscribe()),n&&(this.value=null,this.hasValue=!1,this.destination.next(e))},e.prototype.notifyNext=function(t,e,n,r){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(s.a)},function(t,e,n){"use strict";function r(t,e){return Object(i.a)(t,e,1)}e.a=r;var i=n(34)},function(t,e,n){"use strict";function r(t){return t instanceof Date&&!isNaN(+t)}e.a=r},function(t,e,n){"use strict";function r(t,e){return function(n){return n.lift(new u(t,e))}}e.a=r;var i=n(0),o=n(1),a=n(18),s=n(14),u=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.compare,this.keySelector))},t}(),c=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return i.a(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=this.keySelector,n=t;if(e&&(n=Object(a.a)(this.keySelector)(t))===s.a)return this.destination.error(s.a.e);var r=!1;if(this.hasKey){if((r=Object(a.a)(this.compare)(this.key,n))===s.a)return this.destination.error(s.a.e)}else this.hasKey=!0;!1===Boolean(r)&&(this.key=n,this.destination.next(t))},e}(o.a)},function(t,e,n){"use strict";function r(t,e,n){return function(r){return r.lift(new u(t,e,n))}}e.a=r;var i=n(0),o=n(1),a=n(41),s=n(28),u=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))},t}(),c=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o._tapNext=a.a,o._tapError=a.a,o._tapComplete=a.a,o._tapError=r||a.a,o._tapComplete=i||a.a,Object(s.a)(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||a.a,o._tapError=n.error||a.a,o._tapComplete=n.complete||a.a),o}return i.a(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(o.a)},function(t,e,n){"use strict";function r(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new a(t,n,!1,e))}}e.b=r,n.d(e,"a",function(){return a});var i=n(0),o=n(1),a=function(){function t(t,e,n,r){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=r}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}(),s=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.predicate=n,a.source=r,a.yieldIndex=i,a.thisArg=o,a.index=0,a}return i.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){var e=this,n=e.predicate,r=e.thisArg,i=this.index++;try{n.call(r||this,t,i,this.source)&&this.notifyComplete(this.yieldIndex?i:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=s),function(n){return n.lift(new u(t,e.leading,e.trailing))}}n.d(e,"a",function(){return s}),e.b=r;var i=n(0),o=n(3),a=n(4),s={leading:!0,trailing:!1},u=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.durationSelector,this.leading,this.trailing))},t}(),c=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.destination=e,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}return i.a(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this,e=t._hasValue,n=t._sendValue;e&&(this.destination.next(n),this.throttle(n)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(a.a)(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this,e=t._throttled,n=t._trailing;e&&e.unsubscribe(),this._throttled=null,n&&this.send()},e.prototype.notifyNext=function(t,e,n,r,i){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(o.a)},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=o.a),function(r){var i=Object(a.a)(t),o=i?+t-n.now():Math.abs(t);return r.lift(new c(o,i,e,n))}}e.a=r;var i=n(0),o=n(12),a=n(107),s=n(3),u=n(4),c=function(){function t(t,e,n,r){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),l=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.absoluteTimeout=n,a.waitFor=r,a.withObservable=i,a.scheduler=o,a.action=null,a.scheduleTimeout(),a}return i.a(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Object(u.a)(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(s.a)},function(t,e){t.exports=o},function(t,e,n){var r,i;r=[n,e,n(6)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=this;this.root=t,this.updater=e,this.eventHandlers={"included-element":[],"added-element":[],"excluded-element":[],"excluding-element":[],"removed-element":[],"removing-element":[],"children-changed":[],"children-changing":[],"text-changed":[],"attribute-changed":[]},this.triggerHandlers=Object.create(null),this.triggersToFire=Object.create(null),this.stopped=!0,this.updater.events.subscribe(function(t){switch(t.name){case"InsertNodeAt":n._insertNodeAtHandler(t);break;case"SetTextNodeValue":n._setTextNodeValueHandler(t);break;case"BeforeDeleteNode":n._beforeDeleteNodeHandler(t);break;case"DeleteNode":n._deleteNodeHandler(t);break;case"SetAttributeNS":n._setAttributeNSHandler(t)}})}return t.prototype.startListening=function(){this.stopped=!1},t.prototype.stopListening=function(){this.stopped=!0},t.prototype.processImmediately=function(){void 0!==this.scheduledProcessTriggers&&(this.clearPending(),this._processTriggers())},t.prototype.clearPending=function(){void 0!==this.scheduledProcessTriggers&&(window.clearTimeout(this.scheduledProcessTriggers),this.scheduledProcessTriggers=void 0)},t.prototype.addHandler=function(t,e,n){if("trigger"===t){var r=this.triggerHandlers[e];void 0===r&&(r=this.triggerHandlers[e]=[]),r.push(n)}else{var i=this.eventHandlers[t];if(void 0===i)throw new Error("invalid eventType: "+t);i.push([e,n])}},t.prototype.trigger=function(t){this.triggersToFire[t]=1},t.prototype._processTriggers=function(){for(var t=Object.keys(this.triggersToFire);t.length>0;){this.triggersToFire=Object.create(null);for(var e=this.triggerHandlers,n=0,r=t;n<r.length;n++){var i=r[n],o=e[i];if(void 0!==o)for(var a=0,s=o;a<s.length;a++){var u=s[a];this._callHandler(u)}}t=Object.keys(this.triggersToFire)}},t.prototype._callHandler=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];e.unshift(this.root),t.apply(void 0,e)},t.prototype._insertNodeAtHandler=function(t){if(!this.stopped){var e=t.parent,r=t.node,i=this._childrenCalls("children-changed",e,[r],[],r.previousSibling,r.nextSibling),o=[],a=[];n.isElement(r)&&(o=this._addRemCalls("added-element",r,e),a=this._incExcCalls("included-element",r,e));for(var s=i.concat(o,a),u=0,c=s;u<c.length;u++){var l=c[u];(d=this._callHandler).call.apply(d,[this,l.fn].concat(l.params))}this._scheduleProcessTriggers();var d}},t.prototype._beforeDeleteNodeHandler=function(t){if(!this.stopped){var e=t.node,r=e.parentNode,i=this._childrenCalls("children-changing",r,[],[e],e.previousSibling,e.nextSibling),o=[],a=[];n.isElement(e)&&(o=this._addRemCalls("removing-element",e,r),a=this._incExcCalls("excluding-element",e,r));for(var s=i.concat(o,a),u=0,c=s;u<c.length;u++){var l=c[u];(d=this._callHandler).call.apply(d,[this,l.fn].concat(l.params))}this._scheduleProcessTriggers();var d}},t.prototype._deleteNodeHandler=function(t){if(!this.stopped){var e=t.node,r=t.formerParent,i=this._childrenCalls("children-changed",r,[],[e],null,null),o=[],a=[];n.isElement(e)&&(o=this._addRemCalls("removed-element",e,r),a=this._incExcCalls("excluded-element",e,r));for(var s=i.concat(o,a),u=0,c=s;u<c.length;u++){var l=c[u];(d=this._callHandler).call.apply(d,[this,l.fn].concat(l.params))}this._scheduleProcessTriggers();var d}},t.prototype._childrenCalls=function(t,e,n,r,i,o){if(0!==n.length&&0!==r.length)throw new Error("we do not support having nodes added and removed in the same event");for(var a=this.eventHandlers[t],s=[],u=0,c=a;u<c.length;u++){var l=c[u],d=l[0],f=l[1];e.matches(d)&&s.push({fn:f,params:[n,r,i,o,e]})}return s},t.prototype._setTextNodeValueHandler=function(t){if(!this.stopped){for(var e=this.eventHandlers["text-changed"],n=t.node,r=n.parentNode,i=0,o=e;i<o.length;i++){var a=o[i],s=a[0],u=a[1];r.matches(s)&&this._callHandler(u,n,t.oldValue)}this._scheduleProcessTriggers()}},t.prototype._setAttributeNSHandler=function(t){if(!this.stopped){for(var e=t.node,n=this.eventHandlers["attribute-changed"],r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e.matches(a)&&this._callHandler(s,e,t.ns,t.attribute,t.oldValue)}this._scheduleProcessTriggers()}},t.prototype._scheduleProcessTriggers=function(){var t=this;void 0===this.scheduledProcessTriggers&&(this.scheduledProcessTriggers=window.setTimeout(function(){t.scheduledProcessTriggers=void 0,t._processTriggers()},0))},t.prototype._addRemCalls=function(t,e,n){for(var r=this.eventHandlers[t],i=[],o=e.previousSibling,a=e.nextSibling,s=0,u=r;s<u.length;s++){var c=u[s],l=c[0],d=c[1];e.matches(l)&&i.push({fn:d,params:[n,o,a,e]})}return i},t.prototype._incExcCalls=function(t,e,n){for(var r=this.eventHandlers[t],i=e.previousSibling,o=e.nextSibling,a=[],s=0,u=r;s<u.length;s++){var c=u[s],l=c[0],d=c[1];e.matches(l)&&a.push({fn:d,params:[e,n,i,o,e]});for(var f=e.querySelectorAll(l),h=0,p=Array.prototype.slice.call(f);h<p.length;h++){var v=p[h];a.push({fn:d,params:[e,n,i,o,v]})}}return a},t}();e.DOMListener=r}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(250),n(22)],void 0!==(i=function(t,e,n,r){"use strict";function i(t){var e=t.find(".modal-content")[0],r=t.find(".modal-body")[0];n.default(e).resizable({}).on("resizestart",function(){var e=t.data("bs.modal");null!=e&&(e.ignoreBackdropClick=!0)}).on("resizeend",function(){setTimeout(function(){var e=t.data("bs.modal");null!=e&&(e.ignoreBackdropClick=!1)},0)}).on("resizemove",function(t){var e=t.target,n=new u;n.updateElementRect(e,t.dx,t.dy),n.updateElementRect(r,t.dx,t.dy)})}function s(t){var e,r,i=t[0].ownerDocument.defaultView,o=t.find(".modal-header")[0],a=t.find(".modal-content")[0];n.default(o).draggable({restrict:{restriction:{left:0,top:0,right:i.innerWidth-10,bottom:i.innerHeight-10}}}).on("dragstart",function(){e=a.offsetLeft,r=a.offsetTop}).on("dragmove",function(t){a.style.left=e+t.clientX-t.clientX0+"px",a.style.top=r+t.clientY-t.clientY0+"px"})}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),r=a(r);var u=function(){function t(){this.changes=[],this.rolledback=!1}return t.prototype.updateElementRect=function(t,e,n){if(!this.rolledback){var i=t.getBoundingClientRect();r.MSIE&&(t.style.width=i.width+"px",t.style.height=i.height+"px",i=t.getBoundingClientRect());var o=i.width+e,a=i.height+n;t.style.width=o+"px",t.style.height=a+"px",this.changes.push({el:t,rect:i});var s=t.getBoundingClientRect();s.width===o&&s.height===a||this.rollback()}},t.prototype.rollback=function(){for(var t=this.changes,e=0,n=t;e<n.length;e++){var r=n[e],i=r.el,o=r.rect;i.style.width=o.width+"px",i.style.height=o.height+"px"}this.rolledback=!0},t}();e.makeResizable=i,e.makeDraggable=s}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(13),n(5),n(251)],void 0!==(i=function(t,e,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=i.Context,e.Direction=i.Direction;var o;!function(t){t[t.START=0]="START",t[t.END=1]="END"}(o||(o={}));var a=function(){function t(t,e){this.editor=t,this.scroller=e,this.lastMatch=null,this.caretManager=this.editor.caretManager;var r=this.caretManager.sel,o=void 0===r||r.collapsed?void 0:new n.DLocRange(r.anchor,r.focus),a=void 0!==o?o.start:this.caretManager.caret;if(void 0===a)throw new Error("search without a caret!");this.search=new i.Search(this.caretManager,t.guiRoot,a,o)}return Object.defineProperty(t.prototype,"current",{get:function(){return this.search.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canReplace",{get:function(){var t=this.search.current;return null!=t&&(!t.collapsed&&r.isWellFormedRange(t.mustMakeDOMRange()))},enumerable:!0,configurable:!0}),t.prototype.updatePattern=function(t,e){this.search.pattern=t,this.search.direction=e.direction,this.search.context=e.context,this.search.updateCurrent(),this.updateHighlight()},t.prototype.next=function(t){this.search.direction=t.direction,this.search.context=t.context,this.search.next(),this.updateHighlight()},t.prototype.updateHighlight=function(){this.clearHighlight();var t=this.current;if(null!=t){this.lastMatch=t,this.setCaretToMatch();var e=t.start.mustMakeDLocRange(t.end),n=e.mustMakeDOMRange();this.highlight=this.caretManager.highlightRange(e);var r=this.scroller.getBoundingClientRect(),i=n.getBoundingClientRect(),o=this.scroller.scrollLeft-r.left,a=this.scroller.scrollTop-r.top;this.scroller.scrollIntoView(i.left+o,i.top+a,i.right+o,i.bottom+a)}},t.prototype.clearHighlight=function(){void 0!==this.highlight&&(this.highlight.parentNode.removeChild(this.highlight),this.highlight=void 0)},t.prototype.setCaretToMatch=function(){if(null!==this.lastMatch){var t=this.getDirectionalEnd(this.lastMatch);this.caretManager.setCaret(t,{focus:!1})}},t.prototype.getDirectionalEnd=function(t){return this.getDirectionalEdge(t,o.END)},t.prototype.getDirectionalStart=function(t){return this.getDirectionalEdge(t,o.START)},t.prototype.getDirectionalEdge=function(t,e){var n,r=this.search.direction,a=e===o.START;switch(r){case i.Direction.FORWARD:n=a?"start":"end";break;case i.Direction.BACKWARDS:n=a?"end":"start";break;default:var s=r;throw new Error("unknown direction: "+s)}return t[n]},t.prototype.replace=function(t){if(!this.canReplace)throw new Error("tried to replace when it is not possible");var e=this.current;if(null==e)throw new Error("no current match");var n=this.getDirectionalStart(e);this.caretManager.setCaret(n,{focus:!1}),this.editor.fireTransformation(this.editor.replaceRangeTr,{range:e,newText:t,caretAtEnd:!1}),this.clearHighlight();var r=this.caretManager.caret;if(void 0===r)throw new Error("no caret after replacement!");this.search.current=r.mustMakeDLocRange()},t}();e.SearchReplace=a}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(7),n(22),n(51),n(23),n(39),n(52),n(38)],void 0!==(i=function(t,e,n,r,i,u,c,l,d){"use strict";function f(t,e){var n=null!==t.action&&t.action instanceof c.Transformation?t.action.kind:void 0,r=null!==e.action&&e.action instanceof c.Transformation?e.action.kind:void 0;if(n!==r){return v.indexOf(n)-v.indexOf(r)}var i=t.item.textContent,o=e.item.textContent;return i===o?0:i<o?-1:1}Object.defineProperty(e,"__esModule",{value:!0}),n=a(n),r=s(r),i=s(i),u=s(u),d=s(d);var h=["transform","add","delete","wrap","unwrap"],p=h.concat(void 0),v=[void 0].concat(h),m=["element","attribute"],y=m.concat(void 0),b=i.makeKey("+"),g=i.makeKey("-"),_=i.makeKey("."),w=i.makeKey(","),x=i.makeKey("?"),E=i.makeKey("<"),T=i.makeKey("@"),C=i.makeKey("!"),N=[{key:b,filter:"add",which:"kind"},{key:g,filter:"delete",which:"kind"},{key:w,filter:"wrap",which:"kind"},{key:_,filter:"unwrap",which:"kind"},{key:x,filter:void 0,which:"kind"},{key:E,filter:"element",which:"type"},{key:T,filter:"attribute",which:"type"},{key:C,filter:void 0,which:"type"}],O=function(t){function e(e,r,i,o,a){var s=t.call(this,e,r,i,[],a,!1)||this;s.filters={kind:null,type:null},s.actionTextFilter="",o.sort(f),s.actionItems=o;var u=e.createElement("li");u.className="wed-menu-filter",u.style.whiteSpace="nowrap";var c=e.createElement("div"),l=s.makeKindGroup(e),d=s.makeTypeGroup(e);n.default(u).on("click",!1),u.appendChild(c),c.appendChild(l),c.appendChild(e.createTextNode(" ")),c.appendChild(d);var h=e.createElement("input");h.className="form-control input-sm",h.setAttribute("placeholder","Filter choices by text.");var p=e.createElement("div");p.appendChild(h),u.appendChild(p);var v=n.default(h);v.on("input",s.inputChangeHandler.bind(s)),v.on("keydown",s.inputKeydownHandler.bind(s)),s.actionFilterItem=u,s.actionFilterInput=h;var m=s.$menu;return m.parent().on("hidden.bs.dropdown",function(){n.default(h).tooltip("destroy"),n.default(l).children().tooltip("destroy")}),m.on("keydown",s.actionKeydownHandler.bind(s)),m.on("keypress",s.actionKeypressHandler.bind(s)),s.display([]),h.focus(),s}return o(e,t),e.prototype.makeKindGroup=function(t){var e=t.createElement("div");e.className="btn-group btn-group-xs";for(var r=0,i=p;r<i.length;r++){var o=i[r],a=t.createElement("button");a.className="btn btn-default";var s=void 0;void 0!==o?(a.innerHTML=d.makeHTML(o),s="Show only "+o+" operations."):(a.innerHTML=d.makeHTML("other"),s="Show operations not covered by other filter buttons."),n.default(a).tooltip({title:s,container:"body",placement:"auto top",trigger:"hover"}),n.default(a).on("click",this.makeKindHandler(o)),e.appendChild(a)}return e},e.prototype.makeTypeGroup=function(t){var e=t.createElement("div");e.className="btn-group btn-group-xs";for(var r=0,i=y;r<i.length;r++){var o=i[r],a=t.createElement("button");a.className="btn btn-default";var s=void 0;void 0!==o?(a.innerHTML=d.makeHTML(o),s="Show only "+o+" operations."):(a.innerHTML=d.makeHTML("other"),s="Show operations not covered by other filter buttons."),n.default(a).tooltip({title:s,container:"body",placement:"auto top",trigger:"hover"}),n.default(a).on("click",this.makeTypeHandler(o)),e.appendChild(a)}return e},e.prototype.makeKindHandler=function(t){var e=this;return function(){e.filters.kind=t,e.render()}},e.prototype.makeTypeHandler=function(t){var e=this;return function(){e.filters.type=t,e.render()}},e.prototype.handleToggleFocus=function(){this.actionFilterInput.focus()},e.prototype.actionKeydownHandler=function(t){var e=this;return!u.ESCAPE.matchesEvent(t)||null===this.filters.kind&&null===this.filters.type&&""===this.actionTextFilter||(this.filters.kind=null,this.filters.type=null,this.actionTextFilter="",r.FIREFOX_24?setTimeout(function(){e.actionFilterInput.value="",e.render()},0):(this.actionFilterInput.value="",this.render()),t.stopPropagation(),t.preventDefault(),!1)},e.prototype.actionKeypressHandler=function(t){if(""!==this.actionTextFilter)return!0;for(var e=0,n=N;e<n.length;e++){var r=n[e];if(r.key.matchesEvent(t)){var i=r.which;if(null!==this.filters[i])continue;return this.filters[i]=r.filter,this.render(),t.stopPropagation(),t.preventDefault(),!1}}return!0},e.prototype.inputChangeHandler=function(t){var e=this.actionTextFilter,n=t.target.value;e!==n&&(this.actionTextFilter=n,this.render())},e.prototype.inputKeydownHandler=function(t){if(u.ENTER.matchesEvent(t))return this.$menu.find("li:not(.divider):visible a").first().focus().click(),t.stopPropagation(),t.preventDefault(),!1;for(var e,r=0,i=["UP_ARROW","DOWN_ARROW","ESCAPE"];r<i.length;r++){var o=i[r],a=u[o];if(a.matchesEvent(t)){e=a;break}}if(void 0!==e){var s=new n.default.Event("keydown");return e.setEventToMatch(s),!1!==this.actionKeydownHandler(s)&&this.$toggle.trigger(s),!1}return!0},e.prototype.render=function(){for(var e=this.menu,n=this.actionFilterItem,r=this.filters.kind,i=this.filters.type;null!==e.lastChild&&e.lastChild!==n;)e.removeChild(e.lastChild);for(var o=n.firstElementChild.firstElementChild.firstElementChild,a=0,s=p;a<s.length;a++){var u=s[a],c=o.classList,l=r===u?c.add:c.remove;l.call(c,"active"),o=o.nextElementSibling}o=n.firstElementChild.lastElementChild.firstElementChild;for(var d=0,f=y;d<f.length;d++){var h=f[d],c=o.classList,l=i===h?c.add:c.remove;l.call(c,"active"),o=o.nextElementSibling}null===n.parentNode&&e.appendChild(n);var v=this.computeActionItemsToDisplay(this.actionItems);t.prototype.render.call(this,v)},e.prototype.computeActionItemsToDisplay=function(t){var e,n=this.filters.kind,r=this.filters.type,i=this.actionTextFilter;switch(n){case null:e=function(){return!0};break;case void 0:e=function(t){return!(t.action instanceof c.Transformation)||-1===h.indexOf(t.action.kind)};break;default:e=function(t){return t.action instanceof c.Transformation&&t.action.kind===n}}var o;switch(r){case null:o=function(){return!0};break;case void 0:o=function(t){return!(t.action instanceof c.Transformation)||-1===m.indexOf(t.action.nodeType)};break;default:o=function(t){return t.action instanceof c.Transformation&&t.action.nodeType===r}}var a;if(""!==i)if("^"===i[0]){var s=RegExp(i);a=function(t){var e=null!==t.data&&void 0!==t.data.name?t.data.name:t.item.textContent;return s.test(e)}}else a=function(t){return-1!==(null!==t.data&&void 0!==t.data.name?t.data.name:t.item.textContent).indexOf(i)};else a=function(){return!0};for(var u=[],l=0,d=t;l<d.length;l++){var f=d[l];e(f)&&o(f)&&a(f)&&u.push(f.item)}return u},e}(l.ContextMenu);e.ActionContextMenu=O}.apply(e,r))&&(t.exports=i)},function(t,e,n){(function(t,r){var i;(function(){function o(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function a(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function s(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function u(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function c(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function l(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function d(t,e){return!!(null==t?0:t.length)&&x(t,e,0)>-1}function f(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function h(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function p(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function v(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function m(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function y(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function b(t){return t.split("")}function g(t){return t.match(Be)||[]}function _(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function w(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function x(t,e,n){return e===e?X(t,e,n):w(t,T,n)}function E(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function T(t){return t!==t}function C(t,e){var n=null==t?0:t.length;return n?A(t,e)/n:Dt}function N(t){return function(e){return null==e?rt:e[t]}}function O(t){return function(e){return null==t?rt:t[e]}}function S(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function k(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function A(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==rt&&(n=n===rt?o:n+o)}return n}function j(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function M(t,e){return h(e,function(e){return[e,t[e]]})}function R(t){return function(e){return t(e)}}function D(t,e){return h(e,function(e){return t[e]})}function L(t,e){return t.has(e)}function P(t,e){for(var n=-1,r=t.length;++n<r&&x(e,t[n],0)>-1;);return n}function I(t,e){for(var n=t.length;n--&&x(e,t[n],0)>-1;);return n}function B(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}function H(t){return"\\"+Nn[t]}function U(t,e){return null==t?rt:t[e]}function F(t){return yn.test(t)}function V(t){return bn.test(t)}function W(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function K(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function $(t,e){return function(n){return t(e(n))}}function z(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==ct||(t[n]=ct,o[i++]=n)}return o}function G(t,e){return"__proto__"==e?rt:t[e]}function q(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function X(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function Z(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}function Q(t){return F(t)?tt(t):Wn(t)}function J(t){return F(t)?et(t):b(t)}function tt(t){for(var e=vn.lastIndex=0;vn.test(t);)++e;return e}function et(t){return t.match(vn)||[]}function nt(t){return t.match(mn)||[]}var rt,it=200,ot="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",at="Expected a function",st="__lodash_hash_undefined__",ut=500,ct="__lodash_placeholder__",lt=1,dt=2,ft=4,ht=1,pt=2,vt=1,mt=2,yt=4,bt=8,gt=16,_t=32,wt=64,xt=128,Et=256,Tt=512,Ct=30,Nt="...",Ot=800,St=16,kt=1,At=2,jt=1/0,Mt=9007199254740991,Rt=1.7976931348623157e308,Dt=NaN,Lt=4294967295,Pt=Lt-1,It=Lt>>>1,Bt=[["ary",xt],["bind",vt],["bindKey",mt],["curry",bt],["curryRight",gt],["flip",Tt],["partial",_t],["partialRight",wt],["rearg",Et]],Ht="[object Arguments]",Ut="[object Array]",Ft="[object AsyncFunction]",Vt="[object Boolean]",Wt="[object Date]",Kt="[object DOMException]",$t="[object Error]",zt="[object Function]",Gt="[object GeneratorFunction]",qt="[object Map]",Yt="[object Number]",Xt="[object Null]",Zt="[object Object]",Qt="[object Proxy]",Jt="[object RegExp]",te="[object Set]",ee="[object String]",ne="[object Symbol]",re="[object Undefined]",ie="[object WeakMap]",oe="[object WeakSet]",ae="[object ArrayBuffer]",se="[object DataView]",ue="[object Float32Array]",ce="[object Float64Array]",le="[object Int8Array]",de="[object Int16Array]",fe="[object Int32Array]",he="[object Uint8Array]",pe="[object Uint8ClampedArray]",ve="[object Uint16Array]",me="[object Uint32Array]",ye=/\b__p \+= '';/g,be=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_e=/&(?:amp|lt|gt|quot|#39);/g,we=/[&<>"']/g,xe=RegExp(_e.source),Ee=RegExp(we.source),Te=/<%-([\s\S]+?)%>/g,Ce=/<%([\s\S]+?)%>/g,Ne=/<%=([\s\S]+?)%>/g,Oe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Se=/^\w*$/,ke=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ae=/[\\^$.*+?()[\]{}|]/g,je=RegExp(Ae.source),Me=/^\s+|\s+$/g,Re=/^\s+/,De=/\s+$/,Le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pe=/\{\n\/\* \[wrapped with (.+)\] \*/,Ie=/,? & /,Be=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,He=/\\(\\)?/g,Ue=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Fe=/\w*$/,Ve=/^[-+]0x[0-9a-f]+$/i,We=/^0b[01]+$/i,Ke=/^\[object .+?Constructor\]$/,$e=/^0o[0-7]+$/i,ze=/^(?:0|[1-9]\d*)$/,Ge=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,qe=/($^)/,Ye=/['\n\r\u2028\u2029\\]/g,Xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ze="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qe="["+Ze+"]",Je="["+Xe+"]",tn="[a-z\\xdf-\\xf6\\xf8-\\xff]",en="[^\\ud800-\\udfff"+Ze+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",nn="\\ud83c[\\udffb-\\udfff]",rn="(?:\\ud83c[\\udde6-\\uddff]){2}",on="[\\ud800-\\udbff][\\udc00-\\udfff]",an="[A-Z\\xc0-\\xd6\\xd8-\\xde]",sn="(?:"+tn+"|"+en+")",un="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",cn="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rn,on].join("|")+")[\\ufe0e\\ufe0f]?"+un+")*",ln="[\\ufe0e\\ufe0f]?"+un+cn,dn="(?:"+["[\\u2700-\\u27bf]",rn,on].join("|")+")"+ln,fn="(?:"+["[^\\ud800-\\udfff]"+Je+"?",Je,rn,on,"[\\ud800-\\udfff]"].join("|")+")",hn=RegExp("['’]","g"),pn=RegExp(Je,"g"),vn=RegExp(nn+"(?="+nn+")|"+fn+ln,"g"),mn=RegExp([an+"?"+tn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Qe,an,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Qe,an+sn,"$"].join("|")+")",an+"?"+sn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",an+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",dn].join("|"),"g"),yn=RegExp("[\\u200d\\ud800-\\udfff"+Xe+"\\ufe0e\\ufe0f]"),bn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,gn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_n=-1,wn={};wn[ue]=wn[ce]=wn[le]=wn[de]=wn[fe]=wn[he]=wn[pe]=wn[ve]=wn[me]=!0,wn[Ht]=wn[Ut]=wn[ae]=wn[Vt]=wn[se]=wn[Wt]=wn[$t]=wn[zt]=wn[qt]=wn[Yt]=wn[Zt]=wn[Jt]=wn[te]=wn[ee]=wn[ie]=!1;var xn={};xn[Ht]=xn[Ut]=xn[ae]=xn[se]=xn[Vt]=xn[Wt]=xn[ue]=xn[ce]=xn[le]=xn[de]=xn[fe]=xn[qt]=xn[Yt]=xn[Zt]=xn[Jt]=xn[te]=xn[ee]=xn[ne]=xn[he]=xn[pe]=xn[ve]=xn[me]=!0,xn[$t]=xn[zt]=xn[ie]=!1;var En={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Nn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},On=parseFloat,Sn=parseInt,kn="object"==typeof t&&t&&t.Object===Object&&t,An="object"==typeof self&&self&&self.Object===Object&&self,jn=kn||An||Function("return this")(),Mn="object"==typeof e&&e&&!e.nodeType&&e,Rn=Mn&&"object"==typeof r&&r&&!r.nodeType&&r,Dn=Rn&&Rn.exports===Mn,Ln=Dn&&kn.process,Pn=function(){try{var t=Rn&&Rn.require&&Rn.require("util").types;return t||Ln&&Ln.binding&&Ln.binding("util")}catch(t){}}(),In=Pn&&Pn.isArrayBuffer,Bn=Pn&&Pn.isDate,Hn=Pn&&Pn.isMap,Un=Pn&&Pn.isRegExp,Fn=Pn&&Pn.isSet,Vn=Pn&&Pn.isTypedArray,Wn=N("length"),Kn=O(En),$n=O(Tn),zn=O(Cn),Gn=function t(e){function n(t){if(eu(t)&&!hf(t)&&!(t instanceof b)){if(t instanceof i)return t;if(fl.call(t,"__wrapped__"))return Qo(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=rt}function b(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Lt,this.__views__=[]}function O(){var t=new b(this.__wrapped__);return t.__actions__=Ri(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ri(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ri(this.__views__),t}function X(){if(this.__filtered__){var t=new b(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function tt(){var t=this.__wrapped__.value(),e=this.__dir__,n=hf(t),r=e<0,i=n?t.length:0,o=Eo(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,d=l.length,f=0,h=Vl(u,this.__takeCount__);if(!n||!r&&i==u&&h==u)return mi(t,this.__actions__);var p=[];t:for(;u--&&f<h;){c+=e;for(var v=-1,m=t[c];++v<d;){var y=l[v],b=y.iteratee,g=y.type,_=b(m);if(g==At)m=_;else if(!_){if(g==kt)continue t;break t}}p[f++]=m}return p}function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Be(){this.__data__=Ql?Ql(null):{},this.size=0}function Xe(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Ze(t){var e=this.__data__;if(Ql){var n=e[t];return n===st?rt:n}return fl.call(e,t)?e[t]:rt}function Qe(t){var e=this.__data__;return Ql?e[t]!==rt:fl.call(e,t)}function Je(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ql&&e===rt?st:e,this}function tn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function en(){this.__data__=[],this.size=0}function nn(t){var e=this.__data__,n=qn(e,t);return!(n<0)&&(n==e.length-1?e.pop():Nl.call(e,n,1),--this.size,!0)}function rn(t){var e=this.__data__,n=qn(e,t);return n<0?rt:e[n][1]}function on(t){return qn(this.__data__,t)>-1}function an(t,e){var n=this.__data__,r=qn(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function sn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function un(){this.size=0,this.__data__={hash:new et,map:new(ql||tn),string:new et}}function cn(t){var e=go(this,t).delete(t);return this.size-=e?1:0,e}function ln(t){return go(this,t).get(t)}function dn(t){return go(this,t).has(t)}function fn(t,e){var n=go(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new sn;++e<n;)this.add(t[e])}function mn(t){return this.__data__.set(t,st),this}function yn(t){return this.__data__.has(t)}function bn(t){var e=this.__data__=new tn(t);this.size=e.size}function En(){this.__data__=new tn,this.size=0}function Tn(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Cn(t){return this.__data__.get(t)}function Nn(t){return this.__data__.has(t)}function kn(t,e){var n=this.__data__;if(n instanceof tn){var r=n.__data__;if(!ql||r.length<it-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new sn(r)}return n.set(t,e),this.size=n.size,this}function An(t,e){var n=hf(t),r=!n&&ff(t),i=!n&&!r&&vf(t),o=!n&&!r&&!i&&_f(t),a=n||r||i||o,s=a?j(t.length,ol):[],u=s.length;for(var c in t)!e&&!fl.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||jo(c,u))||s.push(c);return s}function Mn(t){var e=t.length;return e?t[Zr(0,e-1)]:rt}function Rn(t,e){return qo(Ri(t),tr(e,0,t.length))}function Ln(t){return qo(Ri(t))}function Pn(t,e,n){(n===rt||Fs(t[e],n))&&(n!==rt||e in t)||Qn(t,e,n)}function Wn(t,e,n){var r=t[e];fl.call(t,e)&&Fs(r,n)&&(n!==rt||e in t)||Qn(t,e,n)}function qn(t,e){for(var n=t.length;n--;)if(Fs(t[n][0],e))return n;return-1}function Yn(t,e,n,r){return ld(t,function(t,i,o){e(r,t,n(t),o)}),r}function Xn(t,e){return t&&Di(e,Pu(e),t)}function Zn(t,e){return t&&Di(e,Iu(e),t)}function Qn(t,e,n){"__proto__"==e&&Al?Al(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Jn(t,e){for(var n=-1,r=e.length,i=Qc(r),o=null==t;++n<r;)i[n]=o?rt:Ru(t,e[n]);return i}function tr(t,e,n){return t===t&&(n!==rt&&(t=t<=n?t:n),e!==rt&&(t=t>=e?t:e)),t}function er(t,e,n,r,i,o){var a,u=e&lt,c=e&dt,l=e&ft;if(n&&(a=i?n(t,r,i,o):n(t)),a!==rt)return a;if(!tu(t))return t;var d=hf(t);if(d){if(a=No(t),!u)return Ri(t,a)}else{var f=xd(t),h=f==zt||f==Gt;if(vf(t))return Ei(t,u);if(f==Zt||f==Ht||h&&!i){if(a=c||h?{}:Oo(t),!u)return c?Pi(t,Zn(a,t)):Li(t,Xn(a,t))}else{if(!xn[f])return i?t:{};a=So(t,f,u)}}o||(o=new bn);var p=o.get(t);if(p)return p;if(o.set(t,a),gf(t))return t.forEach(function(r){a.add(er(r,e,n,r,t,o))}),a;if(yf(t))return t.forEach(function(r,i){a.set(i,er(r,e,n,i,t,o))}),a;var v=l?c?vo:po:c?Iu:Pu,m=d?rt:v(t);return s(m||t,function(r,i){m&&(i=r,r=t[i]),Wn(a,i,er(r,e,n,i,t,o))}),a}function nr(t){var e=Pu(t);return function(n){return rr(n,t,e)}}function rr(t,e,n){var r=n.length;if(null==t)return!r;for(t=rl(t);r--;){var i=n[r],o=e[i],a=t[i];if(a===rt&&!(i in t)||!o(a))return!1}return!0}function ir(t,e,n){if("function"!=typeof t)throw new al(at);return Cd(function(){t.apply(rt,n)},e)}function or(t,e,n,r){var i=-1,o=d,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=h(e,R(n))),r?(o=f,a=!1):e.length>=it&&(o=L,a=!1,e=new vn(e));t:for(;++i<s;){var l=t[i],p=null==n?l:n(l);if(l=r||0!==l?l:0,a&&p===p){for(var v=c;v--;)if(e[v]===p)continue t;u.push(l)}else o(e,p,r)||u.push(l)}return u}function ar(t,e){var n=!0;return ld(t,function(t,r,i){return n=!!e(t,r,i)}),n}function sr(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===rt?a===a&&!fu(a):n(a,s)))var s=a,u=o}return u}function ur(t,e,n,r){var i=t.length;for(n=bu(n),n<0&&(n=-n>i?0:i+n),r=r===rt||r>i?i:bu(r),r<0&&(r+=i),r=n>r?0:gu(r);n<r;)t[n++]=e;return t}function cr(t,e){var n=[];return ld(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function lr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Ao),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?lr(s,e-1,n,r,i):p(i,s):r||(i[i.length]=s)}return i}function dr(t,e){return t&&fd(t,e,Pu)}function fr(t,e){return t&&hd(t,e,Pu)}function hr(t,e){return l(e,function(e){return Zs(t[e])})}function pr(t,e){e=wi(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Yo(e[n++])];return n&&n==r?t:rt}function vr(t,e,n){var r=e(t);return hf(t)?r:p(r,n(t))}function mr(t){return null==t?t===rt?re:Xt:kl&&kl in rl(t)?xo(t):Vo(t)}function yr(t,e){return t>e}function br(t,e){return null!=t&&fl.call(t,e)}function gr(t,e){return null!=t&&e in rl(t)}function _r(t,e,n){return t>=Vl(e,n)&&t<Fl(e,n)}function wr(t,e,n){for(var r=n?f:d,i=t[0].length,o=t.length,a=o,s=Qc(o),u=1/0,c=[];a--;){var l=t[a];a&&e&&(l=h(l,R(e))),u=Vl(l.length,u),s[a]=!n&&(e||i>=120&&l.length>=120)?new vn(a&&l):rt}l=t[0];var p=-1,v=s[0];t:for(;++p<i&&c.length<u;){var m=l[p],y=e?e(m):m;if(m=n||0!==m?m:0,!(v?L(v,y):r(c,y,n))){for(a=o;--a;){var b=s[a];if(!(b?L(b,y):r(t[a],y,n)))continue t}v&&v.push(y),c.push(m)}}return c}function xr(t,e,n,r){return dr(t,function(t,i,o){e(r,n(t),i,o)}),r}function Er(t,e,n){e=wi(e,t),t=Ko(t,e);var r=null==t?t:t[Yo(ya(e))];return null==r?rt:o(r,t,n)}function Tr(t){return eu(t)&&mr(t)==Ht}function Cr(t){return eu(t)&&mr(t)==ae}function Nr(t){return eu(t)&&mr(t)==Wt}function Or(t,e,n,r,i){return t===e||(null==t||null==e||!eu(t)&&!eu(e)?t!==t&&e!==e:Sr(t,e,n,r,Or,i))}function Sr(t,e,n,r,i,o){var a=hf(t),s=hf(e),u=a?Ut:xd(t),c=s?Ut:xd(e);u=u==Ht?Zt:u,c=c==Ht?Zt:c;var l=u==Zt,d=c==Zt,f=u==c;if(f&&vf(t)){if(!vf(e))return!1;a=!0,l=!1}if(f&&!l)return o||(o=new bn),a||_f(t)?co(t,e,n,r,i,o):lo(t,e,u,n,r,i,o);if(!(n&ht)){var h=l&&fl.call(t,"__wrapped__"),p=d&&fl.call(e,"__wrapped__");if(h||p){var v=h?t.value():t,m=p?e.value():e;return o||(o=new bn),i(v,m,n,r,o)}}return!!f&&(o||(o=new bn),fo(t,e,n,r,i,o))}function kr(t){return eu(t)&&xd(t)==qt}function Ar(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=rl(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],c=t[u],l=s[1];if(a&&s[2]){if(c===rt&&!(u in t))return!1}else{var d=new bn;if(r)var f=r(c,l,u,t,e,d);if(!(f===rt?Or(l,c,ht|pt,r,d):f))return!1}}return!0}function jr(t){return!(!tu(t)||Po(t))&&(Zs(t)?bl:Ke).test(Xo(t))}function Mr(t){return eu(t)&&mr(t)==Jt}function Rr(t){return eu(t)&&xd(t)==te}function Dr(t){return eu(t)&&Js(t.length)&&!!wn[mr(t)]}function Lr(t){return"function"==typeof t?t:null==t?Nc:"object"==typeof t?hf(t)?Fr(t[0],t[1]):Ur(t):Dc(t)}function Pr(t){if(!Io(t))return Ul(t);var e=[];for(var n in rl(t))fl.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ir(t){if(!tu(t))return Fo(t);var e=Io(t),n=[];for(var r in t)("constructor"!=r||!e&&fl.call(t,r))&&n.push(r);return n}function Br(t,e){return t<e}function Hr(t,e){var n=-1,r=Vs(t)?Qc(t.length):[];return ld(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Ur(t){var e=_o(t);return 1==e.length&&e[0][2]?Ho(e[0][0],e[0][1]):function(n){return n===t||Ar(n,t,e)}}function Fr(t,e){return Ro(t)&&Bo(e)?Ho(Yo(t),e):function(n){var r=Ru(n,t);return r===rt&&r===e?Lu(n,t):Or(e,r,ht|pt)}}function Vr(t,e,n,r,i){t!==e&&fd(e,function(o,a){if(tu(o))i||(i=new bn),Wr(t,e,a,n,Vr,r,i);else{var s=r?r(G(t,a),o,a+"",t,e,i):rt;s===rt&&(s=o),Pn(t,a,s)}},Iu)}function Wr(t,e,n,r,i,o,a){var s=G(t,n),u=G(e,n),c=a.get(u);if(c)return void Pn(t,n,c);var l=o?o(s,u,n+"",t,e,a):rt,d=l===rt;if(d){var f=hf(u),h=!f&&vf(u),p=!f&&!h&&_f(u);l=u,f||h||p?hf(s)?l=s:Ws(s)?l=Ri(s):h?(d=!1,l=Ei(u,!0)):p?(d=!1,l=Si(u,!0)):l=[]:cu(u)||ff(u)?(l=s,ff(s)?l=wu(s):(!tu(s)||r&&Zs(s))&&(l=Oo(u))):d=!1}d&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),Pn(t,n,l)}function Kr(t,e){var n=t.length;if(n)return e+=e<0?n:0,jo(e,n)?t[e]:rt}function $r(t,e,n){var r=-1;return e=h(e.length?e:[Nc],R(bo())),k(Hr(t,function(t,n,i){return{criteria:h(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return Ai(t,e,n)})}function zr(t,e){return Gr(t,e,function(e,n){return Lu(t,n)})}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=pr(t,a);n(s,a)&&ri(o,wi(a,t),s)}return o}function qr(t){return function(e){return pr(e,t)}}function Yr(t,e,n,r){var i=r?E:x,o=-1,a=e.length,s=t;for(t===e&&(e=Ri(e)),n&&(s=h(t,R(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Nl.call(s,u,1),Nl.call(t,u,1);return t}function Xr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;jo(i)?Nl.call(t,i,1):hi(t,i)}}return t}function Zr(t,e){return t+Ll($l()*(e-t+1))}function Qr(t,e,n,r){for(var i=-1,o=Fl(Dl((e-t)/(n||1)),0),a=Qc(o);o--;)a[r?o:++i]=t,t+=n;return a}function Jr(t,e){var n="";if(!t||e<1||e>Mt)return n;do{e%2&&(n+=t),(e=Ll(e/2))&&(t+=t)}while(e);return n}function ti(t,e){return Nd(Wo(t,e,Nc),t+"")}function ei(t){return Mn(Yu(t))}function ni(t,e){var n=Yu(t);return qo(n,tr(e,0,n.length))}function ri(t,e,n,r){if(!tu(t))return t;e=wi(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=Yo(e[i]),c=n;if(i!=a){var l=s[u];c=r?r(l,u,s):rt,c===rt&&(c=tu(l)?l:jo(e[i+1])?[]:{})}Wn(s,u,c),s=s[u]}return t}function ii(t){return qo(Yu(t))}function oi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Qc(i);++r<i;)o[r]=t[r+e];return o}function ai(t,e){var n;return ld(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function si(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e===e&&i<=It){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!fu(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ui(t,e,Nc,n)}function ui(t,e,n,r){e=n(e);for(var i=0,o=null==t?0:t.length,a=e!==e,s=null===e,u=fu(e),c=e===rt;i<o;){var l=Ll((i+o)/2),d=n(t[l]),f=d!==rt,h=null===d,p=d===d,v=fu(d);if(a)var m=r||p;else m=c?p&&(r||f):s?p&&f&&(r||!h):u?p&&f&&!h&&(r||!v):!h&&!v&&(r?d<=e:d<e);m?i=l+1:o=l}return Vl(o,Pt)}function ci(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Fs(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function li(t){return"number"==typeof t?t:fu(t)?Dt:+t}function di(t){if("string"==typeof t)return t;if(hf(t))return h(t,di)+"";if(fu(t))return ud?ud.call(t):"";var e=t+"";return"0"==e&&1/t==-jt?"-0":e}function fi(t,e,n){var r=-1,i=d,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=f;else if(o>=it){var c=e?null:bd(t);if(c)return q(c);a=!1,i=L,u=new vn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,a&&h===h){for(var p=u.length;p--;)if(u[p]===h)continue t;e&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function hi(t,e){return e=wi(e,t),null==(t=Ko(t,e))||delete t[Yo(ya(e))]}function pi(t,e,n,r){return ri(t,e,n(pr(t,e)),r)}function vi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?oi(t,r?0:o,r?o+1:i):oi(t,r?o+1:0,r?i:o)}function mi(t,e){var n=t;return n instanceof b&&(n=n.value()),v(e,function(t,e){return e.func.apply(e.thisArg,p([t],e.args))},n)}function yi(t,e,n){var r=t.length;if(r<2)return r?fi(t[0]):[];for(var i=-1,o=Qc(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=or(o[i]||a,t[s],e,n));return fi(lr(o,1),e,n)}function bi(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=r<o?e[r]:rt;n(a,t[r],s)}return a}function gi(t){return Ws(t)?t:[]}function _i(t){return"function"==typeof t?t:Nc}function wi(t,e){return hf(t)?t:Ro(t,e)?[t]:Od(Eu(t))}function xi(t,e,n){var r=t.length;return n=n===rt?r:n,!e&&n>=r?t:oi(t,e,n)}function Ei(t,e){if(e)return t.slice();var n=t.length,r=xl?xl(n):new t.constructor(n);return t.copy(r),r}function Ti(t){var e=new t.constructor(t.byteLength);return new wl(e).set(new wl(t)),e}function Ci(t,e){var n=e?Ti(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Ni(t){var e=new t.constructor(t.source,Fe.exec(t));return e.lastIndex=t.lastIndex,e}function Oi(t){return sd?rl(sd.call(t)):{}}function Si(t,e){var n=e?Ti(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function ki(t,e){if(t!==e){var n=t!==rt,r=null===t,i=t===t,o=fu(t),a=e!==rt,s=null===e,u=e===e,c=fu(e);if(!s&&!c&&!o&&t>e||o&&a&&u&&!s&&!c||r&&a&&u||!n&&u||!i)return 1;if(!r&&!o&&!c&&t<e||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!u)return-1}return 0}function Ai(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=ki(i[r],o[r]);if(u){if(r>=s)return u;return u*("desc"==n[r]?-1:1)}}return t.index-e.index}function ji(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=Fl(o-a,0),l=Qc(u+c),d=!r;++s<u;)l[s]=e[s];for(;++i<a;)(d||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function Mi(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=Fl(o-s,0),d=Qc(l+c),f=!r;++i<l;)d[i]=t[i];for(var h=i;++u<c;)d[h+u]=e[u];for(;++a<s;)(f||i<o)&&(d[h+n[a]]=t[i++]);return d}function Ri(t,e){var n=-1,r=t.length;for(e||(e=Qc(r));++n<r;)e[n]=t[n];return e}function Di(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):rt;u===rt&&(u=t[s]),i?Qn(n,s,u):Wn(n,s,u)}return n}function Li(t,e){return Di(t,_d(t),e)}function Pi(t,e){return Di(t,wd(t),e)}function Ii(t,e){return function(n,r){var i=hf(n)?a:Yn,o=e?e():{};return i(n,t,bo(r,2),o)}}function Bi(t){return ti(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:rt,a=i>2?n[2]:rt;for(o=t.length>3&&"function"==typeof o?(i--,o):rt,a&&Mo(n[0],n[1],a)&&(o=i<3?rt:o,i=1),e=rl(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Hi(t,e){return function(n,r){if(null==n)return n;if(!Vs(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=rl(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ui(t){return function(e,n,r){for(var i=-1,o=rl(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Fi(t,e,n){function r(){return(this&&this!==jn&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=e&vt,o=Ki(t);return r}function Vi(t){return function(e){e=Eu(e);var n=F(e)?J(e):rt,r=n?n[0]:e.charAt(0),i=n?xi(n,1).join(""):e.slice(1);return r[t]()+i}}function Wi(t){return function(e){return v(wc(ec(e).replace(hn,"")),t,"")}}function Ki(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=cd(t.prototype),r=t.apply(n,e);return tu(r)?r:n}}function $i(t,e,n){function r(){for(var a=arguments.length,s=Qc(a),u=a,c=yo(r);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:z(s,c);return(a-=l.length)<n?no(t,e,qi,r.placeholder,rt,s,l,rt,rt,n-a):o(this&&this!==jn&&this instanceof r?i:t,this,s)}var i=Ki(t);return r}function zi(t){return function(e,n,r){var i=rl(e);if(!Vs(e)){var o=bo(n,3);e=Pu(e),n=function(t){return o(i[t],t,i)}}var a=t(e,n,r);return a>-1?i[o?e[a]:a]:rt}}function Gi(t){return ho(function(e){var n=e.length,r=n,o=i.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new al(at);if(o&&!s&&"wrapper"==mo(a))var s=new i([],!0)}for(r=s?r:n;++r<n;){a=e[r];var u=mo(a),c="wrapper"==u?gd(a):rt;s=c&&Lo(c[0])&&c[1]==(xt|bt|_t|Et)&&!c[4].length&&1==c[9]?s[mo(c[0])].apply(s,c[3]):1==a.length&&Lo(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&hf(r))return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function qi(t,e,n,r,i,o,a,s,u,c){function l(){for(var y=arguments.length,b=Qc(y),g=y;g--;)b[g]=arguments[g];if(p)var _=yo(l),w=B(b,_);if(r&&(b=ji(b,r,i,p)),o&&(b=Mi(b,o,a,p)),y-=w,p&&y<c){var x=z(b,_);return no(t,e,qi,l.placeholder,n,b,x,s,u,c-y)}var E=f?n:this,T=h?E[t]:t;return y=b.length,s?b=$o(b,s):v&&y>1&&b.reverse(),d&&u<y&&(b.length=u),this&&this!==jn&&this instanceof l&&(T=m||Ki(T)),T.apply(E,b)}var d=e&xt,f=e&vt,h=e&mt,p=e&(bt|gt),v=e&Tt,m=h?rt:Ki(t);return l}function Yi(t,e){return function(n,r){return xr(n,t,e(r),{})}}function Xi(t,e){return function(n,r){var i;if(n===rt&&r===rt)return e;if(n!==rt&&(i=n),r!==rt){if(i===rt)return r;"string"==typeof n||"string"==typeof r?(n=di(n),r=di(r)):(n=li(n),r=li(r)),i=t(n,r)}return i}}function Zi(t){return ho(function(e){return e=h(e,R(bo())),ti(function(n){var r=this;return t(e,function(t){return o(t,r,n)})})})}function Qi(t,e){e=e===rt?" ":di(e);var n=e.length;if(n<2)return n?Jr(e,t):e;var r=Jr(e,Dl(t/Q(e)));return F(e)?xi(J(r),0,t).join(""):r.slice(0,t)}function Ji(t,e,n,r){function i(){for(var e=-1,u=arguments.length,c=-1,l=r.length,d=Qc(l+u),f=this&&this!==jn&&this instanceof i?s:t;++c<l;)d[c]=r[c];for(;u--;)d[c++]=arguments[++e];return o(f,a?n:this,d)}var a=e&vt,s=Ki(t);return i}function to(t){return function(e,n,r){return r&&"number"!=typeof r&&Mo(e,n,r)&&(n=r=rt),e=yu(e),n===rt?(n=e,e=0):n=yu(n),r=r===rt?e<n?1:-1:yu(r),Qr(e,n,r,t)}}function eo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=_u(e),n=_u(n)),t(e,n)}}function no(t,e,n,r,i,o,a,s,u,c){var l=e&bt,d=l?a:rt,f=l?rt:a,h=l?o:rt,p=l?rt:o;e|=l?_t:wt,(e&=~(l?wt:_t))&yt||(e&=~(vt|mt));var v=[t,e,i,h,d,p,f,s,u,c],m=n.apply(rt,v);return Lo(t)&&Td(m,v),m.placeholder=r,zo(m,t,e)}function ro(t){var e=nl[t];return function(t,n){if(t=_u(t),n=null==n?0:Vl(bu(n),292)){var r=(Eu(t)+"e").split("e");return r=(Eu(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function io(t){return function(e){var n=xd(e);return n==qt?K(e):n==te?Y(e):M(e,t(e))}}function oo(t,e,n,r,i,o,a,s){var u=e&mt;if(!u&&"function"!=typeof t)throw new al(at);var c=r?r.length:0;if(c||(e&=~(_t|wt),r=i=rt),a=a===rt?a:Fl(bu(a),0),s=s===rt?s:bu(s),c-=i?i.length:0,e&wt){var l=r,d=i;r=i=rt}var f=u?rt:gd(t),h=[t,e,n,r,i,l,d,o,a,s];if(f&&Uo(h,f),t=h[0],e=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=h[9]===rt?u?0:t.length:Fl(h[9]-c,0),!s&&e&(bt|gt)&&(e&=~(bt|gt)),e&&e!=vt)p=e==bt||e==gt?$i(t,e,s):e!=_t&&e!=(vt|_t)||i.length?qi.apply(rt,h):Ji(t,e,n,r);else var p=Fi(t,e,n);return zo((f?pd:Td)(p,h),t,e)}function ao(t,e,n,r){return t===rt||Fs(t,cl[n])&&!fl.call(r,n)?e:t}function so(t,e,n,r,i,o){return tu(t)&&tu(e)&&(o.set(e,t),Vr(t,e,rt,so,o),o.delete(e)),t}function uo(t){return cu(t)?rt:t}function co(t,e,n,r,i,o){var a=n&ht,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,d=!0,f=n&pt?new vn:rt;for(o.set(t,e),o.set(e,t);++l<s;){var h=t[l],p=e[l];if(r)var v=a?r(p,h,l,e,t,o):r(h,p,l,t,e,o);if(v!==rt){if(v)continue;d=!1;break}if(f){if(!y(e,function(t,e){if(!L(f,e)&&(h===t||i(h,t,n,r,o)))return f.push(e)})){d=!1;break}}else if(h!==p&&!i(h,p,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d}function lo(t,e,n,r,i,o,a){switch(n){case se:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ae:return!(t.byteLength!=e.byteLength||!o(new wl(t),new wl(e)));case Vt:case Wt:case Yt:return Fs(+t,+e);case $t:return t.name==e.name&&t.message==e.message;case Jt:case ee:return t==e+"";case qt:var s=K;case te:var u=r&ht;if(s||(s=q),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=pt,a.set(t,e);var l=co(s(t),s(e),r,i,o,a);return a.delete(t),l;case ne:if(sd)return sd.call(t)==sd.call(e)}return!1}function fo(t,e,n,r,i,o){var a=n&ht,s=po(t),u=s.length;if(u!=po(e).length&&!a)return!1;for(var c=u;c--;){var l=s[c];if(!(a?l in e:fl.call(e,l)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var f=!0;o.set(t,e),o.set(e,t);for(var h=a;++c<u;){l=s[c];var p=t[l],v=e[l];if(r)var m=a?r(v,p,l,e,t,o):r(p,v,l,t,e,o);if(!(m===rt?p===v||i(p,v,n,r,o):m)){f=!1;break}h||(h="constructor"==l)}if(f&&!h){var y=t.constructor,b=e.constructor;y!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(f=!1)}return o.delete(t),o.delete(e),f}function ho(t){return Nd(Wo(t,rt,ca),t+"")}function po(t){return vr(t,Pu,_d)}function vo(t){return vr(t,Iu,wd)}function mo(t){for(var e=t.name+"",n=td[e],r=fl.call(td,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function yo(t){return(fl.call(n,"placeholder")?n:t).placeholder}function bo(){var t=n.iteratee||Oc;return t=t===Oc?Lr:t,arguments.length?t(arguments[0],arguments[1]):t}function go(t,e){var n=t.__data__;return Do(e)?n["string"==typeof e?"string":"hash"]:n.map}function _o(t){for(var e=Pu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Bo(i)]}return e}function wo(t,e){var n=U(t,e);return jr(n)?n:rt}function xo(t){var e=fl.call(t,kl),n=t[kl];try{t[kl]=rt;var r=!0}catch(t){}var i=vl.call(t);return r&&(e?t[kl]=n:delete t[kl]),i}function Eo(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Vl(e,t+a);break;case"takeRight":t=Fl(t,e-a)}}return{start:t,end:e}}function To(t){var e=t.match(Pe);return e?e[1].split(Ie):[]}function Co(t,e,n){e=wi(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Yo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Js(i)&&jo(a,i)&&(hf(t)||ff(t))}function No(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&fl.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Oo(t){return"function"!=typeof t.constructor||Io(t)?{}:cd(El(t))}function So(t,e,n){var r=t.constructor;switch(e){case ae:return Ti(t);case Vt:case Wt:return new r(+t);case se:return Ci(t,n);case ue:case ce:case le:case de:case fe:case he:case pe:case ve:case me:return Si(t,n);case qt:return new r;case Yt:case ee:return new r(t);case Jt:return Ni(t);case te:return new r;case ne:return Oi(t)}}function ko(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Le,"{\n/* [wrapped with "+e+"] */\n")}function Ao(t){return hf(t)||ff(t)||!!(Ol&&t&&t[Ol])}function jo(t,e){var n=typeof t;return!!(e=null==e?Mt:e)&&("number"==n||"symbol"!=n&&ze.test(t))&&t>-1&&t%1==0&&t<e}function Mo(t,e,n){if(!tu(n))return!1;var r=typeof e;return!!("number"==r?Vs(n)&&jo(e,n.length):"string"==r&&e in n)&&Fs(n[e],t)}function Ro(t,e){if(hf(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!fu(t))||(Se.test(t)||!Oe.test(t)||null!=e&&t in rl(e))}function Do(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Lo(t){var e=mo(t),r=n[e];if("function"!=typeof r||!(e in b.prototype))return!1;if(t===r)return!0;var i=gd(r);return!!i&&t===i[0]}function Po(t){return!!pl&&pl in t}function Io(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||cl)}function Bo(t){return t===t&&!tu(t)}function Ho(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==rt||t in rl(n)))}}function Uo(t,e){var n=t[1],r=e[1],i=n|r,o=i<(vt|mt|xt),a=r==xt&&n==bt||r==xt&&n==Et&&t[7].length<=e[8]||r==(xt|Et)&&e[7].length<=e[8]&&n==bt;if(!o&&!a)return t;r&vt&&(t[2]=e[2],i|=n&vt?0:yt);var s=e[3];if(s){var u=t[3];t[3]=u?ji(u,s,e[4]):s,t[4]=u?z(t[3],ct):e[4]}return s=e[5],s&&(u=t[5],t[5]=u?Mi(u,s,e[6]):s,t[6]=u?z(t[5],ct):e[6]),s=e[7],s&&(t[7]=s),r&xt&&(t[8]=null==t[8]?e[8]:Vl(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Fo(t){var e=[];if(null!=t)for(var n in rl(t))e.push(n);return e}function Vo(t){return vl.call(t)}function Wo(t,e,n){return e=Fl(e===rt?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=Fl(r.length-e,0),s=Qc(a);++i<a;)s[i]=r[e+i];i=-1;for(var u=Qc(e+1);++i<e;)u[i]=r[i];return u[e]=n(s),o(t,this,u)}}function Ko(t,e){return e.length<2?t:pr(t,oi(e,0,-1))}function $o(t,e){for(var n=t.length,r=Vl(e.length,n),i=Ri(t);r--;){var o=e[r];t[r]=jo(o,n)?i[o]:rt}return t}function zo(t,e,n){var r=e+"";return Nd(t,ko(r,Zo(To(r),n)))}function Go(t){var e=0,n=0;return function(){var r=Wl(),i=St-(r-n);if(n=r,i>0){if(++e>=Ot)return arguments[0]}else e=0;return t.apply(rt,arguments)}}function qo(t,e){var n=-1,r=t.length,i=r-1;for(e=e===rt?r:e;++n<e;){var o=Zr(n,i),a=t[o];t[o]=t[n],t[n]=a}return t.length=e,t}function Yo(t){if("string"==typeof t||fu(t))return t;var e=t+"";return"0"==e&&1/t==-jt?"-0":e}function Xo(t){if(null!=t){try{return dl.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Zo(t,e){return s(Bt,function(n){var r="_."+n[0];e&n[1]&&!d(t,r)&&t.push(r)}),t.sort()}function Qo(t){if(t instanceof b)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=Ri(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Jo(t,e,n){e=(n?Mo(t,e,n):e===rt)?1:Fl(bu(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,a=Qc(Dl(r/e));i<r;)a[o++]=oi(t,i,i+=e);return a}function ta(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function ea(){var t=arguments.length;if(!t)return[];for(var e=Qc(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return p(hf(n)?Ri(n):[n],lr(e,1))}function na(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===rt?1:bu(e),oi(t,e<0?0:e,r)):[]}function ra(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===rt?1:bu(e),e=r-e,oi(t,0,e<0?0:e)):[]}function ia(t,e){return t&&t.length?vi(t,bo(e,3),!0,!0):[]}function oa(t,e){return t&&t.length?vi(t,bo(e,3),!0):[]}function aa(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Mo(t,e,n)&&(n=0,r=i),ur(t,e,n,r)):[]}function sa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bu(n);return i<0&&(i=Fl(r+i,0)),w(t,bo(e,3),i)}function ua(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==rt&&(i=bu(n),i=n<0?Fl(r+i,0):Vl(i,r-1)),w(t,bo(e,3),i,!0)}function ca(t){return(null==t?0:t.length)?lr(t,1):[]}function la(t){return(null==t?0:t.length)?lr(t,jt):[]}function da(t,e){return(null==t?0:t.length)?(e=e===rt?1:bu(e),lr(t,e)):[]}function fa(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function ha(t){return t&&t.length?t[0]:rt}function pa(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bu(n);return i<0&&(i=Fl(r+i,0)),x(t,e,i)}function va(t){return(null==t?0:t.length)?oi(t,0,-1):[]}function ma(t,e){return null==t?"":Hl.call(t,e)}function ya(t){var e=null==t?0:t.length;return e?t[e-1]:rt}function ba(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==rt&&(i=bu(n),i=i<0?Fl(r+i,0):Vl(i,r-1)),e===e?Z(t,e,i):w(t,T,i,!0)}function ga(t,e){return t&&t.length?Kr(t,bu(e)):rt}function _a(t,e){return t&&t.length&&e&&e.length?Yr(t,e):t}function wa(t,e,n){return t&&t.length&&e&&e.length?Yr(t,e,bo(n,2)):t}function xa(t,e,n){return t&&t.length&&e&&e.length?Yr(t,e,rt,n):t}function Ea(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=bo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Xr(t,i),n}function Ta(t){return null==t?t:zl.call(t)}function Ca(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Mo(t,e,n)?(e=0,n=r):(e=null==e?0:bu(e),n=n===rt?r:bu(n)),oi(t,e,n)):[]}function Na(t,e){return si(t,e)}function Oa(t,e,n){return ui(t,e,bo(n,2))}function Sa(t,e){var n=null==t?0:t.length;if(n){var r=si(t,e);if(r<n&&Fs(t[r],e))return r}return-1}function ka(t,e){return si(t,e,!0)}function Aa(t,e,n){return ui(t,e,bo(n,2),!0)}function ja(t,e){if(null==t?0:t.length){var n=si(t,e,!0)-1;if(Fs(t[n],e))return n}return-1}function Ma(t){return t&&t.length?ci(t):[]}function Ra(t,e){return t&&t.length?ci(t,bo(e,2)):[]}function Da(t){var e=null==t?0:t.length;return e?oi(t,1,e):[]}function La(t,e,n){return t&&t.length?(e=n||e===rt?1:bu(e),oi(t,0,e<0?0:e)):[]}function Pa(t,e,n){var r=null==t?0:t.length;return r?(e=n||e===rt?1:bu(e),e=r-e,oi(t,e<0?0:e,r)):[]}function Ia(t,e){return t&&t.length?vi(t,bo(e,3),!1,!0):[]}function Ba(t,e){return t&&t.length?vi(t,bo(e,3)):[]}function Ha(t){return t&&t.length?fi(t):[]}function Ua(t,e){return t&&t.length?fi(t,bo(e,2)):[]}function Fa(t,e){return e="function"==typeof e?e:rt,t&&t.length?fi(t,rt,e):[]}function Va(t){if(!t||!t.length)return[];var e=0;return t=l(t,function(t){if(Ws(t))return e=Fl(t.length,e),!0}),j(e,function(e){return h(t,N(e))})}function Wa(t,e){if(!t||!t.length)return[];var n=Va(t);return null==e?n:h(n,function(t){return o(e,rt,t)})}function Ka(t,e){return bi(t||[],e||[],Wn)}function $a(t,e){return bi(t||[],e||[],ri)}function za(t){var e=n(t);return e.__chain__=!0,e}function Ga(t,e){return e(t),t}function qa(t,e){return e(t)}function Ya(){return za(this)}function Xa(){return new i(this.value(),this.__chain__)}function Za(){this.__values__===rt&&(this.__values__=mu(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?rt:this.__values__[this.__index__++]}}function Qa(){return this}function Ja(t){for(var e,n=this;n instanceof r;){var i=Qo(n);i.__index__=0,i.__values__=rt,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function ts(){var t=this.__wrapped__;if(t instanceof b){var e=t;return this.__actions__.length&&(e=new b(this)),e=e.reverse(),e.__actions__.push({func:qa,args:[Ta],thisArg:rt}),new i(e,this.__chain__)}return this.thru(Ta)}function es(){return mi(this.__wrapped__,this.__actions__)}function ns(t,e,n){var r=hf(t)?c:ar;return n&&Mo(t,e,n)&&(e=rt),r(t,bo(e,3))}function rs(t,e){return(hf(t)?l:cr)(t,bo(e,3))}function is(t,e){return lr(ls(t,e),1)}function os(t,e){return lr(ls(t,e),jt)}function as(t,e,n){return n=n===rt?1:bu(n),lr(ls(t,e),n)}function ss(t,e){return(hf(t)?s:ld)(t,bo(e,3))}function us(t,e){return(hf(t)?u:dd)(t,bo(e,3))}function cs(t,e,n,r){t=Vs(t)?t:Yu(t),n=n&&!r?bu(n):0;var i=t.length;return n<0&&(n=Fl(i+n,0)),du(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&x(t,e,n)>-1}function ls(t,e){return(hf(t)?h:Hr)(t,bo(e,3))}function ds(t,e,n,r){return null==t?[]:(hf(e)||(e=null==e?[]:[e]),n=r?rt:n,hf(n)||(n=null==n?[]:[n]),$r(t,e,n))}function fs(t,e,n){var r=hf(t)?v:S,i=arguments.length<3;return r(t,bo(e,4),n,i,ld)}function hs(t,e,n){var r=hf(t)?m:S,i=arguments.length<3;return r(t,bo(e,4),n,i,dd)}function ps(t,e){return(hf(t)?l:cr)(t,Ss(bo(e,3)))}function vs(t){return(hf(t)?Mn:ei)(t)}function ms(t,e,n){return e=(n?Mo(t,e,n):e===rt)?1:bu(e),(hf(t)?Rn:ni)(t,e)}function ys(t){return(hf(t)?Ln:ii)(t)}function bs(t){if(null==t)return 0;if(Vs(t))return du(t)?Q(t):t.length;var e=xd(t);return e==qt||e==te?t.size:Pr(t).length}function gs(t,e,n){var r=hf(t)?y:ai;return n&&Mo(t,e,n)&&(e=rt),r(t,bo(e,3))}function _s(t,e){if("function"!=typeof e)throw new al(at);return t=bu(t),function(){if(--t<1)return e.apply(this,arguments)}}function ws(t,e,n){return e=n?rt:e,e=t&&null==e?t.length:e,oo(t,xt,rt,rt,rt,rt,e)}function xs(t,e){var n;if("function"!=typeof e)throw new al(at);return t=bu(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=rt),n}}function Es(t,e,n){e=n?rt:e;var r=oo(t,bt,rt,rt,rt,rt,rt,e);return r.placeholder=Es.placeholder,r}function Ts(t,e,n){e=n?rt:e;var r=oo(t,gt,rt,rt,rt,rt,rt,e);return r.placeholder=Ts.placeholder,r}function Cs(t,e,n){function r(e){var n=f,r=h;return f=h=rt,b=e,v=t.apply(r,n)}function i(t){return b=t,m=Cd(s,e),g?r(t):v}function o(t){var n=t-y,r=t-b,i=e-n;return _?Vl(i,p-r):i}function a(t){var n=t-y,r=t-b;return y===rt||n>=e||n<0||_&&r>=p}function s(){var t=tf();if(a(t))return u(t);m=Cd(s,o(t))}function u(t){return m=rt,w&&f?r(t):(f=h=rt,v)}function c(){m!==rt&&yd(m),b=0,f=y=h=m=rt}function l(){return m===rt?v:u(tf())}function d(){var t=tf(),n=a(t);if(f=arguments,h=this,y=t,n){if(m===rt)return i(y);if(_)return m=Cd(s,e),r(y)}return m===rt&&(m=Cd(s,e)),v}var f,h,p,v,m,y,b=0,g=!1,_=!1,w=!0;if("function"!=typeof t)throw new al(at);return e=_u(e)||0,tu(n)&&(g=!!n.leading,_="maxWait"in n,p=_?Fl(_u(n.maxWait)||0,e):p,w="trailing"in n?!!n.trailing:w),d.cancel=c,d.flush=l,d}function Ns(t){return oo(t,Tt)}function Os(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new al(at);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Os.Cache||sn),n}function Ss(t){if("function"!=typeof t)throw new al(at);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function ks(t){return xs(2,t)}function As(t,e){if("function"!=typeof t)throw new al(at);return e=e===rt?e:bu(e),ti(t,e)}function js(t,e){if("function"!=typeof t)throw new al(at);return e=null==e?0:Fl(bu(e),0),ti(function(n){var r=n[e],i=xi(n,0,e);return r&&p(i,r),o(t,this,i)})}function Ms(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new al(at);return tu(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Cs(t,e,{leading:r,maxWait:e,trailing:i})}function Rs(t){return ws(t,1)}function Ds(t,e){return sf(_i(e),t)}function Ls(){if(!arguments.length)return[];var t=arguments[0];return hf(t)?t:[t]}function Ps(t){return er(t,ft)}function Is(t,e){return e="function"==typeof e?e:rt,er(t,ft,e)}function Bs(t){return er(t,lt|ft)}function Hs(t,e){return e="function"==typeof e?e:rt,er(t,lt|ft,e)}function Us(t,e){return null==e||rr(t,e,Pu(e))}function Fs(t,e){return t===e||t!==t&&e!==e}function Vs(t){return null!=t&&Js(t.length)&&!Zs(t)}function Ws(t){return eu(t)&&Vs(t)}function Ks(t){return!0===t||!1===t||eu(t)&&mr(t)==Vt}function $s(t){return eu(t)&&1===t.nodeType&&!cu(t)}function zs(t){if(null==t)return!0;if(Vs(t)&&(hf(t)||"string"==typeof t||"function"==typeof t.splice||vf(t)||_f(t)||ff(t)))return!t.length;var e=xd(t);if(e==qt||e==te)return!t.size;if(Io(t))return!Pr(t).length;for(var n in t)if(fl.call(t,n))return!1;return!0}function Gs(t,e){return Or(t,e)}function qs(t,e,n){n="function"==typeof n?n:rt;var r=n?n(t,e):rt;return r===rt?Or(t,e,rt,n):!!r}function Ys(t){if(!eu(t))return!1;var e=mr(t);return e==$t||e==Kt||"string"==typeof t.message&&"string"==typeof t.name&&!cu(t)}function Xs(t){return"number"==typeof t&&Bl(t)}function Zs(t){if(!tu(t))return!1;var e=mr(t);return e==zt||e==Gt||e==Ft||e==Qt}function Qs(t){return"number"==typeof t&&t==bu(t)}function Js(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Mt}function tu(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function eu(t){return null!=t&&"object"==typeof t}function nu(t,e){return t===e||Ar(t,e,_o(e))}function ru(t,e,n){return n="function"==typeof n?n:rt,Ar(t,e,_o(e),n)}function iu(t){return uu(t)&&t!=+t}function ou(t){if(Ed(t))throw new tl(ot);return jr(t)}function au(t){return null===t}function su(t){return null==t}function uu(t){return"number"==typeof t||eu(t)&&mr(t)==Yt}function cu(t){if(!eu(t)||mr(t)!=Zt)return!1;var e=El(t);if(null===e)return!0;var n=fl.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&dl.call(n)==ml}function lu(t){return Qs(t)&&t>=-Mt&&t<=Mt}function du(t){return"string"==typeof t||!hf(t)&&eu(t)&&mr(t)==ee}function fu(t){return"symbol"==typeof t||eu(t)&&mr(t)==ne}function hu(t){return t===rt}function pu(t){return eu(t)&&xd(t)==ie}function vu(t){return eu(t)&&mr(t)==oe}function mu(t){if(!t)return[];if(Vs(t))return du(t)?J(t):Ri(t);if(Sl&&t[Sl])return W(t[Sl]());var e=xd(t);return(e==qt?K:e==te?q:Yu)(t)}function yu(t){if(!t)return 0===t?t:0;if((t=_u(t))===jt||t===-jt){return(t<0?-1:1)*Rt}return t===t?t:0}function bu(t){var e=yu(t),n=e%1;return e===e?n?e-n:e:0}function gu(t){return t?tr(bu(t),0,Lt):0}function _u(t){if("number"==typeof t)return t;if(fu(t))return Dt;if(tu(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=tu(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Me,"");var n=We.test(t);return n||$e.test(t)?Sn(t.slice(2),n?2:8):Ve.test(t)?Dt:+t}function wu(t){return Di(t,Iu(t))}function xu(t){return t?tr(bu(t),-Mt,Mt):0===t?t:0}function Eu(t){return null==t?"":di(t)}function Tu(t,e){var n=cd(t);return null==e?n:Xn(n,e)}function Cu(t,e){return _(t,bo(e,3),dr)}function Nu(t,e){return _(t,bo(e,3),fr)}function Ou(t,e){return null==t?t:fd(t,bo(e,3),Iu)}function Su(t,e){return null==t?t:hd(t,bo(e,3),Iu)}function ku(t,e){return t&&dr(t,bo(e,3))}function Au(t,e){return t&&fr(t,bo(e,3))}function ju(t){return null==t?[]:hr(t,Pu(t))}function Mu(t){return null==t?[]:hr(t,Iu(t))}function Ru(t,e,n){var r=null==t?rt:pr(t,e);return r===rt?n:r}function Du(t,e){return null!=t&&Co(t,e,br)}function Lu(t,e){return null!=t&&Co(t,e,gr)}function Pu(t){return Vs(t)?An(t):Pr(t)}function Iu(t){return Vs(t)?An(t,!0):Ir(t)}function Bu(t,e){var n={};return e=bo(e,3),dr(t,function(t,r,i){Qn(n,e(t,r,i),t)}),n}function Hu(t,e){var n={};return e=bo(e,3),dr(t,function(t,r,i){Qn(n,r,e(t,r,i))}),n}function Uu(t,e){return Fu(t,Ss(bo(e)))}function Fu(t,e){if(null==t)return{};var n=h(vo(t),function(t){return[t]});return e=bo(e),Gr(t,n,function(t,n){return e(t,n[0])})}function Vu(t,e,n){e=wi(e,t);var r=-1,i=e.length;for(i||(i=1,t=rt);++r<i;){var o=null==t?rt:t[Yo(e[r])];o===rt&&(r=i,o=n),t=Zs(o)?o.call(t):o}return t}function Wu(t,e,n){return null==t?t:ri(t,e,n)}function Ku(t,e,n,r){return r="function"==typeof r?r:rt,null==t?t:ri(t,e,n,r)}function $u(t,e,n){var r=hf(t),i=r||vf(t)||_f(t);if(e=bo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:tu(t)&&Zs(o)?cd(El(t)):{}}return(i?s:dr)(t,function(t,r,i){return e(n,t,r,i)}),n}function zu(t,e){return null==t||hi(t,e)}function Gu(t,e,n){return null==t?t:pi(t,e,_i(n))}function qu(t,e,n,r){return r="function"==typeof r?r:rt,null==t?t:pi(t,e,_i(n),r)}function Yu(t){return null==t?[]:D(t,Pu(t))}function Xu(t){return null==t?[]:D(t,Iu(t))}function Zu(t,e,n){return n===rt&&(n=e,e=rt),n!==rt&&(n=_u(n),n=n===n?n:0),e!==rt&&(e=_u(e),e=e===e?e:0),tr(_u(t),e,n)}function Qu(t,e,n){return e=yu(e),n===rt?(n=e,e=0):n=yu(n),t=_u(t),_r(t,e,n)}function Ju(t,e,n){if(n&&"boolean"!=typeof n&&Mo(t,e,n)&&(e=n=rt),n===rt&&("boolean"==typeof e?(n=e,e=rt):"boolean"==typeof t&&(n=t,t=rt)),t===rt&&e===rt?(t=0,e=1):(t=yu(t),e===rt?(e=t,t=0):e=yu(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=$l();return Vl(t+i*(e-t+On("1e-"+((i+"").length-1))),e)}return Zr(t,e)}function tc(t){return zf(Eu(t).toLowerCase())}function ec(t){return(t=Eu(t))&&t.replace(Ge,Kn).replace(pn,"")}function nc(t,e,n){t=Eu(t),e=di(e);var r=t.length;n=n===rt?r:tr(bu(n),0,r);var i=n;return(n-=e.length)>=0&&t.slice(n,i)==e}function rc(t){return t=Eu(t),t&&Ee.test(t)?t.replace(we,$n):t}function ic(t){return t=Eu(t),t&&je.test(t)?t.replace(Ae,"\\$&"):t}function oc(t,e,n){t=Eu(t),e=bu(e);var r=e?Q(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Qi(Ll(i),n)+t+Qi(Dl(i),n)}function ac(t,e,n){t=Eu(t),e=bu(e);var r=e?Q(t):0;return e&&r<e?t+Qi(e-r,n):t}function sc(t,e,n){t=Eu(t),e=bu(e);var r=e?Q(t):0;return e&&r<e?Qi(e-r,n)+t:t}function uc(t,e,n){return n||null==e?e=0:e&&(e=+e),Kl(Eu(t).replace(Re,""),e||0)}function cc(t,e,n){return e=(n?Mo(t,e,n):e===rt)?1:bu(e),Jr(Eu(t),e)}function lc(){var t=arguments,e=Eu(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function dc(t,e,n){return n&&"number"!=typeof n&&Mo(t,e,n)&&(e=n=rt),(n=n===rt?Lt:n>>>0)?(t=Eu(t),t&&("string"==typeof e||null!=e&&!bf(e))&&!(e=di(e))&&F(t)?xi(J(t),0,n):t.split(e,n)):[]}function fc(t,e,n){return t=Eu(t),n=null==n?0:tr(bu(n),0,t.length),e=di(e),t.slice(n,n+e.length)==e}function hc(t,e,r){var i=n.templateSettings;r&&Mo(t,e,r)&&(e=rt),t=Eu(t),e=Cf({},e,i,ao);var o,a,s=Cf({},e.imports,i.imports,ao),u=Pu(s),c=D(s,u),l=0,d=e.interpolate||qe,f="__p += '",h=il((e.escape||qe).source+"|"+d.source+"|"+(d===Ne?Ue:qe).source+"|"+(e.evaluate||qe).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++_n+"]")+"\n";t.replace(h,function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(l,u).replace(Ye,H),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),f+="';\n";var v=e.variable;v||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(ye,""):f).replace(be,"$1").replace(ge,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var m=Gf(function(){return el(u,p+"return "+f).apply(rt,c)});if(m.source=f,Ys(m))throw m;return m}function pc(t){return Eu(t).toLowerCase()}function vc(t){return Eu(t).toUpperCase()}function mc(t,e,n){if((t=Eu(t))&&(n||e===rt))return t.replace(Me,"");if(!t||!(e=di(e)))return t;var r=J(t),i=J(e);return xi(r,P(r,i),I(r,i)+1).join("")}function yc(t,e,n){if((t=Eu(t))&&(n||e===rt))return t.replace(De,"");if(!t||!(e=di(e)))return t;var r=J(t);return xi(r,0,I(r,J(e))+1).join("")}function bc(t,e,n){if((t=Eu(t))&&(n||e===rt))return t.replace(Re,"");if(!t||!(e=di(e)))return t;var r=J(t);return xi(r,P(r,J(e))).join("")}function gc(t,e){var n=Ct,r=Nt;if(tu(e)){var i="separator"in e?e.separator:i;n="length"in e?bu(e.length):n,r="omission"in e?di(e.omission):r}t=Eu(t);var o=t.length;if(F(t)){var a=J(t);o=a.length}if(n>=o)return t;var s=n-Q(r);if(s<1)return r;var u=a?xi(a,0,s).join(""):t.slice(0,s);if(i===rt)return u+r;if(a&&(s+=u.length-s),bf(i)){if(t.slice(s).search(i)){var c,l=u;for(i.global||(i=il(i.source,Eu(Fe.exec(i))+"g")),i.lastIndex=0;c=i.exec(l);)var d=c.index;u=u.slice(0,d===rt?s:d)}}else if(t.indexOf(di(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r}function _c(t){return t=Eu(t),t&&xe.test(t)?t.replace(_e,zn):t}function wc(t,e,n){return t=Eu(t),e=n?rt:e,e===rt?V(t)?nt(t):g(t):t.match(e)||[]}function xc(t){var e=null==t?0:t.length,n=bo();return t=e?h(t,function(t){if("function"!=typeof t[1])throw new al(at);return[n(t[0]),t[1]]}):[],ti(function(n){for(var r=-1;++r<e;){var i=t[r];if(o(i[0],this,n))return o(i[1],this,n)}})}function Ec(t){return nr(er(t,lt))}function Tc(t){return function(){return t}}function Cc(t,e){return null==t||t!==t?e:t}function Nc(t){return t}function Oc(t){return Lr("function"==typeof t?t:er(t,lt))}function Sc(t){return Ur(er(t,lt))}function kc(t,e){return Fr(t,er(e,lt))}function Ac(t,e,n){var r=Pu(e),i=hr(e,r);null!=n||tu(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=hr(e,Pu(e)));var o=!(tu(n)&&"chain"in n&&!n.chain),a=Zs(t);return s(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Ri(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,p([this.value()],arguments))})}),t}function jc(){return jn._===this&&(jn._=yl),this}function Mc(){}function Rc(t){return t=bu(t),ti(function(e){return Kr(e,t)})}function Dc(t){return Ro(t)?N(Yo(t)):qr(t)}function Lc(t){return function(e){return null==t?rt:pr(t,e)}}function Pc(){return[]}function Ic(){return!1}function Bc(){return{}}function Hc(){return""}function Uc(){return!0}function Fc(t,e){if((t=bu(t))<1||t>Mt)return[];var n=Lt,r=Vl(t,Lt);e=bo(e),t-=Lt;for(var i=j(r,e);++n<t;)e(n);return i}function Vc(t){return hf(t)?h(t,Yo):fu(t)?[t]:Ri(Od(Eu(t)))}function Wc(t){var e=++hl;return Eu(t)+e}function Kc(t){return t&&t.length?sr(t,Nc,yr):rt}function $c(t,e){return t&&t.length?sr(t,bo(e,2),yr):rt}function zc(t){return C(t,Nc)}function Gc(t,e){return C(t,bo(e,2))}function qc(t){return t&&t.length?sr(t,Nc,Br):rt}function Yc(t,e){return t&&t.length?sr(t,bo(e,2),Br):rt}function Xc(t){return t&&t.length?A(t,Nc):0}function Zc(t,e){return t&&t.length?A(t,bo(e,2)):0}e=null==e?jn:Gn.defaults(jn.Object(),e,Gn.pick(jn,gn));var Qc=e.Array,Jc=e.Date,tl=e.Error,el=e.Function,nl=e.Math,rl=e.Object,il=e.RegExp,ol=e.String,al=e.TypeError,sl=Qc.prototype,ul=el.prototype,cl=rl.prototype,ll=e["__core-js_shared__"],dl=ul.toString,fl=cl.hasOwnProperty,hl=0,pl=function(){var t=/[^.]+$/.exec(ll&&ll.keys&&ll.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),vl=cl.toString,ml=dl.call(rl),yl=jn._,bl=il("^"+dl.call(fl).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gl=Dn?e.Buffer:rt,_l=e.Symbol,wl=e.Uint8Array,xl=gl?gl.allocUnsafe:rt,El=$(rl.getPrototypeOf,rl),Tl=rl.create,Cl=cl.propertyIsEnumerable,Nl=sl.splice,Ol=_l?_l.isConcatSpreadable:rt,Sl=_l?_l.iterator:rt,kl=_l?_l.toStringTag:rt,Al=function(){try{var t=wo(rl,"defineProperty");return t({},"",{}),t}catch(t){}}(),jl=e.clearTimeout!==jn.clearTimeout&&e.clearTimeout,Ml=Jc&&Jc.now!==jn.Date.now&&Jc.now,Rl=e.setTimeout!==jn.setTimeout&&e.setTimeout,Dl=nl.ceil,Ll=nl.floor,Pl=rl.getOwnPropertySymbols,Il=gl?gl.isBuffer:rt,Bl=e.isFinite,Hl=sl.join,Ul=$(rl.keys,rl),Fl=nl.max,Vl=nl.min,Wl=Jc.now,Kl=e.parseInt,$l=nl.random,zl=sl.reverse,Gl=wo(e,"DataView"),ql=wo(e,"Map"),Yl=wo(e,"Promise"),Xl=wo(e,"Set"),Zl=wo(e,"WeakMap"),Ql=wo(rl,"create"),Jl=Zl&&new Zl,td={},ed=Xo(Gl),nd=Xo(ql),rd=Xo(Yl),id=Xo(Xl),od=Xo(Zl),ad=_l?_l.prototype:rt,sd=ad?ad.valueOf:rt,ud=ad?ad.toString:rt,cd=function(){function t(){}return function(e){if(!tu(e))return{};if(Tl)return Tl(e);t.prototype=e;var n=new t;return t.prototype=rt,n}}();n.templateSettings={escape:Te,evaluate:Ce,interpolate:Ne,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=cd(r.prototype),i.prototype.constructor=i,b.prototype=cd(r.prototype),b.prototype.constructor=b,et.prototype.clear=Be,et.prototype.delete=Xe,et.prototype.get=Ze,et.prototype.has=Qe,et.prototype.set=Je,tn.prototype.clear=en,tn.prototype.delete=nn,tn.prototype.get=rn,tn.prototype.has=on,tn.prototype.set=an,sn.prototype.clear=un,sn.prototype.delete=cn,sn.prototype.get=ln,sn.prototype.has=dn,sn.prototype.set=fn,vn.prototype.add=vn.prototype.push=mn,vn.prototype.has=yn,bn.prototype.clear=En,bn.prototype.delete=Tn,bn.prototype.get=Cn,bn.prototype.has=Nn,bn.prototype.set=kn;var ld=Hi(dr),dd=Hi(fr,!0),fd=Ui(),hd=Ui(!0),pd=Jl?function(t,e){return Jl.set(t,e),t}:Nc,vd=Al?function(t,e){return Al(t,"toString",{configurable:!0,enumerable:!1,value:Tc(e),writable:!0})}:Nc,md=ti,yd=jl||function(t){return jn.clearTimeout(t)},bd=Xl&&1/q(new Xl([,-0]))[1]==jt?function(t){return new Xl(t)}:Mc,gd=Jl?function(t){return Jl.get(t)}:Mc,_d=Pl?function(t){return null==t?[]:(t=rl(t),l(Pl(t),function(e){return Cl.call(t,e)}))}:Pc,wd=Pl?function(t){for(var e=[];t;)p(e,_d(t)),t=El(t);return e}:Pc,xd=mr;(Gl&&xd(new Gl(new ArrayBuffer(1)))!=se||ql&&xd(new ql)!=qt||Yl&&"[object Promise]"!=xd(Yl.resolve())||Xl&&xd(new Xl)!=te||Zl&&xd(new Zl)!=ie)&&(xd=function(t){var e=mr(t),n=e==Zt?t.constructor:rt,r=n?Xo(n):"";if(r)switch(r){case ed:return se;case nd:return qt;case rd:return"[object Promise]";case id:return te;case od:return ie}return e});var Ed=ll?Zs:Ic,Td=Go(pd),Cd=Rl||function(t,e){return jn.setTimeout(t,e)},Nd=Go(vd),Od=function(t){var e=Os(t,function(t){return n.size===ut&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ke,function(t,n,r,i){e.push(r?i.replace(He,"$1"):n||t)}),e}),Sd=ti(function(t,e){return Ws(t)?or(t,lr(e,1,Ws,!0)):[]}),kd=ti(function(t,e){var n=ya(e);return Ws(n)&&(n=rt),Ws(t)?or(t,lr(e,1,Ws,!0),bo(n,2)):[]}),Ad=ti(function(t,e){var n=ya(e);return Ws(n)&&(n=rt),Ws(t)?or(t,lr(e,1,Ws,!0),rt,n):[]}),jd=ti(function(t){var e=h(t,gi);return e.length&&e[0]===t[0]?wr(e):[]}),Md=ti(function(t){var e=ya(t),n=h(t,gi);return e===ya(n)?e=rt:n.pop(),n.length&&n[0]===t[0]?wr(n,bo(e,2)):[]}),Rd=ti(function(t){var e=ya(t),n=h(t,gi);return e="function"==typeof e?e:rt,e&&n.pop(),n.length&&n[0]===t[0]?wr(n,rt,e):[]}),Dd=ti(_a),Ld=ho(function(t,e){var n=null==t?0:t.length,r=Jn(t,e);return Xr(t,h(e,function(t){return jo(t,n)?+t:t}).sort(ki)),r}),Pd=ti(function(t){return fi(lr(t,1,Ws,!0))}),Id=ti(function(t){var e=ya(t);return Ws(e)&&(e=rt),fi(lr(t,1,Ws,!0),bo(e,2))}),Bd=ti(function(t){var e=ya(t);return e="function"==typeof e?e:rt,fi(lr(t,1,Ws,!0),rt,e)}),Hd=ti(function(t,e){return Ws(t)?or(t,e):[]}),Ud=ti(function(t){return yi(l(t,Ws))}),Fd=ti(function(t){var e=ya(t);return Ws(e)&&(e=rt),yi(l(t,Ws),bo(e,2))}),Vd=ti(function(t){var e=ya(t);return e="function"==typeof e?e:rt,yi(l(t,Ws),rt,e)}),Wd=ti(Va),Kd=ti(function(t){var e=t.length,n=e>1?t[e-1]:rt;return n="function"==typeof n?(t.pop(),n):rt,Wa(t,n)}),$d=ho(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return Jn(e,t)};return!(e>1||this.__actions__.length)&&r instanceof b&&jo(n)?(r=r.slice(n,+n+(e?1:0)),r.__actions__.push({func:qa,args:[o],thisArg:rt}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(rt),t})):this.thru(o)}),zd=Ii(function(t,e,n){fl.call(t,n)?++t[n]:Qn(t,n,1)}),Gd=zi(sa),qd=zi(ua),Yd=Ii(function(t,e,n){fl.call(t,n)?t[n].push(e):Qn(t,n,[e])}),Xd=ti(function(t,e,n){var r=-1,i="function"==typeof e,a=Vs(t)?Qc(t.length):[];return ld(t,function(t){a[++r]=i?o(e,t,n):Er(t,e,n)}),a}),Zd=Ii(function(t,e,n){Qn(t,n,e)}),Qd=Ii(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Jd=ti(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Mo(t,e[0],e[1])?e=[]:n>2&&Mo(e[0],e[1],e[2])&&(e=[e[0]]),$r(t,lr(e,1),[])}),tf=Ml||function(){return jn.Date.now()},ef=ti(function(t,e,n){var r=vt;if(n.length){var i=z(n,yo(ef));r|=_t}return oo(t,r,e,n,i)}),nf=ti(function(t,e,n){var r=vt|mt;if(n.length){var i=z(n,yo(nf));r|=_t}return oo(e,r,t,n,i)}),rf=ti(function(t,e){return ir(t,1,e)}),of=ti(function(t,e,n){return ir(t,_u(e)||0,n)});Os.Cache=sn;var af=md(function(t,e){e=1==e.length&&hf(e[0])?h(e[0],R(bo())):h(lr(e,1),R(bo()));var n=e.length;return ti(function(r){for(var i=-1,a=Vl(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return o(t,this,r)})}),sf=ti(function(t,e){var n=z(e,yo(sf));return oo(t,_t,rt,e,n)}),uf=ti(function(t,e){var n=z(e,yo(uf));return oo(t,wt,rt,e,n)}),cf=ho(function(t,e){return oo(t,Et,rt,rt,rt,e)}),lf=eo(yr),df=eo(function(t,e){return t>=e}),ff=Tr(function(){return arguments}())?Tr:function(t){return eu(t)&&fl.call(t,"callee")&&!Cl.call(t,"callee")},hf=Qc.isArray,pf=In?R(In):Cr,vf=Il||Ic,mf=Bn?R(Bn):Nr,yf=Hn?R(Hn):kr,bf=Un?R(Un):Mr,gf=Fn?R(Fn):Rr,_f=Vn?R(Vn):Dr,wf=eo(Br),xf=eo(function(t,e){return t<=e}),Ef=Bi(function(t,e){if(Io(e)||Vs(e))return void Di(e,Pu(e),t);for(var n in e)fl.call(e,n)&&Wn(t,n,e[n])}),Tf=Bi(function(t,e){Di(e,Iu(e),t)}),Cf=Bi(function(t,e,n,r){Di(e,Iu(e),t,r)}),Nf=Bi(function(t,e,n,r){Di(e,Pu(e),t,r)}),Of=ho(Jn),Sf=ti(function(t,e){t=rl(t);var n=-1,r=e.length,i=r>2?e[2]:rt;for(i&&Mo(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],a=Iu(o),s=-1,u=a.length;++s<u;){var c=a[s],l=t[c];(l===rt||Fs(l,cl[c])&&!fl.call(t,c))&&(t[c]=o[c])}return t}),kf=ti(function(t){return t.push(rt,so),o(Df,rt,t)}),Af=Yi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=vl.call(e)),t[e]=n},Tc(Nc)),jf=Yi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=vl.call(e)),fl.call(t,e)?t[e].push(n):t[e]=[n]},bo),Mf=ti(Er),Rf=Bi(function(t,e,n){Vr(t,e,n)}),Df=Bi(function(t,e,n,r){Vr(t,e,n,r)}),Lf=ho(function(t,e){var n={};if(null==t)return n;var r=!1;e=h(e,function(e){return e=wi(e,t),r||(r=e.length>1),e}),Di(t,vo(t),n),r&&(n=er(n,lt|dt|ft,uo));for(var i=e.length;i--;)hi(n,e[i]);return n}),Pf=ho(function(t,e){return null==t?{}:zr(t,e)}),If=io(Pu),Bf=io(Iu),Hf=Wi(function(t,e,n){return e=e.toLowerCase(),t+(n?tc(e):e)}),Uf=Wi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ff=Wi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Vf=Vi("toLowerCase"),Wf=Wi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Kf=Wi(function(t,e,n){return t+(n?" ":"")+zf(e)}),$f=Wi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),zf=Vi("toUpperCase"),Gf=ti(function(t,e){try{return o(t,rt,e)}catch(t){return Ys(t)?t:new tl(t)}}),qf=ho(function(t,e){return s(e,function(e){e=Yo(e),Qn(t,e,ef(t[e],t))}),t}),Yf=Gi(),Xf=Gi(!0),Zf=ti(function(t,e){return function(n){return Er(n,t,e)}}),Qf=ti(function(t,e){return function(n){return Er(t,n,e)}}),Jf=Zi(h),th=Zi(c),eh=Zi(y),nh=to(),rh=to(!0),ih=Xi(function(t,e){return t+e},0),oh=ro("ceil"),ah=Xi(function(t,e){return t/e},1),sh=ro("floor"),uh=Xi(function(t,e){return t*e},1),ch=ro("round"),lh=Xi(function(t,e){return t-e},0);return n.after=_s,n.ary=ws,n.assign=Ef,n.assignIn=Tf,n.assignInWith=Cf,n.assignWith=Nf,n.at=Of,n.before=xs,n.bind=ef,n.bindAll=qf,n.bindKey=nf,n.castArray=Ls,n.chain=za,n.chunk=Jo,n.compact=ta,n.concat=ea,n.cond=xc,n.conforms=Ec,n.constant=Tc,n.countBy=zd,n.create=Tu,n.curry=Es,n.curryRight=Ts,n.debounce=Cs,n.defaults=Sf,n.defaultsDeep=kf,n.defer=rf,n.delay=of,n.difference=Sd,n.differenceBy=kd,n.differenceWith=Ad,n.drop=na,n.dropRight=ra,n.dropRightWhile=ia,n.dropWhile=oa,n.fill=aa,n.filter=rs,n.flatMap=is,n.flatMapDeep=os,n.flatMapDepth=as,n.flatten=ca,n.flattenDeep=la,n.flattenDepth=da,n.flip=Ns,n.flow=Yf,n.flowRight=Xf,n.fromPairs=fa,n.functions=ju,n.functionsIn=Mu,n.groupBy=Yd,n.initial=va,n.intersection=jd,n.intersectionBy=Md,n.intersectionWith=Rd,n.invert=Af,n.invertBy=jf,n.invokeMap=Xd,n.iteratee=Oc,n.keyBy=Zd,n.keys=Pu,n.keysIn=Iu,n.map=ls,n.mapKeys=Bu,n.mapValues=Hu,n.matches=Sc,n.matchesProperty=kc,n.memoize=Os,n.merge=Rf,n.mergeWith=Df,n.method=Zf,n.methodOf=Qf,n.mixin=Ac,n.negate=Ss,n.nthArg=Rc,n.omit=Lf,n.omitBy=Uu,n.once=ks,n.orderBy=ds,n.over=Jf,n.overArgs=af,n.overEvery=th,n.overSome=eh,n.partial=sf,n.partialRight=uf,n.partition=Qd,n.pick=Pf,n.pickBy=Fu,n.property=Dc,n.propertyOf=Lc,n.pull=Dd,n.pullAll=_a,n.pullAllBy=wa,n.pullAllWith=xa,n.pullAt=Ld,n.range=nh,n.rangeRight=rh,n.rearg=cf,n.reject=ps,n.remove=Ea,n.rest=As,n.reverse=Ta,n.sampleSize=ms,n.set=Wu,n.setWith=Ku,n.shuffle=ys,n.slice=Ca,n.sortBy=Jd,n.sortedUniq=Ma,n.sortedUniqBy=Ra,n.split=dc,n.spread=js,n.tail=Da,n.take=La,n.takeRight=Pa,n.takeRightWhile=Ia,n.takeWhile=Ba,n.tap=Ga,n.throttle=Ms,n.thru=qa,n.toArray=mu,n.toPairs=If,n.toPairsIn=Bf,n.toPath=Vc,n.toPlainObject=wu,n.transform=$u,n.unary=Rs,n.union=Pd,n.unionBy=Id,n.unionWith=Bd,n.uniq=Ha,n.uniqBy=Ua,n.uniqWith=Fa,n.unset=zu,n.unzip=Va,n.unzipWith=Wa,n.update=Gu,n.updateWith=qu,n.values=Yu,n.valuesIn=Xu,n.without=Hd,n.words=wc,n.wrap=Ds,n.xor=Ud,n.xorBy=Fd,n.xorWith=Vd,n.zip=Wd,n.zipObject=Ka,n.zipObjectDeep=$a,n.zipWith=Kd,n.entries=If,n.entriesIn=Bf,n.extend=Tf,n.extendWith=Cf,Ac(n,n),n.add=ih,n.attempt=Gf,n.camelCase=Hf,n.capitalize=tc,n.ceil=oh,n.clamp=Zu,n.clone=Ps,n.cloneDeep=Bs,n.cloneDeepWith=Hs,n.cloneWith=Is,n.conformsTo=Us,n.deburr=ec,n.defaultTo=Cc,n.divide=ah,n.endsWith=nc,n.eq=Fs,n.escape=rc,n.escapeRegExp=ic,n.every=ns,n.find=Gd,n.findIndex=sa,n.findKey=Cu,n.findLast=qd,n.findLastIndex=ua,n.findLastKey=Nu,n.floor=sh,n.forEach=ss,n.forEachRight=us,n.forIn=Ou,n.forInRight=Su,n.forOwn=ku,n.forOwnRight=Au,n.get=Ru,n.gt=lf,n.gte=df,n.has=Du,n.hasIn=Lu,n.head=ha,n.identity=Nc,n.includes=cs,n.indexOf=pa,n.inRange=Qu,n.invoke=Mf,n.isArguments=ff,n.isArray=hf,n.isArrayBuffer=pf,n.isArrayLike=Vs,n.isArrayLikeObject=Ws,n.isBoolean=Ks,n.isBuffer=vf,n.isDate=mf,n.isElement=$s,n.isEmpty=zs,n.isEqual=Gs,n.isEqualWith=qs,n.isError=Ys,n.isFinite=Xs,n.isFunction=Zs,n.isInteger=Qs,n.isLength=Js,n.isMap=yf,n.isMatch=nu,n.isMatchWith=ru,n.isNaN=iu,n.isNative=ou,n.isNil=su,n.isNull=au,n.isNumber=uu,n.isObject=tu,n.isObjectLike=eu,n.isPlainObject=cu,n.isRegExp=bf,n.isSafeInteger=lu,n.isSet=gf,n.isString=du,n.isSymbol=fu,n.isTypedArray=_f,n.isUndefined=hu,n.isWeakMap=pu,n.isWeakSet=vu,n.join=ma,n.kebabCase=Uf,n.last=ya,n.lastIndexOf=ba,n.lowerCase=Ff,n.lowerFirst=Vf,n.lt=wf,n.lte=xf,n.max=Kc,n.maxBy=$c,n.mean=zc,n.meanBy=Gc,n.min=qc,n.minBy=Yc,n.stubArray=Pc,n.stubFalse=Ic,n.stubObject=Bc,n.stubString=Hc,n.stubTrue=Uc,n.multiply=uh,n.nth=ga,n.noConflict=jc,n.noop=Mc,n.now=tf,n.pad=oc,n.padEnd=ac,n.padStart=sc,n.parseInt=uc,n.random=Ju,n.reduce=fs,n.reduceRight=hs,n.repeat=cc,n.replace=lc,n.result=Vu,n.round=ch,n.runInContext=t,n.sample=vs,n.size=bs,n.snakeCase=Wf,n.some=gs,n.sortedIndex=Na,n.sortedIndexBy=Oa,n.sortedIndexOf=Sa,n.sortedLastIndex=ka,n.sortedLastIndexBy=Aa,n.sortedLastIndexOf=ja,n.startCase=Kf,n.startsWith=fc,n.subtract=lh,n.sum=Xc,n.sumBy=Zc,n.template=hc,n.times=Fc,n.toFinite=yu,n.toInteger=bu,n.toLength=gu,n.toLower=pc,n.toNumber=_u,n.toSafeInteger=xu,n.toString=Eu,n.toUpper=vc,n.trim=mc,n.trimEnd=yc,n.trimStart=bc,n.truncate=gc,n.unescape=_c,n.uniqueId=Wc,n.upperCase=$f,n.upperFirst=zf,n.each=ss,n.eachRight=us,n.first=ha,Ac(n,function(){var t={};return dr(n,function(e,r){fl.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION="4.17.10",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),s(["drop","take"],function(t,e){b.prototype[t]=function(n){n=n===rt?1:Fl(bu(n),0);var r=this.__filtered__&&!e?new b(this):this.clone();return r.__filtered__?r.__takeCount__=Vl(n,r.__takeCount__):r.__views__.push({size:Vl(n,Lt),type:t+(r.__dir__<0?"Right":"")}),r},b.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),s(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==kt||3==n;b.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:bo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),s(["head","last"],function(t,e){var n="take"+(e?"Right":"");b.prototype[t]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");b.prototype[t]=function(){return this.__filtered__?new b(this):this[n](1)}}),b.prototype.compact=function(){return this.filter(Nc)},b.prototype.find=function(t){return this.filter(t).head()},b.prototype.findLast=function(t){return this.reverse().find(t)},b.prototype.invokeMap=ti(function(t,e){return"function"==typeof t?new b(this):this.map(function(n){return Er(n,t,e)})}),b.prototype.reject=function(t){return this.filter(Ss(bo(t)))},b.prototype.slice=function(t,e){t=bu(t);var n=this;return n.__filtered__&&(t>0||e<0)?new b(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==rt&&(e=bu(e),n=e<0?n.dropRight(-e):n.take(e-t)),n)},b.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},b.prototype.toArray=function(){return this.take(Lt)},dr(b.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),o=/^(?:head|last)$/.test(e),a=n[o?"take"+("last"==e?"Right":""):e],s=o||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,u=o?[1]:arguments,c=e instanceof b,l=u[0],d=c||hf(e),f=function(t){var e=a.apply(n,p([t],u));return o&&h?e[0]:e};d&&r&&"function"==typeof l&&1!=l.length&&(c=d=!1);var h=this.__chain__,v=!!this.__actions__.length,m=s&&!h,y=c&&!v;if(!s&&d){e=y?e:new b(this);var g=t.apply(e,u);return g.__actions__.push({func:qa,args:[f],thisArg:rt}),new i(g,h)}return m&&y?t.apply(this,u):(g=this.thru(f),m?o?g.value()[0]:g.value():g)})}),s(["pop","push","shift","sort","splice","unshift"],function(t){var e=sl[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(hf(n)?n:[],t)}return this[r](function(n){return e.apply(hf(n)?n:[],t)})}}),dr(b.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"";(td[i]||(td[i]=[])).push({name:e,func:r})}}),td[qi(rt,mt).name]=[{name:"wrapper",func:rt}],b.prototype.clone=O,b.prototype.reverse=X,b.prototype.value=tt,n.prototype.at=$d,n.prototype.chain=Ya,n.prototype.commit=Xa,n.prototype.next=Za,n.prototype.plant=Ja,n.prototype.reverse=ts,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=es,n.prototype.first=n.prototype.head,Sl&&(n.prototype[Sl]=Qa),n}();jn._=Gn,(i=function(){return Gn}.call(e,n,e,r))!==rt&&(r.exports=i)}).call(this)}).call(e,n(254),n(255)(t))},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(7),n(5),n(23),n(27),n(258)],void 0!==(i=function(t,e,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),r=a(r),i=a(i);var s=function(){function t(t,e,i,o,a,s,u){var c=this;this.dismissed=!1;var l=r.htmlToElements('<div class="wed-typeahead-popup"><input class="typeahead form-control" type="text"><span class="spinner"><i class="fa fa-spinner fa-spin"></i></span></div>',t)[0],d=l.firstElementChild;d.setAttribute("placeholder",a),this.taWrapper=l,this.dismissCallback=u,this.backdrop=document.createElement("div"),this.backdrop.className="wed-typeahead-popup-backdrop",n.default(this.backdrop).click(function(){return c.dismiss(),!1}),l.style.width=o+"px",l.style.left=e+"px",l.style.top=i+"px";var f=this.$ta=n.default(d),h=[s.options];null!=s.datasets&&s.datasets.length>0&&(h=h.concat(s.datasets)),f.typeahead.apply(f,h),f.on("keydown",this._keydownHandler.bind(this)),f.on("typeahead:selected",this._selectedHandler.bind(this));var p=t.body;p.insertBefore(l,p.firstChild),p.insertBefore(this.backdrop,p.firstChild);var v=l.offsetWidth,m=t.defaultView.innerWidth;l.style.left=Math.max(0,Math.min(e,m-v))+"px",l.style.maxWidth=m+"px";var y=t.defaultView.innerHeight,b=y-i;l.style.maxHeight=b+"px";var g=l.getElementsByClassName("tt-menu")[0],_=n.default(g),w=g.style.display;g.style.display="block";var x=5*Number(_.css("line-height").replace("px","")),E=g.getBoundingClientRect(),T=y-E.top;T<x&&(i-=x-T,T=x,l.style.top=i+"px"),g.style.maxHeight=T+"px",g.style.display=w,_.off("mouseenter.tt",".tt-suggestion"),_.off("mouseleave.tt",".tt-suggestion"),_.on("click",!1),d.focus();var C=n.default.data(d,"ttTypeahead");C.isActivated=!0,C.input.off("blurred"),C._onBlurred=function(){this.isActivated=!1},C.input.onSync("blurred",C._onBlurred,C)}return t.prototype.dismiss=function(t){if(!this.dismissed){var e=this.taWrapper;void 0!==e&&null!==e.parentNode&&e.parentNode.removeChild(e);var n=this.backdrop;void 0!==n&&null!==n.parentNode&&n.parentNode.removeChild(n),void 0!==this.dismissCallback&&this.dismissCallback(t),this.dismissed=!0}},t.prototype._keydownHandler=function(t){if(i.ESCAPE.matchesEvent(t))return this.dismiss(),!1},t.prototype._selectedHandler=function(t,e){this.dismiss(e)},t.prototype.hideSpinner=function(){this.taWrapper.getElementsByClassName("spinner")[0].style.display="none"},t.prototype.setValue=function(t){this.$ta.typeahead("val",t)},t}();e.TypeaheadPopup=s}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.el=t}return t.prototype.clear=function(){for(var t=this.el;null!==t.lastChild;)t.removeChild(t.lastChild)},t.prototype.append=function(t){this.el.appendChild(t)},t}();e.Layer=n}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(7),n(115),n(27)],void 0!==(i=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var i=function(){function t(t){var e=this;t=null!=t?t:{};var i=this._$dom=n.default('<div class="modal" style="position: absolute" tabindex="1">  <div class="modal-dialog">    <div class="modal-content">      <div class="modal-header">        <button type="button" class="close" data-dismiss="modal"          aria-hidden="true">&times;</button>        <h3 class="modal-title">Untitled</h3>      </div>      <div class="modal-body">        <p>No body.</p>      </div>      <div class="modal-footer">      </div>    </div>  </div></div>');this._$header=i.find(".modal-header"),this._$body=i.find(".modal-body"),this._$footer=i.find(".modal-footer"),i.on("click",".btn",function(t){return e._$clicked=n.default(t.currentTarget),!0}),i.on("shown.bs.modal.modal",this._handleShown.bind(this)),t.resizable&&(this._$body[0].style.overflow="auto",r.makeResizable(i)),t.draggable&&r.makeDraggable(i)}return t.prototype.getTopLevel=function(){return this._$dom},t.prototype.setTitle=function(t){var e=this._$header.find("h3");e.empty(),e.append(t)},t.prototype.setBody=function(t){this._$body.empty(),this._$body.append(t)},t.prototype.setFooter=function(t){this._$footer.empty(),this._$footer.append(t)},t.prototype.addButton=function(t,e){void 0===e&&(e=!1);var r=this._$dom[0].ownerDocument.createElement("a");return r.href="#",r.className="btn",r.setAttribute("data-dismiss","modal"),r.textContent=t,r.classList.add(e?"btn-primary":"btn-default"),this._$footer.append(r),n.default(r)},t.prototype.addOkCancel=function(){return[this.addButton("Ok",!0),this.addButton("Cancel")]},t.prototype.addYesNo=function(){return[this.addButton("Yes",!0),this.addButton("No")]},t.prototype.getPrimary=function(){return this._$footer.find(".btn-primary")},t.prototype.modal=function(t){this._$clicked=void 0,void 0!==t&&this._$dom.one("hidden.bs.modal.modal",t),this._$dom.modal()},t.prototype.getClicked=function(){return this._$clicked},t.prototype.getClickedAsText=function(){if(void 0!==this._$clicked)return this._$clicked.text()},t.prototype._handleShown=function(){var t=this._$dom[0].ownerDocument.defaultView,e=t.innerHeight,n=this._$dom.find(".modal-dialog")[0],r=n.getBoundingClientRect(),i=window.getComputedStyle(n),o=-r.top+(e-r.height)-parseInt(i.marginBottom),a=r.height+o;n.style.maxHeight=a+"px",this._$dom.find(".modal-content")[0].style.maxHeight=a+"px"},t}();e.Modal=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(7),n(27)],void 0!==(i=function(t,e,n){"use strict";function r(t){var e=t.target,r=n.default.data(e,"bs.tooltip");n.default.data(r.tip()[0],"wed-tooltip-for",e)}function i(t,e){t.tooltip(e),t[0].classList.add("wed-has-tooltip"),t.on("show.bs.tooltip",r)}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),e.tooltip=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(265)],void 0!==(i=function(t,e,n){"use strict";function r(){f.show()}function i(t){return t instanceof h?t:(d.fatal("Unhandled exception",t),"undefined"!=typeof console&&(console.log(t),console.log(t.stack)),new h(t))}function a(t){throw i(t)}function s(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return t.apply(this,arguments)}catch(t){a(t)}}}function u(t,e){var r=new n.AjaxAppender(t);r.setThreshold(n.Level.ALL);var i=new n.XmlLayout;return r.setLayout(i),void 0!==e&&Object.keys(e).forEach(function(t){r.addHeader(t,e[t])}),l.addAppender(r),d.info("Ajax appender initialized"),r}function c(t){t.sendAll(),l.removeAppender(t)}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),n.setShowStackTraces(!0);var l=n.getLogger("wed");l.setLevel(n.Level.ALL);var d=n.getLogger("wed.common");d.setLevel(n.Level.ALL);var f=new n.PopUpAppender(!0);f.setThreshold(n.Level.ERROR),f.setInitiallyMinimized(!0),f.setNewestMessageAtTop(!0),d.addAppender(f),e.trace=d.trace.bind(d),e.debug=d.debug.bind(d),e.info=d.info.bind(d),e.warn=d.warn.bind(d),e.error=d.error.bind(d),e.fatal=d.fatal.bind(d),e.showPopup=r;var h=function(){function t(t){this.original=t}return t}();e.Handled=h,e.unhandled=i,e.handle=a,e.wrap=s,e.addURL=u,e.removeAppender=c}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(274),n(75),n(275),n(17)],void 0!==(i=function(t,e,n,r,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r=o(r),s=a(s);var u=window.require,c=function(){function t(t){t=r.default({},t),this.options=t;var e=null!=t.bluejaxOptions?t.bluejaxOptions:{tries:3,delay:100,diagnose:{on:!0,knownServers:["http://www.google.com/","http://www.cloudfront.com/"]}},n=i.make(e);this.ajax=n.ajax,this.ajax$=n.ajax$}return t.prototype.resolve=function(t){var e=this;return Promise.resolve().then(function(){var r=t.indexOf("://");if(-1===r)return e.ajax({url:t,dataType:"text"});var i=t.substr(0,r);if("indexeddb"===i){var o=t.substr(r+3),a=o.split("/"),s=a[0],u=a[1],c=a[2],l=a[3],d=a[4],f=a[5];if("v1"!==s)throw new Error("unsupported version number: "+s);switch(l){case"string":break;case"number":d=Number(d);break;default:throw new Error("unknown type: "+l)}var h=new n.Dexie(u);return h.open().then(function(){return h.table(c).get(d)}).then(function(e){if(null==e)throw Error("cannot resolve key from: "+t);if(void 0===f)return e;if(!(f in e))throw Error("cannot resolve property in the record of: "+t);return e[f]})}throw new Error("unknown scheme: "+i)})},t.prototype.resolveToString=function(t){return this.resolve(t).then(function(t){return"string"==typeof t?t:t instanceof File?s.readFile(t):String(t)})},t.prototype.resolveModules=function(t){return Promise.resolve().then(function(){return t instanceof Array||(t=[t]),new Promise(function(e,n){u(t,function(){e(Array.prototype.slice.call(arguments))},n)})})},t}();e.Runtime=c}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(19),n(22),n(277)],void 0!==(i=function(t,e,n,r,i){"use strict";function a(t){t=Math.round(t/1e3);var e="moments ago";return t>0&&(e=" ≈ ",e+=t>86400?Math.round(t/8640)/10+"d":t>3600?Math.round(t/360)/10+"h":t>60?Math.round(t/6)/10+"m":t+"s",e+=" ago"),e}Object.defineProperty(e,"__esModule",{value:!0}),r=o(r),i=o(i);var s;!function(t){t[t.AUTO=1]="AUTO",t[t.MANUAL=2]="MANUAL"}(s=e.SaveKind||(e.SaveKind={}));var u=function(){function t(t,e,r,i,o){var a=this;this.runtime=t,this.version=e,this.dataUpdater=r,this.dataTree=i,this.options=o,this.initialized=!1,this.failed=!1,this.currentGeneration=0,this.savedGeneration=0,this.autosaveInterval=0,r.events.subscribe(function(t){"Changed"===t.name&&(a.lastModification=Date.now(),a.savedGeneration===a.currentGeneration&&(a.currentGeneration++,a._events.next({name:"Changed"})))}),this._boundAutosave=this._autosave.bind(this),this._events=new n.Subject,this.events=this._events.asObservable(),void 0!==o.autosave&&this.setAutosaveInterval(1e3*o.autosave)}return t.prototype.save=function(){return this._save(!1)},t.prototype.getData=function(){var t=this.dataTree.firstChild;if(r.MSIE)return i.serialize(t);var e=t.outerHTML;return r.EDGE?e.replace(/<([^\/<>]+) \/>/g,"<$1/>"):e},t.prototype._saveSuccess=function(t,e){this.savedGeneration=e,this.lastSave=Date.now(),this.lastSaveKind=t?s.AUTO:s.MANUAL,this._events.next(t?{name:"Autosaved"}:{name:"Saved"}),this.setAutosaveInterval(this.autosaveInterval)},t.prototype._fail=function(t){this.failed=!0,void 0!==t&&this._events.next({name:"Failed",error:t})},t.prototype._autosave=function(){var t=this;this.autosaveTimeout=void 0;var e=function(){t.setAutosaveInterval(t.autosaveInterval)};this.currentGeneration!==this.savedGeneration?this._save(!0).then(e):e()},t.prototype.setAutosaveInterval=function(t){this.autosaveInterval=t;var e=this.autosaveTimeout;void 0!==e&&clearTimeout(e),this.autosaveTimeout=0!==t?setTimeout(this._boundAutosave,t):void 0},t.prototype.recover=function(){var t=this;return Promise.resolve().then(function(){return!t.initialized||t.failed?Promise.resolve(void 0):t._recover()})},t.prototype.getModifiedWhen=function(){return this.savedGeneration!==this.currentGeneration&&void 0!==this.lastModification&&a(Date.now()-this.lastModification)},t.prototype.getSavedWhen=function(){if(void 0!==this.lastSave)return a(Date.now()-this.lastSave)},t.prototype.getLastSaveKind=function(){return this.lastSaveKind},t}();e.Saver=u}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t};r=[n,e,n(19),n(104)],void 0!==(i=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){void 0===e&&(e={}),this.task=t,this._timeout=0,this._maxTimespan=100,this._boundWrapper=this._workWrapper.bind(this);for(var r=["timeout","maxTimespan"],i=0,o=r;i<o.length;i++){var a=o[i],s=e[a];if(void 0!==s){if(s<0)throw new Error("the value for "+a+" cannot be negative");this["_"+a]=e[a]}}this._state=new n.BehaviorSubject({running:!1,completed:!1,terminated:!1}),this.state=this._state.asObservable()}return Object.defineProperty(t.prototype,"running",{get:function(){return this._state.value.running},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"completed",{get:function(){return this._state.value.completed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"terminated",{get:function(){return this._state.value.terminated},enumerable:!0,configurable:!0}),t.prototype.onCompleted=function(){return this.state.pipe(r.first(function(t){return t.completed})).toPromise()},t.prototype._stateFieldChange=function(t,e){var n=this._state.value,r=o({},this._state.value);r[t]=e,r[t]!==n[t]&&this._state.next(r)},t.prototype._setTimeoutId=function(t){this._timeoutId=t,this._stateFieldChange("running",void 0!==this._timeoutId)},t.prototype.start=function(){this.reset(),this.resume()},t.prototype.reset=function(){this._stateFieldChange("completed",!1),this.task.reset(this)},t.prototype.resume=function(){this.completed||(void 0!==this._timeoutId&&this.stop(),this._setTimeoutId(setTimeout(this._boundWrapper,0)))},t.prototype._workWrapper=function(){this._work()?this._setTimeoutId(setTimeout(this._boundWrapper,this._timeout)):this._stateFieldChange("completed",!0)},t.prototype._work=function(){for(var t=Date.now();;){if(this._maxTimespan>0&&Date.now()-t>=this._maxTimespan)return!0;if(!this.task.cycle(this))return!1}},t.prototype.stop=function(){void 0!==this._timeoutId&&clearTimeout(this._timeoutId),this._setTimeoutId(void 0)},t.prototype.terminate=function(){this.stop(),this._stateFieldChange("terminated",!0),this._state.complete()},t}();e.TaskRunner=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(70),n(13),n(6)],void 0!==(i=function(t,e,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r=a(r),e.INCOMPLETE=n.WorkingState.INCOMPLETE,e.WORKING=n.WorkingState.WORKING,e.INVALID=n.WorkingState.INVALID,e.VALID=n.WorkingState.VALID;var s=function(t){function e(e,n,r){var i=t.call(this,e,n,{timeout:0,maxTimespan:100})||this;return i.modeValidators=r,i}return o(e,t),e.prototype._runDocumentValidation=function(){for(var t=0,e=this.modeValidators;t<e.length;t++)for(var n=e[t],r=n.validateDocument(),i=0,o=r;i<o.length;i++){var a=o[i];this._processError(a)}},e.prototype.possibleAt=function(e,n,i){if(void 0===n&&(n=!1),void 0===i&&(i=!1),e instanceof r.DLoc){if("boolean"!=typeof n)throw new Error("2nd parameter must be boolean");i=n,n=e.offset,e=e.node}if("number"!=typeof n)throw new Error("index must be a number");return t.prototype.possibleAt.call(this,e,n,i)},e.prototype.speculativelyValidate=function(e,n,o){if(e instanceof r.DLoc){if(!(i.isNode(n)||n instanceof Array))throw new Error("2nd argument must be a Node or an array of Nodes");o=n,n=e.offset,e=e.node}if("number"!=typeof n)throw new Error("index must be a number");if(void 0===o)throw new Error("toParse must be defined");return t.prototype.speculativelyValidate.call(this,e,n,o)},e.prototype.speculativelyValidateFragment=function(e,n,o){if(e instanceof r.DLoc){if("number"==typeof n||!i.isElement(n))throw new Error("toParse is not an element");o=n,n=e.offset,e=e.node}if("number"!=typeof n)throw new Error("index must be a number");if(void 0===o)throw new Error("toParse must be defined");return t.prototype.speculativelyValidateFragment.call(this,e,n,o)},e}(n.Validator);e.Validator=s}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;!function(n,o){function a(t,e,n){if(Array.prototype.map)return Array.prototype.map.call(t,e,n);for(var r=new Array(t.length),i=0,o=t.length;i<o;i++)r[i]=e.call(n,t[i],i,t);return r}function s(t){return{newPos:t.newPos,components:t.components.slice(0)}}function u(t){for(var e=[],n=0;n<t.length;n++)t[n]&&e.push(t[n]);return e}function c(t){var e=t;return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/"/g,"&quot;")}function l(t,e,n){e=e||[],n=n||[];var r;for(r=0;r<e.length;r+=1)if(e[r]===t)return n[r];var i;if("[object Array]"===h.call(t)){for(e.push(t),i=new Array(t.length),n.push(i),r=0;r<t.length;r+=1)i[r]=l(t[r],e,n);e.pop(),n.pop()}else if("object"==typeof t&&null!==t){e.push(t),i={},n.push(i);var o,a=[];for(o in t)a.push(o);for(a.sort(),r=0;r<a.length;r+=1)o=a[r],i[o]=l(t[o],e,n);e.pop(),n.pop()}else i=t;return i}function d(t,e,n,r){for(var i=0,o=t.length,s=0,u=0;i<o;i++){var c=t[i];if(c.removed){if(c.value=n.slice(u,u+c.count).join(""),u+=c.count,i&&t[i-1].added){var l=t[i-1];t[i-1]=t[i],t[i]=l}}else{if(!c.added&&r){var d=e.slice(s,s+c.count);d=a(d,function(t,e){var r=n[u+e];return r.length>t.length?r:t}),c.value=d.join("")}else c.value=e.slice(s,s+c.count).join("");s+=c.count,c.added||(u+=c.count)}}return t}function f(t){this.ignoreWhitespace=t}var h=Object.prototype.toString;f.prototype={diff:function(t,e,n){function r(t){return n?(setTimeout(function(){n(o,t)},0),!0):t}function i(){for(var n=-1*l;n<=l;n+=2){var i,f=h[n-1],p=h[n+1],v=(p?p.newPos:0)-n;f&&(h[n-1]=o);var m=f&&f.newPos+1<u,y=p&&0<=v&&v<c;if(m||y){if(!m||y&&f.newPos<p.newPos?(i=s(p),a.pushComponent(i.components,o,!0)):(i=f,i.newPos++,a.pushComponent(i.components,!0,o)),v=a.extractCommon(i,e,t,n),i.newPos+1>=u&&v+1>=c)return r(d(i.components,e,t,a.useLongestToken));h[n]=i}else h[n]=o}l++}var a=this;if(e===t)return r([{value:e}]);if(!e)return r([{value:t,removed:!0}]);if(!t)return r([{value:e,added:!0}]);e=this.tokenize(e),t=this.tokenize(t);var u=e.length,c=t.length,l=1,f=u+c,h=[{newPos:-1,components:[]}],p=this.extractCommon(h[0],e,t,0);if(h[0].newPos+1>=u&&p+1>=c)return r([{value:e.join("")}]);if(n)!function t(){setTimeout(function(){if(l>f)return n();i()||t()},0)}();else for(;l<=f;){var v=i();if(v)return v}},pushComponent:function(t,e,n){var r=t[t.length-1];r&&r.added===e&&r.removed===n?t[t.length-1]={count:r.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,r){for(var i=e.length,o=n.length,a=t.newPos,s=a-r,u=0;a+1<i&&s+1<o&&this.equals(e[a+1],n[s+1]);)a++,s++,u++;return u&&t.components.push({count:u}),t.newPos=a,s},equals:function(t,e){var n=/\S/;return t===e||this.ignoreWhitespace&&!n.test(t)&&!n.test(e)},tokenize:function(t){return t.split("")}};var p=new f,v=new f(!0),m=new f;v.tokenize=m.tokenize=function(t){return u(t.split(/(\s+|\b)/))};var y=new f(!0);y.tokenize=function(t){return u(t.split(/([{}:;,]|\s+)/))};var b=new f,g=new f;g.ignoreTrim=!0,b.tokenize=g.tokenize=function(t){for(var e=[],n=t.split(/^/m),r=0;r<n.length;r++){var i=n[r],o=n[r-1],a=o&&o[o.length-1];"\n"===i&&"\r"===a?e[e.length-1]=e[e.length-1].slice(0,-1)+"\r\n":(this.ignoreTrim&&(i=i.trim(),r<n.length-1&&(i+="\n")),e.push(i))}return e};var _=new f;_.tokenize=function(t){var e=[],n=t.split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(var r=0;r<n.length;r++){var i=n[r];r%2?e[e.length-1]+=i:e.push(i)}return e};var w=new f;w.tokenize=function(t){return u(t.split(/(\S.+?[.!?])(?=\s+|$)/))};var x=new f;x.useLongestToken=!0,x.tokenize=b.tokenize,x.equals=function(t,e){return b.equals(t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};var E={Diff:f,diffChars:function(t,e,n){return p.diff(t,e,n)},diffWords:function(t,e,n){return v.diff(t,e,n)},diffWordsWithSpace:function(t,e,n){return m.diff(t,e,n)},diffLines:function(t,e,n){return b.diff(t,e,n)},diffTrimmedLines:function(t,e,n){return g.diff(t,e,n)},diffSentences:function(t,e,n){return w.diff(t,e,n)},diffCss:function(t,e,n){return y.diff(t,e,n)},diffJson:function(t,e,n){return x.diff("string"==typeof t?t:JSON.stringify(l(t),o,"  "),"string"==typeof e?e:JSON.stringify(l(e),o,"  "),n)},createTwoFilesPatch:function(t,e,n,r,i,o){function s(t){return a(t,function(t){return" "+t})}function u(t,e,n){var r=l[l.length-2],i=e===l.length-2,o=e===l.length-3&&n.added!==r.added;/\n$/.test(n.value)||!i&&!o||t.push("\\ No newline at end of file")}var c=[];t==e&&c.push("Index: "+t),c.push("==================================================================="),c.push("--- "+t+(void 0===i?"":"\t"+i)),c.push("+++ "+e+(void 0===o?"":"\t"+o));var l=_.diff(n,r);l.push({value:"",lines:[]});for(var d=0,f=0,h=[],p=1,v=1,m=0;m<l.length;m++){var y=l[m],b=y.lines||y.value.replace(/\n$/,"").split("\n");if(y.lines=b,y.added||y.removed){if(!d){var g=l[m-1];d=p,f=v,g&&(h=s(g.lines.slice(-4)),d-=h.length,f-=h.length)}h.push.apply(h,a(b,function(t){return(y.added?"+":"-")+t})),u(h,m,y),y.added?v+=b.length:p+=b.length}else{if(d)if(b.length<=8&&m<l.length-2)h.push.apply(h,s(b));else{var w=Math.min(b.length,4);c.push("@@ -"+d+","+(p-d+w)+" +"+f+","+(v-f+w)+" @@"),c.push.apply(c,h),c.push.apply(c,s(b.slice(0,w))),b.length<=4&&u(c,m,y),d=0,f=0,h=[]}p+=b.length,v+=b.length}}return c.join("\n")+"\n"},createPatch:function(t,e,n,r,i){return E.createTwoFilesPatch(t,t,e,n,r,i)},applyPatch:function(t,e){for(var n=e.split("\n"),r=[],i=0,o=!1,a=!1;i<n.length&&!/^@@/.test(n[i]);)i++;for(;i<n.length;i++)if("@"===n[i][0]){var s=n[i].split(/@@ -(\d+),(\d+) \+(\d+),(\d+) @@/);r.unshift({start:s[3],oldlength:+s[2],removed:[],newlength:s[4],added:[]})}else"+"===n[i][0]?r[0].added.push(n[i].substr(1)):"-"===n[i][0]?r[0].removed.push(n[i].substr(1)):" "===n[i][0]?(r[0].added.push(n[i].substr(1)),r[0].removed.push(n[i].substr(1))):"\\"===n[i][0]&&("+"===n[i-1][0]?o=!0:"-"===n[i-1][0]&&(a=!0));var u=t.split("\n");for(i=r.length-1;i>=0;i--){for(var c=r[i],l=0;l<c.oldlength;l++)if(u[c.start-1+l]!==c.removed[l])return!1;Array.prototype.splice.apply(u,[c.start-1,c.oldlength].concat(c.added))}if(o)for(;!u[u.length-1];)u.pop();else a&&u.push("");return u.join("\n")},convertChangesToXML:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r.added?e.push("<ins>"):r.removed&&e.push("<del>"),e.push(c(r.value)),r.added?e.push("</ins>"):r.removed&&e.push("</del>")}return e.join("")},convertChangesToDMP:function(t){for(var e,n,r=[],i=0;i<t.length;i++)e=t[i],n=e.added?1:e.removed?-1:0,r.push([n,e.value]);return r},canonicalize:l};void 0!==t&&t.exports?t.exports=E:(r=[],(i=function(){return E}.apply(e,r))!==o&&(t.exports=i))}()},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(7),n(19),n(5)],void 0!==(i=function(t,e,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var a=function(){function t(t){var e=this;this.el=t,this._events=new r.Subject,this.events=this._events.asObservable(),n.default(t).on("scroll",function(){e._events.next({scroller:e})})}return Object.defineProperty(t.prototype,"scrollTop",{get:function(){return this.el.scrollTop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollLeft",{get:function(){return this.el.scrollLeft},enumerable:!0,configurable:!0}),t.prototype.getBoundingClientRect=function(){return this.el.getBoundingClientRect()},t.prototype.coerceHeight=function(t){this.el.style.height=t+"px"},t.prototype.isPointInside=function(t,e){return i.pointInContents(this.el,t,e)},t.prototype.scrollIntoView=function(t,e,n,r){var i=this.el,o=i.scrollTop,a=i.clientHeight,s=o+a;(e<o||r>s)&&(o=e<o?e:r-a,i.scrollTop=o);var u=i.scrollLeft,c=i.clientWidth,l=u+c;(t<u||n>l)&&(u=t<u?t:n-c,i.scrollLeft=u);var d=i.getBoundingClientRect();t=t-u+d.left,n=n-u+d.left,e=e-o+d.top,r=r-o+d.top;var f=i.ownerDocument,h=f.body.scrollHeight,p=f.body.scrollWidth,v=0;(e<0||r>h)&&(v=e<0?e:r);var m=0;(t<0||n>p)&&(m=t<0?t:n),f.defaultView.scrollBy(m,v)},t}();e.Scroller=a}.apply(e,r))&&(t.exports=i)},function(t,e,n){"use strict";function r(t,e,n){if(t){if(t instanceof i.a)return t;if(t[o.a])return t[o.a]()}return t||e||n?new i.a(t,e,n):new i.a(a.a)}e.a=r;var i=n(1),o=n(55),a=n(79)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(29),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(8),o=function(t){function e(e,n){return t.call(this)||this}return r.a(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(30),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(135),o=n(29),a=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=i.a.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(i.a.clearImmediate(n),e.scheduled=void 0)},e}(o.a)},function(t,e,n){"use strict";function r(t){var e=o[t];e&&e()}n.d(e,"a",function(){return a});var i=1,o={},a={setImmediate:function(t){var e=i++;return o[e]=t,Promise.resolve().then(function(){return r(e)}),e},clearImmediate:function(t){delete o[t]}}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(30),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(138),i=n(139),o=new i.a(r.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(29),o=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return r.a(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame(function(){return e.flush(null)})))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(i.a)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(30),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.a(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(i.a)},function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return s});var r=n(0),i=n(29),o=n(30),a=function(t){function e(e,n){void 0===e&&(e=s),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,function(){return r.frame})||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return r.a(e,t),e.prototype.flush=function(){for(var t,e,n=this,r=n.actions,i=n.maxFrames;(e=r.shift())&&(this.frame=e.delay)<=i&&!(t=e.execute(e.state,e.delay)););if(t){for(;e=r.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(o.a),s=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return r.a(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(i.a)},function(t,e,n){"use strict";function r(t){return!!t&&(t instanceof i.a||"function"==typeof t.lift&&"function"==typeof t.subscribe)}e.a=r;var i=n(2)},function(t,e,n){"use strict";function r(t,e,n){if(e){if(!Object(l.a)(e))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r(t,n).apply(void 0,i).pipe(Object(u.a)(function(t){return Object(c.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o,u=this,c={context:u,subject:o,callbackFunc:t,scheduler:n};return new a.a(function(r){if(n){var a={args:e,subscriber:r,params:c};return n.schedule(i,0,a)}if(!o){o=new s.a;var l=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.next(t.length<=1?t[0]:t),o.complete()};try{t.apply(u,e.concat([l]))}catch(t){o.error(t)}}return o.subscribe(r)})}}function i(t){var e=this,n=t.args,r=t.subscriber,i=t.params,a=i.callbackFunc,u=i.context,c=i.scheduler,l=i.subject;if(!l){l=i.subject=new s.a;var d=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(c.schedule(o,0,{value:r,subject:l}))};try{a.apply(u,n.concat([d]))}catch(t){l.error(t)}}this.add(l.subscribe(r))}function o(t){var e=t.value,n=t.subject;n.next(e),n.complete()}e.a=r;var a=n(2),s=n(44),u=n(16),c=n(10),l=n(15)},function(t,e,n){"use strict";function r(t,e,n){if(e){if(!Object(l.a)(e))return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r(t,n).apply(void 0,i).pipe(Object(c.a)(function(t){return Object(d.a)(t)?e.apply(void 0,t):e(t)}))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new s.a(function(r){var a=o.context,s=o.subject;if(n)return n.schedule(i,0,{params:o,subscriber:r,context:a});if(!s){s=o.subject=new u.a;var c=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();if(n)return void s.error(n);s.next(t.length<=1?t[0]:t),s.complete()};try{t.apply(a,e.concat([c]))}catch(t){s.error(t)}}return s.subscribe(r)})}}function i(t){var e=this,n=t.params,r=t.subscriber,i=t.context,s=n.callbackFunc,c=n.args,l=n.scheduler,d=n.subject;if(!d){d=n.subject=new u.a;var f=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(l.schedule(a,0,{err:r,subject:d}));else{var i=t.length<=1?t[0]:t;e.add(l.schedule(o,0,{value:i,subject:d}))}};try{s.apply(i,c.concat([f]))}catch(t){this.add(l.schedule(a,0,{err:t,subject:d}))}}this.add(d.subscribe(r))}function o(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function a(t){var e=t.err;t.subject.error(e)}e.a=r;var s=n(2),u=n(44),c=n(16),l=n(15),d=n(10)},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),o=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.a(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(i.a)},function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t[i.a]}e.a=r;var i=n(24)},function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t[i.a]}e.a=r;var i=n(33)},function(t,e,n){"use strict";function r(t,e){return e?new i.a(function(n){var r=new o.a;return r.add(e.schedule(function(){return t.then(function(t){r.add(e.schedule(function(){n.next(t),r.add(e.schedule(function(){return n.complete()}))}))},function(t){r.add(e.schedule(function(){return n.error(t)}))})})),r}):new i.a(Object(a.a)(t))}e.a=r;var i=n(2),o=n(8),a=n(93)},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error("Iterable cannot be null");return e?new i.a(function(n){var r,i=new o.a;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(function(){r=t[a.a](),i.add(e.schedule(function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),i}):new i.a(Object(s.a)(t))}e.a=r;var i=n(2),o=n(8),a=n(33),s=n(94)},function(t,e,n){"use strict";function r(t,e){return e?new i.a(function(n){var r=new o.a;return r.add(e.schedule(function(){var i=t[a.a]();r.add(i.subscribe({next:function(t){r.add(e.schedule(function(){return n.next(t)}))},error:function(t){r.add(e.schedule(function(){return n.error(t)}))},complete:function(){r.add(e.schedule(function(){return n.complete()}))}}))})),r}):new i.a(Object(s.a)(t))}e.a=r;var i=n(2),o=n(8),a=n(24),s=n(95)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(a.a)(t[0])&&(t=t[0]),0===t.length?s.a:n?r(t).pipe(Object(l.a)(function(t){return n.apply(void 0,t)})):new o.a(function(e){return new d(e,t)})}e.a=r;var i=n(0),o=n(2),a=n(10),s=n(11),u=n(4),c=n(3),l=n(16),d=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var a=n[o],s=Object(u.a)(r,a,null,o);s&&r.add(s)}return r}return i.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this,n=e.destination,r=e.haveValues,i=e.values,o=i.length;if(!t._hasValue)return void n.complete();++this.completed===o&&(r===o&&n.next(i),n.complete())},e}(c.a)},function(t,e,n){"use strict";function r(t,e,n,o){return Object(l.a)(n)&&(o=n,n=void 0),o?r(t,e,n).pipe(Object(d.a)(function(t){return Object(c.a)(t)?o.apply(void 0,t):o(t)})):new u.a(function(r){function o(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)}i(t,e,o,r,n)})}function i(t,e,n,r,u){var c;if(s(t)){var l=t;t.addEventListener(e,n,u),c=function(){return l.removeEventListener(e,n,u)}}else if(a(t)){var d=t;t.on(e,n),c=function(){return d.off(e,n)}}else if(o(t)){var f=t;t.addListener(e,n),c=function(){return f.removeListener(e,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var h=0,p=t.length;h<p;h++)i(t[h],e,n,r,u)}r.add(c)}function o(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}function a(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}function s(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}e.a=r;var u=n(2),c=n(10),l=n(28),d=n(16);Object.prototype.toString},function(t,e,n){"use strict";function r(t,e,n){return n?r(t,e).pipe(Object(s.a)(function(t){return Object(o.a)(t)?n.apply(void 0,t):n(t)})):new i.a(function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(Object(a.a)(e))return function(){return e(i,r)}})}e.a=r;var i=n(2),o=n(10),a=n(28),s=n(16)},function(t,e,n){"use strict";function r(t,e,n,r,u){var c,l;if(1==arguments.length){var d=t;l=d.initialState,e=d.condition,n=d.iterate,c=d.resultSelector||a.a,u=d.scheduler}else void 0===r||Object(s.a)(r)?(l=t,c=a.a,u=r):(l=t,c=r);return new o.a(function(t){var r=l;if(u)return u.schedule(i,0,{subscriber:t,iterate:n,condition:e,resultSelector:c,state:r});for(;;){if(e){var o=void 0;try{o=e(r)}catch(e){return void t.error(e)}if(!o){t.complete();break}}var a=void 0;try{a=c(r)}catch(e){return void t.error(e)}if(t.next(a),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}})}function i(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}e.a=r;var o=n(2),a=n(25),s=n(15)},function(t,e,n){"use strict";function r(t,e,n){return void 0===e&&(e=o.a),void 0===n&&(n=o.a),Object(i.a)(function(){return t()?e:n})}e.a=r;var i=n(64),o=n(11)},function(t,e,n){"use strict";function r(t,e){return void 0===t&&(t=0),void 0===e&&(e=a.a),(!Object(s.a)(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=a.a),new o.a(function(n){return n.add(e.schedule(i,t,{subscriber:n,counter:0,period:t})),n})}function i(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}e.a=r;var o=n(2),a=n(12),s=n(46)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return s.a;var n=t[0],u=t.slice(1);return 1===t.length&&Object(a.a)(n)?r.apply(void 0,n):new i.a(function(t){var e=function(){return t.add(r.apply(void 0,u).subscribe(t))};return Object(o.a)(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})})}e.a=r;var i=n(2),o=n(20),a=n(10),s=n(11)},function(t,e,n){"use strict";function r(t,e){return e?new o.a(function(n){var r=Object.keys(t),o=new a.a;return o.add(e.schedule(i,0,{keys:r,index:0,subscriber:n,subscription:o,obj:t})),o}):new o.a(function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function i(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var a=e[n];r.next([a,o[a]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}e.a=r;var o=n(2),a=n(8)},function(t,e,n){"use strict";function r(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),new o.a(function(r){var o=0,a=t;if(n)return n.schedule(i,0,{index:o,count:e,start:t,subscriber:r});for(;;){if(o++>=e){r.complete();break}if(r.next(a++),r.closed)break}})}function i(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;if(n>=r)return void i.complete();i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t))}e.a=r;var o=n(2)},function(t,e,n){"use strict";function r(t,e){return new i.a(function(n){var r;try{r=t()}catch(t){return void n.error(t)}var i;try{i=e(r)}catch(t){return void n.error(t)}var s=i?Object(o.a)(i):a.a,u=s.subscribe(n);return function(){u.unsubscribe(),r&&r.unsubscribe()}})}e.a=r;var i=n(2),o=n(20),a=n(11)},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=i.a),Object(o.a)(function(){return Object(a.a)(t,e)})}e.a=r;var i=n(12),o=n(105),a=n(102)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new s(t))}}e.a=r;var i=n(0),o=n(3),a=n(4),s=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.closingNotifier))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.buffer=[],r.add(Object(a.a)(r,n)),r}return i.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.buffer;this.buffer=[],this.destination.next(o)},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=null),function(n){return n.lift(new a(t,e))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?u:s}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.bufferSize=n,r.buffer=[],r}return i.a(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(o.a),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.bufferSize=n,i.startBufferEvery=r,i.buffers=[],i.count=0,i}return i.a(e,t),e.prototype._next=function(t){var e=this,n=e.bufferSize,r=e.startBufferEvery,i=e.buffers,o=e.count;this.count++,o%r==0&&i.push([]);for(var a=i.length;a--;){var s=i[a];s.push(t),s.length===n&&(i.splice(a,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this,n=e.buffers,r=e.destination;n.length>0;){var i=n.shift();i.length>0&&r.next(i)}t.prototype._complete.call(this)},e}(o.a)},function(t,e,n){"use strict";function r(t){var e=arguments.length,n=u.a;Object(l.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var r=null;e>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new d(t,r,i,n))}}function i(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function o(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,r=t.subscriber,i=t.scheduler,o=r.openContext(),s=this;r.closed||(r.add(o.closeAction=i.schedule(a,n,{subscriber:r,context:o})),s.schedule(t,e))}function a(t){var e=t.subscriber,n=t.context;e.closeContext(n)}e.a=r;var s=n(0),u=n(12),c=n(1),l=n(15),d=function(){function t(t,e,n,r){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new h(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),f=function(){function t(){this.buffer=[]}return t}(),h=function(t){function e(e,n,r,s,u){var c=t.call(this,e)||this;c.bufferTimeSpan=n,c.bufferCreationInterval=r,c.maxBufferSize=s,c.scheduler=u,c.contexts=[];var l=c.openContext();if(c.timespanOnly=null==r||r<0,c.timespanOnly){var d={subscriber:c,context:l,bufferTimeSpan:n};c.add(l.closeAction=u.schedule(i,n,d))}else{var f={subscriber:c,context:l},h={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:c,scheduler:u};c.add(l.closeAction=u.schedule(a,n,f)),c.add(u.schedule(o,r,h))}return c}return s.a(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],a=o.buffer;a.push(t),a.length==this.maxBufferSize&&(e=o)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this,n=e.contexts,r=e.destination;n.length>0;){var i=n.shift();r.next(i.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(i,n,r))}},e.prototype.openContext=function(){var t=new f;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(c.a)},function(t,e,n){"use strict";function r(t,e){return function(n){return n.lift(new u(t,e))}}e.a=r;var i=n(0),o=n(8),a=n(4),s=n(3),u=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.openings,this.closingSelector))},t}(),c=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(Object(a.a)(i,n)),i}return i.a(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,r=0;r<n;r++)e[r].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var r=n.shift();r.subscription.unsubscribe(),r.buffer=null,r.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,r,i){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector,n=e.call(this,t);n&&this.trySubscribe(n)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,r=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(r),r.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=[],r=new o.a,i={buffer:n,subscription:r};e.push(i);var s=Object(a.a)(this,t,i);!s||s.closed?this.closeBuffer(i):(s.context=i,this.add(s),r.add(s))},e}(s.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new l(t))}}e.a=r;var i=n(0),o=n(8),a=n(18),s=n(14),u=n(3),c=n(4),l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.closingSelector))},t}(),d=function(t){function e(e,n){var r=t.call(this,e)||this;return r.closingSelector=n,r.subscribing=!1,r.openBuffer(),r}return i.a(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,r,i){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var n=Object(a.a)(this.closingSelector)();n===s.a?this.error(s.a.e):(t=new o.a,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Object(c.a)(this,n)),this.subscribing=!1)},e}(u.a)},function(t,e,n){"use strict";function r(t){return function(e){var n=new s(t),r=e.lift(n);return n.caught=r}}e.a=r;var i=n(0),o=n(3),a=n(4),s=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.selector,this.caught))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.selector=n,i.caught=r,i}return i.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(Object(a.a)(this,n))}},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new i.a(t))}}e.a=r;var i=n(62)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&Object(i.a)(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(Object(a.a)([e].concat(t)),new o.a(n))}}e.a=r;var i=n(10),o=n(62),a=n(20)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(i.a.apply(void 0,[e].concat(t)))}}e.a=r;var i=n(45)},function(t,e,n){"use strict";function r(t,e){return Object(i.a)(function(){return t},e)}e.a=r;var i=n(106)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new a(t,e))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.source))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.count=0,i.index=0,i}return i.a(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new s(t))}}e.a=r;var i=n(0),o=n(3),a=n(4),s=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.durationSelector))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.durationSelector=n,r.hasValue=!1,r.durationSubscription=null,r}return i.a(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(a.a)(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=s.a),function(n){return n.lift(new u(t,e))}}function i(t){t.debouncedNext()}e.a=r;var o=n(0),a=n(1),s=n(12),u=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.dueTime,this.scheduler))},t}(),c=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return o.a(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(i,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(a.a)},function(t,e,n){"use strict";function r(t,e){void 0===e&&(e=o.a);var n=Object(a.a)(t),r=n?+t-e.now():Math.abs(t);return function(t){return t.lift(new c(r,e))}}e.a=r;var i=n(0),o=n(12),a=n(107),s=n(1),u=n(43),c=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.delay,this.scheduler))},t}(),l=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return i.a(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new d(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(u.a.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(u.a.createComplete())},e}(s.a),d=function(){function t(t,e){this.time=t,this.notification=e}return t}()},function(t,e,n){"use strict";function r(t,e){return e?function(n){return new d(n,e).lift(new c(t))}:function(e){return e.lift(new c(t))}}e.a=r;var i=n(0),o=n(1),a=n(2),s=n(3),u=n(4),c=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.delayDurationSelector))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.values=[],r}return i.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(t),this.removeSubscription(i),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),n=null;return-1!==e&&(n=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),n},e.prototype.tryDelay=function(t,e){var n=Object(u.a)(this,t,e);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n)),this.values.push(e)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(s.a),d=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subscriptionDelay=n,r}return i.a(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new f(t,this.source))},e}(a.a),f=function(t){function e(e,n){var r=t.call(this)||this;return r.parent=e,r.source=n,r.sourceSubscribed=!1,r}return i.a(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(o.a)},function(t,e,n){"use strict";function r(){return function(t){return t.lift(new a)}}e.a=r;var i=n(0),o=n(1),a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(e){return t.call(this,e)||this}return i.a(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return function(n){return n.lift(new s(t,e))}}e.a=r;var i=n(0),o=n(3),a=n(4),s=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.keySelector,this.flushes))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.keySelector=n,i.values=new Set,r&&i.add(Object(a.a)(i,r)),i}return i.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return Object(i.a)(function(n,r){return e?e(n[t],r[t]):n[t]===r[t]})}e.a=r;var i=n(108)},function(t,e,n){"use strict";function r(t,e){if(t<0)throw new i.a;var n=arguments.length>=2;return function(r){return r.pipe(Object(o.a)(function(e,n){return n===t}),Object(u.a)(1),n?Object(s.a)(e):Object(a.a)(function(){return new i.a}))}}e.a=r;var i=n(31),o=n(36),a=n(47),s=n(35),u=n(66)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];Object(u.a)(n)?t.pop():n=null;var r=t.length;return 1!==r||n?r>0?Object(s.a)(e,Object(i.a)(t,n)):Object(s.a)(e,Object(a.b)(n)):Object(s.a)(e,Object(o.a)(t[0]))}}e.a=r;var i=n(21),o=n(60),a=n(11),s=n(45),u=n(15)},function(t,e,n){"use strict";function r(t,e){return function(n){return n.lift(new a(t,e,n))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate,this.thisArg,this.source))},t}(),s=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.predicate=n,o.thisArg=r,o.source=i,o.index=0,o.thisArg=r||o,o}return i.a(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(o.a)},function(t,e,n){"use strict";function r(){return function(t){return t.lift(new s)}}e.a=r;var i=n(0),o=n(3),a=n(4),s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return i.a(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(a.a)(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return e?function(n){return n.pipe(r(function(n,r){return Object(u.a)(t(n,r)).pipe(Object(s.a)(function(t,i){return e(n,t,r,i)}))}))}:function(e){return e.lift(new c(t))}}e.a=r;var i=n(0),o=n(3),a=n(4),s=n(16),u=n(20),c=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project))},t}(),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.hasSubscription=!1,r.hasCompleted=!1,r.index=0,r}return i.a(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var r=this.project(t,e);this.hasSubscription=!0,this.add(Object(a.a)(this,r,t,e))}catch(t){n.error(t)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(o.a)},function(t,e,n){"use strict";function r(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(r){return r.lift(new c(t,e,n))}}e.a=r;var i=n(0),o=n(18),a=n(14),s=n(3),u=n(4),c=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.project,this.concurrent,this.scheduler))},t}(),l=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.scheduler=i,o.index=0,o.active=0,o.hasCompleted=!1,r<Number.POSITIVE_INFINITY&&(o.buffer=[]),o}return i.a(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,r=t.value,i=t.index;e.subscribeToProjection(n,r,i)},e.prototype._next=function(t){var n=this.destination;if(n.closed)return void this._complete();var r=this.index++;if(this.active<this.concurrent){n.next(t);var i=Object(o.a)(this.project)(t,r);if(i===a.a)n.error(a.a.e);else if(this.scheduler){var s={subscriber:this,result:i,value:t,index:r};this.add(this.scheduler.schedule(e.dispatch,0,s))}else this.subscribeToProjection(i,t,r)}else this.buffer.push(t)},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.add(Object(u.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(s.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new s(t))}}e.a=r;var i=n(0),o=n(1),a=n(8),s=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.callback))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.add(new a.a(n)),r}return i.a(e,t),e}(o.a)},function(t,e,n){"use strict";function r(t,e){return function(n){return n.lift(new i.a(t,n,!0,e))}}e.a=r;var i=n(110)},function(t,e,n){"use strict";function r(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(o.a)(function(e,n){return t(e,n,r)}):c.a,Object(a.a)(1),n?Object(s.a)(e):Object(u.a)(function(){return new i.a}))}}e.a=r;var i=n(32),o=n(36),a=n(66),s=n(35),u=n(47),c=n(25)},function(t,e,n){"use strict";function r(){return function(t){return t.lift(new a)}}e.a=r;var i=n(0),o=n(1),a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i.a(e,t),e.prototype._next=function(t){},e}(o.a)},function(t,e,n){"use strict";function r(){return function(t){return t.lift(new a)}}e.a=r;var i=n(0),o=n(1),a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(e){return t.call(this,e)||this}return i.a(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(o.a)},function(t,e,n){"use strict";function r(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Object(o.a)(function(e,n){return t(e,n,r)}):c.a,Object(a.a)(1),n?Object(u.a)(e):Object(s.a)(function(){return new i.a}))}}e.a=r;var i=n(32),o=n(36),a=n(67),s=n(47),u=n(35),c=n(25)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new a(t))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.value))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return i.a(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(o.a)},function(t,e,n){"use strict";function r(){return function(t){return t.lift(new s)}}e.a=r;var i=n(0),o=n(1),a=n(43),s=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new u(t))},t}(),u=function(t){function e(e){return t.call(this,e)||this}return i.a(e,t),e.prototype._next=function(t){this.destination.next(a.a.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(a.a.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(a.a.createComplete()),t.complete()},e}(o.a)},function(t,e,n){"use strict";function r(t){var e="function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e};return Object(i.a)(e)}e.a=r;var i=n(48)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(i.a.apply(void 0,[e].concat(t)))}}e.a=r;var i=n(99)},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?Object(i.a)(function(){return t},e,n):("number"==typeof e&&(n=e),Object(i.a)(function(){return t},n))}e.a=r;var i=n(34)},function(t,e,n){"use strict";function r(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(r){return r.lift(new c(t,e,n))}}e.a=r;var i=n(0),o=n(18),a=n(14),s=n(4),u=n(3),c=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.accumulator,this.seed,this.concurrent))},t}(),l=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o.acc=r,o.concurrent=i,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return i.a(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=Object(o.a)(this.accumulator)(this.acc,t),r=this.destination;n===a.a?r.error(a.a.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){this.add(Object(s.a)(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.destination;this.acc=e,this.hasValue=!0,o.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(u.a)},function(t,e,n){"use strict";function r(t){var e="function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e};return Object(i.a)(e)}e.a=r;var i=n(48)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&Object(o.a)(t[0])&&(t=t[0]),function(e){return e.lift(new u(t))}}e.a=r;var i=n(0),o=(n(20),n(10)),a=n(3),s=n(4),u=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.nextSources))},t}(),c=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.nextSources=n,r}return i.a(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(Object(s.a)(this,t)):this.destination.complete()},e}(a.a)},function(t,e,n){"use strict";function r(){return function(t){return t.lift(new a)}}e.a=r;var i=n(0),o=n(1),a=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new s(t))},t}(),s=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return i.a(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return function(n){return[Object(o.a)(t,e)(n),Object(o.a)(Object(i.a)(t,e))(n)]}}e.a=r;var i=n(201),o=n(36)},function(t,e,n){"use strict";function r(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}e.a=r},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return Object(o.a)(i(t,n))(e)}}function i(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return;r=o}return r}}e.a=r;var o=n(16)},function(t,e,n){"use strict";function r(t){return t?Object(o.a)(function(){return new i.a},t):Object(o.a)(new i.a)}e.a=r;var i=n(9),o=n(26)},function(t,e,n){"use strict";function r(t){return function(e){return Object(o.a)(new i.a(t))(e)}}e.a=r;var i=n(85),o=n(26)},function(t,e,n){"use strict";function r(){return function(t){return Object(o.a)(new i.a)(t)}}e.a=r;var i=n(44),o=n(26)},function(t,e,n){"use strict";function r(t,e,n,r){n&&"function"!=typeof n&&(r=n);var a="function"==typeof n?n:void 0,s=new i.a(t,e,r);return function(t){return Object(o.a)(function(){return s},a)(t)}}e.a=r;var i=n(58),o=n(26)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&Object(i.a)(t[0])&&(t=t[0]),e.lift.call(o.a.apply(void 0,[e].concat(t)))}}e.a=r;var i=n(10),o=n(101)},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=-1),function(e){return 0===t?Object(a.b)():t<0?e.lift(new s(-1,e)):e.lift(new s(t-1,e))}}e.a=r;var i=n(0),o=n(1),a=n(11),s=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.count,this.source))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return i.a(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this,n=e.source,r=e.count;if(0===r)return t.prototype.complete.call(this);r>-1&&(this.count=r-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new l(t))}}e.a=r;var i=n(0),o=n(9),a=n(18),s=n(14),u=n(3),c=n(4),l=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.notifier,e))},t}(),d=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i.sourceIsBeingSubscribedTo=!0,i}return i.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this,e=t.notifications,n=t.retriesSubscription;e&&(e.unsubscribe(),this.notifications=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){this.notifications=new o.a;var e=Object(a.a)(this.notifier)(this.notifications);if(e===s.a)return t.prototype.complete.call(this);this.retries=e,this.retriesSubscription=Object(c.a)(this,e)},e}(u.a)},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=-1),function(e){return e.lift(new a(t,e))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.count,this.source))},t}(),s=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return i.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this,r=n.source,i=n.count;if(0===i)return t.prototype.error.call(this,e);i>-1&&(this.count=i-1),r.subscribe(this._unsubscribeAndRecycle())}},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new l(t,e))}}e.a=r;var i=n(0),o=n(9),a=n(18),s=n(14),u=n(3),c=n(4),l=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.notifier,this.source))},t}(),d=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.notifier=n,i.source=r,i}return i.a(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=null,this.retriesSubscription=null;else{if(n=new o.a,(r=Object(a.a)(this.notifier)(n))===s.a)return t.prototype.error.call(this,s.a.e);i=Object(c.a)(this,r)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(e)}},e.prototype._unsubscribe=function(){var t=this,e=t.errors,n=t.retriesSubscription;e&&(e.unsubscribe(),this.errors=null),n&&(n.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,r,i){var o=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=o,this.source.subscribe(this)},e}(u.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new s(t))}}e.a=r;var i=n(0),o=n(3),a=n(4),s=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new u(t),r=e.subscribe(n);return r.add(Object(a.a)(n,this.notifier)),r},t}(),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return i.a(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,r,i){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(o.a)},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=s.a),function(n){return n.lift(new u(t,e))}}function i(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}e.a=r;var o=n(0),a=n(1),s=n(12),u=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.period,this.scheduler))},t}(),c=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o.period=n,o.scheduler=r,o.hasValue=!1,o.add(r.schedule(i,n,{subscriber:o,period:n})),o}return o.a(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(a.a)},function(t,e,n){"use strict";function r(t,e){return function(n){return n.lift(new u(t,e))}}e.a=r;var i=n(0),o=n(1),a=n(18),s=n(14),u=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.compareTo,this.comparor))},t}(),c=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.compareTo=n,i.comparor=r,i._a=[],i._b=[],i._oneComplete=!1,i.add(n.subscribe(new l(e,i))),i}return i.a(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e.prototype.checkValues=function(){for(var t=this,e=t._a,n=t._b,r=t.comparor;e.length>0&&n.length>0;){var i=e.shift(),o=n.shift(),u=!1;r?(u=Object(a.a)(r)(i,o))===s.a&&this.destination.error(s.a.e):u=i===o,u||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e}(o.a),l=function(t){function e(e,n){var r=t.call(this,e)||this;return r.parent=n,r}return i.a(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t)},e.prototype._complete=function(){this.parent._complete()},e}(o.a)},function(t,e,n){"use strict";function r(){return new s.a}function i(){return function(t){return Object(a.a)()(Object(o.a)(r)(t))}}e.a=i;var o=n(26),a=n(57),s=n(9)},function(t,e,n){"use strict";function r(t,e,n){return function(r){return r.lift(i(t,e,n))}}function i(t,e,n){var r,i,a=0,s=!1,u=!1;return function(c){a++,r&&!s||(s=!1,r=new o.a(t,e,n),i=c.subscribe({next:function(t){r.next(t)},error:function(t){s=!0,r.error(t)},complete:function(){u=!0,r.complete()}}));var l=r.subscribe(this);return function(){a--,l.unsubscribe(),i&&0===a&&u&&i.unsubscribe()}}}e.a=r;var o=n(58)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new s(t,e))}}e.a=r;var i=n(0),o=n(1),a=n(32),s=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.predicate,this.source))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.source=r,i.seenValue=!1,i.index=0,i}return i.a(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new a.a)},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new a(t))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.total))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return i.a(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new s(t))}}e.a=r;var i=n(0),o=n(1),a=n(31),s=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new a.a}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new o.a(t)):e.subscribe(new u(t,this._skipCount))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r._skipCount=n,r._count=0,r._ring=new Array(n),r}return i.a(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var r=n%e,i=this._ring,o=i[r];i[r]=t,this.destination.next(o)}},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new s(t))}}e.a=r;var i=n(0),o=n(3),a=n(4),s=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.notifier))},t}(),u=function(t){function e(e,n){var r=t.call(this,e)||this;return r.hasValue=!1,r.add(r.innerSubscription=Object(a.a)(r,n)),r}return i.a(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,r,i){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new a(t))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.skipping=!0,r.index=0,r}return i.a(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(o.a)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];Object(u.a)(n)?t.pop():n=null;var r=t.length;return 1!==r||n?r>0?Object(s.a)(Object(i.a)(t,n),e):Object(s.a)(Object(a.b)(n),e):Object(s.a)(Object(o.a)(t[0]),e)}}e.a=r;var i=n(21),o=n(60),a=n(11),s=n(45),u=n(15)},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=0),function(n){return n.lift(new o(t,e))}}e.a=r;var i=n(224),o=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new i.a(e,this.delay,this.scheduler).subscribe(t)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(0),i=n(2),o=n(90),a=n(46),s=function(t){function e(e,n,r){void 0===n&&(n=0),void 0===r&&(r=o.a);var i=t.call(this)||this;return i.source=e,i.delayTime=n,i.scheduler=r,(!Object(a.a)(n)||n<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=o.a),i}return r.a(e,t),e.create=function(t,n,r){return void 0===n&&(n=0),void 0===r&&(r=o.a),new e(t,n,r)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,r=this.source;return this.scheduler.schedule(e.dispatch,n,{source:r,subscriber:t})},e}(i.a)},function(t,e,n){"use strict";function r(){return Object(i.a)(o.a)}e.a=r;var i=n(69),o=n(25)},function(t,e,n){"use strict";function r(t,e){return e?Object(i.a)(function(){return t},e):Object(i.a)(function(){return t})}e.a=r;var i=n(69)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new s(t))}}e.a=r;var i=n(0),o=n(3),a=n(4),s=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new u(t),r=Object(a.a)(n,this.notifier);return r&&!r.closed?(n.add(r),e.subscribe(n)):n},t}(),u=function(t){function e(e){return t.call(this,e)||this}return i.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.complete()},e.prototype.notifyComplete=function(){},e}(o.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new a(t))}}e.a=r;var i=n(0),o=n(1),a=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.predicate))},t}(),s=function(t){function e(e,n){var r=t.call(this,e)||this;return r.predicate=n,r.index=0,r}return i.a(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(o.a)},function(t,e,n){"use strict";function r(t,e,n){return void 0===e&&(e=s.a),void 0===n&&(n=u.a),function(r){return r.lift(new c(t,e,n.leading,n.trailing))}}function i(t){t.subscriber.clearThrottle()}e.a=r;var o=n(0),a=n(1),s=n(12),u=n(111),c=function(){function t(t,e,n,r){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=r}return t.prototype.call=function(t,e){return e.subscribe(new l(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),l=function(t){function e(e,n,r,i,o){var a=t.call(this,e)||this;return a.duration=n,a.scheduler=r,a.leading=i,a.trailing=o,a._hasTrailingValue=!1,a._trailingValue=null,a}return o.a(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(i,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(a.a)},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=i.a),function(e){return Object(a.a)(function(){return e.pipe(Object(o.a)(function(e,n){var r=e.current;return{value:n,current:t.now(),last:r}},{current:t.now(),value:void 0,last:void 0}),Object(s.a)(function(t){var e=t.current,n=t.last,r=t.value;return new u(r,e-n)}))})}}e.a=r;var i=n(12),o=n(68),a=n(64),s=n(16),u=function(){function t(t,e){this.value=t,this.interval=e}return t}()},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=i.a),Object(a.a)(t,Object(s.a)(new o.a),e)}e.a=r;var i=n(12),o=n(91),a=n(112),s=n(61)},function(t,e,n){"use strict";function r(t){return void 0===t&&(t=i.a),Object(o.a)(function(e){return new a(e,t.now())})}e.a=r;var i=n(12),o=n(16),a=function(){function t(t,e){this.value=t,this.timestamp=e}return t}()},function(t,e,n){"use strict";function r(t,e,n){return 0===n?[e]:(t.push(e),t)}function i(){return Object(o.a)(r,[])}e.a=i;var o=n(48)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new u(t))}}e.a=r;var i=n(0),o=n(9),a=n(3),s=n(4),u=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new c(t),r=e.subscribe(n);return r.closed||n.add(Object(s.a)(n,this.windowBoundaries)),r},t}(),c=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new o.a,e.next(n.window),n}return i.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new o.a;e.next(n)},e}(a.a)},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=0),function(n){return n.lift(new s(t,e))}}e.a=r;var i=n(0),o=n(1),a=n(9),s=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.windowSize,this.startWindowEvery))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.destination=e,i.windowSize=n,i.startWindowEvery=r,i.windows=[new a.a],i.count=0,e.next(i.windows[0]),i}return i.a(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,r=this.windowSize,i=this.windows,o=i.length,s=0;s<o&&!this.closed;s++)i[s].next(t);var u=this.count-r+1;if(u>=0&&u%e==0&&!this.closed&&i.shift().complete(),++this.count%e==0&&!this.closed){var c=new a.a;i.push(c),n.next(c)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(o.a)},function(t,e,n){"use strict";function r(t){var e=c.a,n=null,r=Number.POSITIVE_INFINITY;return Object(f.a)(arguments[3])&&(e=arguments[3]),Object(f.a)(arguments[2])?e=arguments[2]:Object(d.a)(arguments[2])&&(r=arguments[2]),Object(f.a)(arguments[1])?e=arguments[1]:Object(d.a)(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new h(t,n,r,e))}}function i(t){var e=t.subscriber,n=t.windowTimeSpan,r=t.window;r&&e.closeWindow(r),t.window=e.openWindow(),this.schedule(t,n)}function o(t){var e=t.windowTimeSpan,n=t.subscriber,r=t.scheduler,i=t.windowCreationInterval,o=n.openWindow(),s=this,u={action:s,subscription:null},c={subscriber:n,window:o,context:u};u.subscription=r.schedule(a,e,c),s.add(u.subscription),s.schedule(t,i)}function a(t){var e=t.subscriber,n=t.window,r=t.context;r&&r.action&&r.subscription&&r.action.remove(r.subscription),e.closeWindow(n)}e.a=r;var s=n(0),u=n(9),c=n(12),l=n(1),d=n(46),f=n(15),h=function(){function t(t,e,n,r){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=r}return t.prototype.call=function(t,e){return e.subscribe(new v(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return s.a(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(u.a),v=function(t){function e(e,n,r,s,u){var c=t.call(this,e)||this;c.destination=e,c.windowTimeSpan=n,c.windowCreationInterval=r,c.maxWindowSize=s,c.scheduler=u,c.windows=[];var l=c.openWindow();if(null!==r&&r>=0){var d={subscriber:c,window:l,context:null},f={windowTimeSpan:n,windowCreationInterval:r,subscriber:c,scheduler:u};c.add(u.schedule(a,n,d)),c.add(u.schedule(o,r,f))}else{var h={subscriber:c,window:l,windowTimeSpan:n};c.add(u.schedule(i,n,h))}return c}return s.a(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,r=0;r<n;r++){var i=e[r];i.closed||(i.next(t),i.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(i))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new p;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(l.a)},function(t,e,n){"use strict";function r(t,e){return function(n){return n.lift(new d(t,e))}}e.a=r;var i=n(0),o=n(9),a=n(8),s=n(18),u=n(14),c=n(3),l=n(4),d=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new f(t,this.openings,this.closingSelector))},t}(),f=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.openings=n,i.closingSelector=r,i.contexts=[],i.add(i.openSubscription=Object(l.a)(i,n,n)),i}return i.a(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,r=0;r<n;r++)e[r].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var r=n.length,i=-1;++i<r;){var o=n[i];o.window.error(e),o.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,r=-1;++r<n;){var i=e[r];i.window.complete(),i.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var r=t[n];r.window.unsubscribe(),r.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,r,i){if(t===this.openings){var c=this.closingSelector,d=Object(s.a)(c)(e);if(d===u.a)return this.error(u.a.e);var f=new o.a,h=new a.a,p={window:f,subscription:h};this.contexts.push(p);var v=Object(l.a)(this,d,p);v.closed?this.closeWindow(this.contexts.length-1):(v.context=p,h.add(v)),this.destination.next(f)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],r=n.window,i=n.subscription;e.splice(t,1),r.complete(),i.unsubscribe()}},e}(c.a)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new l(t))}}e.a=r;var i=n(0),o=n(9),a=n(18),s=n(14),u=n(3),c=n(4),l=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new d(t,this.closingSelector))},t}(),d=function(t){function e(e,n){var r=t.call(this,e)||this;return r.destination=e,r.closingSelector=n,r.openWindow(),r}return i.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.openWindow(i)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new o.a;this.destination.next(n);var r=Object(a.a)(this.closingSelector)();if(r===s.a){var i=s.a.e;this.destination.error(i),this.window.error(i)}else this.add(this.closingNotification=Object(c.a)(this,r))},e}(u.a)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var r=t;return e.lift(new s(r,n))}}e.a=r;var i=n(0),o=n(3),a=n(4),s=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.observables,this.project))},t}(),u=function(t){function e(e,n,r){var i=t.call(this,e)||this;i.observables=n,i.project=r,i.toRespond=[];var o=n.length;i.values=new Array(o);for(var s=0;s<o;s++)i.toRespond.push(s);for(var s=0;s<o;s++){var u=n[s];i.add(Object(a.a)(i,u,u,s))}return i}return i.a(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e;var o=this.toRespond;if(o.length>0){var a=o.indexOf(n);-1!==a&&o.splice(a,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(o.a)},function(t,e,n){"use strict";function r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(i.b.apply(void 0,[e].concat(t)))}}e.a=r;var i=n(65)},function(t,e,n){"use strict";function r(t){return function(e){return e.lift(new i.a(t))}}e.a=r;var i=n(65)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(7),n(19),n(22),n(243),n(244),n(13),n(6),n(5),n(72),n(245),n(37)],void 0!==(i=function(t,e,n,r,i,s,u,c,l,d,f,h,p){"use strict";function v(t){if(!l.isElement(t))return null;for(var e=t.previousSibling;null!==e&&!(l.isText(e)||l.isElement(e)&&e.classList.contains("_real"));)e=e.previousSibling;return e}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),i=a(i),u=a(u),f=a(f);var m={textEdit:!1,focus:!1},y=function(){function t(t,e,i,o,a,u,c){var l=this;this.guiRoot=t,this.dataRoot=e,this.inputField=i,this.guiUpdater=o,this.layer=a,this.scroller=u,this.modeTree=c,this.selectionStack=[],this.mark=new s.CaretMark(this,t.node.ownerDocument,a,i,u);var d=this.guiRootEl=t.node;this.dataRootEl=e.node,this.doc=d.ownerDocument,this.win=this.doc.defaultView,this.$inputField=n.default(this.inputField),this._events=new r.Subject,this.events=this._events.asObservable(),n.default(this.guiRootEl).on("focus",function(t){l.focusInputField(),t.preventDefault(),t.stopPropagation()}),n.default(this.win).on("blur.wed",this.onBlur.bind(this)),n.default(this.win).on("focus.wed",this.onFocus.bind(this))}return Object.defineProperty(t.prototype,"caret",{get:function(){return this.focus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sel",{get:function(){return this._sel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focus",{get:function(){if(void 0!==this._sel)return this._sel.focus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchor",{get:function(){if(void 0!==this._sel)return this._sel.anchor},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"range",{get:function(){var t=this.rangeInfo;return void 0!==t?t.range:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeInfo",{get:function(){var t=this._sel;if(void 0!==t)return t.rangeInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minCaret",{get:function(){return c.DLoc.mustMakeDLoc(this.guiRoot,this.guiRootEl,0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxCaret",{get:function(){return c.DLoc.mustMakeDLoc(this.guiRoot,this.guiRootEl,this.guiRootEl.childNodes.length)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"docDLocRange",{get:function(){return new c.DLocRange(this.minCaret,this.maxCaret)},enumerable:!0,configurable:!0}),t.prototype.getNormalizedCaret=function(){var t=this.caret;if(void 0===t)return t;if(this.guiRootEl.contains(t.node)){if(!t.isValid()){var e=new h.WedSelection(this,this.anchor,t.normalizeOffset());this._sel=e,t=e.focus}var n=this._normalizeCaret(t);return null==n?void 0:n}},t.prototype.mustGetNormalizedCaret=function(){var t=this.getNormalizedCaret();if(void 0===t)throw new Error("cannot get a normalized caret");return t},t.prototype.normalizeToEditableRange=function(t){if(t.root!==this.guiRootEl)throw new Error("DLoc object must be for the GUI tree");var e=t.offset,n=t.node;if(l.isElement(n)){var r=this.modeTree.getMode(n),i=r.nodesAroundEditableContents(n),o=i[0],a=i[1],s=null!==o?d.indexOf(n.childNodes,o):-1;if(e<=s)e=s+1;else{var u=null!==a?d.indexOf(n.childNodes,a):n.childNodes.length;e>=u&&(e=u)}return t.makeWithOffset(e)}return t},t.prototype.getDataCaret=function(t){var e=this.getNormalizedCaret();if(void 0!==e)return this.toDataLocation(e,t)},t.prototype.fromDataLocation=function(t,e){if(t instanceof c.DLoc&&(e=t.offset,t=t.node),void 0===e)throw new Error("offset is undefined");var n=this.guiUpdater.fromDataLocation(t,e);if(null!==n){var r=n.offset;if(t=n.node,l.isElement(t)){var i=this.modeTree.getMode(t),o=i.nodesAroundEditableContents(t),a=o[0],s=o[1],u=null!==a?d.indexOf(t.childNodes,a):-1;if(r<=u)r=u+1;else{var f=null!==s?d.indexOf(t.childNodes,s):t.childNodes.length;r>=f&&(r=f)}return n.makeWithOffset(r)}return n}},t.prototype.mustFromDataLocation=function(t,e){var n=this.fromDataLocation.apply(this,arguments);if(void 0===n)throw new Error("cannot convert to a data location");return n},t.prototype.toDataLocation=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r,i;if(t instanceof c.DLoc){if("boolean"!=typeof e)throw new Error("2nd argument must be a boolean");n=e,e=t.offset,r=t.node,i=t.root}else r=t;if("number"!=typeof e)throw new Error("offset must be a number");var o=this.makeCaret(r,e);if(null===d.closestByClass(r,"_attribute_value",i)){var a=d.closestByClass(r,"_phantom_wrap",i);if(null!==a)o=this.makeCaret(a.getElementsByClassName("_real")[0]);else{for(var s=void 0,u=l.isText(r)?r.parentNode:r;null!==u&&u!==this.guiRootEl;){if(u.classList.contains("_phantom")||u.classList.contains("_gui")){if(!n)return;s=u}u=u.parentNode}void 0!==s&&(o=this.makeCaret(s))}}var f=this._normalizeCaret(o);if(null!=f){r=f.node,e=f.offset;var h=this.dataRoot.pathToNode(this.guiRoot.nodeToPath(r));if(l.isText(r))return this.makeCaret(h,e,!0);if(e>=r.childNodes.length)return null===h?void 0:this.makeCaret(h,h.childNodes.length);var p=r.childNodes[e];if(l.isElement(p)&&!p.classList.contains("_real")){var m=v(p);if(null===m)return this.makeCaret(h,0);if(null===(h=this.dataRoot.pathToNode(this.guiRoot.nodeToPath(m))))return;var y=h.parentNode;return this.makeCaret(y,d.indexOf(y.childNodes,h)+1)}return h=this.dataRoot.pathToNode(this.guiRoot.nodeToPath(p)),this.makeCaret(h,l.isAttr(h)?e:void 0)}},t.prototype._normalizeCaret=function(t){if(null==t)return t;var e=d.closestByClass(t.node,"_placeholder",t.root);return null!==e?t.make(e):t},t.prototype.makeCaret=function(t,e,n){if(void 0===n&&(n=!1),null!=t){var r;if(this.guiRootEl.contains(t)?r=this.guiRoot:d.contains(this.dataRootEl,t)&&(r=this.dataRoot),void 0!==r)return c.DLoc.mustMakeDLoc(r,t,e,n)}},t.prototype.setRange=function(t,e,n,r){var i,o;if(t instanceof c.DLoc&&e instanceof c.DLoc?(i=t,o=e):(i=this.makeCaret(t,e),o=this.makeCaret(n,r)),void 0===i||void 0===o)throw new Error("must provide both anchor and focus");if(i.root===this.dataRootEl&&(i=this.fromDataLocation(i),o=this.fromDataLocation(o),void 0===i||void 0===o))throw new Error("cannot find GUI anchor and focus");var a=this._sel=new h.WedSelection(this,i,o);if(void 0===this.prevCaret||!this.prevCaret.equals(o)){this.mark.refresh();var s=a.range;if(void 0===s)throw new Error("unable to make a range");this._setDOMSelectionRange(s)}this._caretChange()},t.prototype.newPosition=function(t,e){return u.newPosition(t,e,this.guiRootEl,this.modeTree)},t.prototype.newCaretPosition=function(t){return this.newPosition(this.caret,t)},t.prototype.move=function(t,e){void 0===e&&(e=!1);var n=this.newCaretPosition(t);if(void 0!==n)if(e){var r=this.anchor;void 0!==r&&this.setRange(r,n)}else this.setCaret(n)},t.prototype.setCaret=function(t,e,n){var r;if(t instanceof c.DLoc){if(r=t,"number"==typeof e)throw new Error("2nd argument must be options");n=e,e=void 0}else{if(void 0!==e&&"number"!=typeof e)throw new Error("2nd argument must be number");var i=this.makeCaret(t,e);if(void 0===i)return;r=i}void 0!==n?f.assertSummarily(m,n):n={},this._setGUICaret(r.root===this.guiRootEl?r:this.fromDataLocation(r),n)},t.prototype.setCaretToLabelPosition=function(t,e,n){var r,i=0,o=d.closestByClass(t,"_attribute",e);null!==o?null!==d.closestByClass(n.node,"_attribute_value",e)?(r=n.node,i=n.offset):r=p.getAttrValueNode(o.getElementsByClassName("_attribute_value")[0]):r=e.getElementsByClassName("_element_name")[0],this.setCaret(r,i)},t.prototype.pushSelection=function(){this.selectionStack.push(this._sel)},t.prototype.popSelection=function(){this._sel=this.selectionStack.pop(),this._restoreCaretAndSelection(!1)},t.prototype.popSelectionAndDiscard=function(){this.selectionStack.pop()},t.prototype._restoreCaretAndSelection=function(t){if(void 0!==this.caret&&void 0!==this.anchor&&this.guiRootEl.contains(this.anchor.node)){var e=this.range;if(void 0===e)throw new Error("could not make a range");this._setDOMSelectionRange(e),e.collapsed&&this.focusInputField(),this.mark.refresh(),this._caretChange({gainingFocus:t})}else this.clearSelection()},t.prototype.clearSelection=function(){this._sel=void 0,this.mark.refresh();var t=this._getDOMSelection();t.rangeCount>0&&this.guiRootEl.contains(t.focusNode)&&t.removeAllRanges(),this._caretChange()},t.prototype._getDOMSelectionRange=function(){var t=d.getSelectionRange(this.win);if(void 0!==t&&this.guiRootEl.contains(t.startContainer)&&this.guiRootEl.contains(t.endContainer))return t},t.prototype._setDOMSelectionRange=function(t){if(t.collapsed)return void this._clearDOMSelection();i.FIREFOX&&d.focusNode(t.endContainer);var e=this._getDOMSelection();e.removeAllRanges(),e.addRange(t)},t.prototype._setGUICaret=function(t,e){var n=t.offset,r=t.node;if(l.isElement(r)){if(r.classList.contains("_attribute_value")){var i=p.getAttrValueNode(r);r!==i&&(r=i,t=t.make(r,n))}var o=d.childByClass(r,"_placeholder");null===o||o.classList.contains("_dying")||(r=o,n=0,t=t.make(r,n))}void 0!==this.caret&&this.anchor===this.caret&&this.caret.node===r&&this.caret.offset===n||(!1!==e.focus&&this._clearDOMSelection(!0),this._sel=new h.WedSelection(this,t),this.mark.refresh(),!1!==e.focus&&this.focusInputField(),this._caretChange(e))},t.prototype._caretChange=function(t){void 0===t&&(t={});var e=this.prevCaret,n=this.caret,r=void 0!==n?this.modeTree.getMode(n.node):void 0;void 0!==e&&e.equals(n)||(this._events.next({manager:this,caret:n,mode:r,prevCaret:e,prevMode:this.prevMode,options:t}),this.prevCaret=n,this.prevMode=r)},t.prototype._clearDOMSelection=function(t){void 0===t&&(t=!1),this._getDOMSelection().removeAllRanges(),t||this.focusInputField()},t.prototype._getDOMSelection=function(){return this.win.getSelection()},t.prototype.focusInputField=function(){this.win.focus(),this.$inputField.blur(),this.$inputField.focus()},t.prototype.onBlur=function(){void 0!==this.caret&&(this.selAtBlur=this._sel,this.$inputField.blur(),this._sel=void 0,this.mark.refresh())},t.prototype.onFocus=function(){void 0!==this.selAtBlur&&(this._sel=this.selAtBlur,this._restoreCaretAndSelection(!0),this.selAtBlur=void 0)},t.prototype.highlightRange=function(t){for(var e=t.mustMakeDOMRange(),n=this.scroller.getBoundingClientRect(),r=this.scroller.scrollTop-n.top,i=this.scroller.scrollLeft-n.left,o=this.doc.createElement("div"),a=0,s=Array.from(e.getClientRects());a<s.length;a++){var u=s[a],c=this.doc.createElement("div");c.className="_wed_highlight",c.style.top=u.top+r+"px",c.style.left=u.left+i+"px",c.style.height=u.height+"px",c.style.width=u.width+"px",o.appendChild(c)}return this.layer.append(o),o},t.prototype.dumpCaretInfo=function(){var t=this.getDataCaret();void 0!==t?console.log("data caret",t.node,t.offset):console.log("no data caret"),void 0!==this.anchor?console.log("selection anchor",this.anchor.node,this.anchor.offset):console.log("no selection anchor");var e=this.caret;if(void 0!==e){var n=e.node,r=e.offset;if(console.log("selection focus",n,r),console.log("selection focus closest real",d.closestByClass(n,"_real",this.guiRootEl)),l.isText(n)&&r<n.data.length){var i=this.doc.createRange();i.setStart(n,r),i.setEnd(n,r+1);var o=i.getBoundingClientRect();console.log("rectangle around character at caret:",o)}}else console.log("no selection focus");d.dumpRange("DOM range: ",this._getDOMSelectionRange()),console.log("input field location",this.inputField.style.top,this.inputField.style.left),console.log("document.activeElement",document.activeElement)},t}();e.CaretManager=y}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(6),n(37)],void 0!==(i=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e,n,r,i){this.manager=t,this.layer=n,this.inputField=r,this.scroller=i,this.suspended=0,this.pendingRefresh=!1;var o=this.el=e.createElement("span");o.className="_wed_caret",o.setAttribute("contenteditable","false"),o.textContent=" ";var a=this.dummy=e.createElement("span");a.textContent=" ",a.style.height="100%",a.style.width="1px",a.style.maxWidth="1px",this.boundRefresh=this.refresh.bind(this)}return t.prototype.suspend=function(){this.suspended++},t.prototype.resume=function(){if(--this.suspended<0)throw new Error("too many calls to resume");this.pendingRefresh&&(this.refresh(),this.pendingRefresh=!1)},t.prototype.refresh=function(){if(this.suspended>0)return void(this.pendingRefresh=!0);var t=this.el,e=this.manager.caret;if(null!=e){var i=r.boundaryXY(e),o=this.scroller.getBoundingClientRect(),a=i.top-o.top+this.scroller.scrollTop,s=i.left-o.left+this.scroller.scrollLeft,u=e.node,c=n.isElement(u)?u:u.parentNode,l=getComputedStyle(c).lineHeight,d=a+"px",f=s+"px";t.style.top=d,t.style.left=f,t.style.height=l,t.style.maxHeight=l,t.style.minHeight=l,null===t.parentNode&&this.layer.append(this.el);var h=this.inputField;Number(h.style.zIndex)>0?(h.style.top=d,h.style.left=f):(h.style.top="",h.style.left="")}},t.prototype.getPositionFromScroller=function(){var t=this.el,e={left:Number(t.style.left.replace("px","")),top:Number(t.style.top.replace("px",""))};if(isNaN(e.left)||isNaN(e.top))throw new Error("NAN for left or top");return e},Object.defineProperty(t.prototype,"inDOM",{get:function(){return null!==this.el.parentNode},enumerable:!0,configurable:!0}),t.prototype.scrollIntoView=function(){var t=this.getPositionFromScroller(),e=this.getBoundingClientRect();this.scroller.scrollIntoView(t.left,t.top,t.left+e.width,t.top+e.height)},t.prototype.getBoundingClientRect=function(){return this.el.getBoundingClientRect()},t}();e.CaretMark=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(6),n(5),n(37)],void 0!==(i=function(t,e,n,r,i){"use strict";function o(t,e){return"edit"===e.getAttributeHandling(t)}function a(t,e,n){var i=r.closestByClass(t.node,"_placeholder",e);if(null!==i){var o=i.parentNode,a=r.indexOf(o.childNodes,i);n&&a++,t=t.make(o,a)}return t}function s(t){var e=t.firstChild;if(!n.isElement(e))throw new Error("docRoot does not contain an element");return e.classList.contains("_placeholder")&&(e=t),e}function u(t,e,n){var i=n.getMode(t),o=i.nodesAroundEditableContents(t),a=o[0],s=o[1];return!(null!==a&&r.indexOf(t.childNodes,a)>=e)&&!(null!==s&&r.indexOf(t.childNodes,s)<e)}function c(t,e){if(void 0===e||void 0===t)return!1;var r=e.firstChild,i=t.lastChild;return n.isElement(r)&&r.classList.contains("_gui")&&!r.classList.contains("_invisible")&&n.isElement(i)&&i.classList.contains("_gui")&&!i.classList.contains("_invisible")}function l(t,e){for(var n=Array.prototype.slice.call(t),r=0,i=n;r<i.length;r++){var o=i[r];if(0!=(o.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING))return o}}function d(t,e,n,r){var i=m[e];if(void 0===i)throw new Error("cannot resolve direction: "+e);return i(t,n,r)}function f(t,e,d){if(null!=t){var f=t.root;t=a(t,f,!0);for(var h=s(e);;){var p=r.closestByClass(t.node,"_gui",f),v=r.nextCaretPosition(t.toArray(),h,!1);if(null===v){t=null;break}t=t.make(v);var m=t.node,y=t.offset,b=r.closest(m,"._gui:not(._invisible)",f);if(null!==b){var g=b.classList.contains("__start_label");if(g&&o(r.closestByClass(b,"_real",f),d)){if(null!==r.closestByClass(m,"_attribute_value",f))break;if(null!==r.closest(m,"._element_name, ._attribute",f)){var _=l(b.getElementsByClassName("_attribute"),m);if(void 0!==_){var w=i.getAttrValueNode(r.childByClass(_,"_attribute_value"));t=t.make(w,0);break}}}if(p===b){t=t.make(b,b.childNodes.length);continue}t=t.make(g||null!==r.closestByClass(m,"_label",b)?m.getElementsByClassName("_element_name")[0]:b,0);break}var x=r.closestByClass(m,"_phantom",f);if(null===x){var E=r.closestByClass(m,"_placeholder",f);if(!(null!==E&&y>0)){if(n.isElement(m)){var T=m.childNodes[y];if(n.isText(T))continue;var C=m.childNodes[y-1];if(c(C,T))break;if(n.isElement(C)&&(n.isElement(T)&&!T.classList.contains("_end_wrapper")&&!C.classList.contains("_start_wrapper")||C.matches("._wed-validation-error, ._gui.__end_label")))continue;if(!u(m,y,d))continue}break}t=t.make(E,E.childNodes.length)}else t=t.make(x,x.childNodes.length)}return null!==t?t:void 0}}function h(t,e,i){if(null!=t){var l=t.root;t=a(t,l,!1);for(var d=s(e);;){var f=r.closestByClass(t.node,"_element_name",l),h=t.node===f&&0===t.offset,p=r.prevCaretPosition(t.toArray(),d,!1);if(null===p){t=null;break}t=t.make(p);var v=t.node,m=t.offset,y=r.closest(v,"._gui:not(._invisible)",l);if(null===y){var b=r.closestByClass(v,"_placeholder",l);if(null!==b){t=t.make(b.firstChild,0);break}var g=r.closestByClass(v,"_phantom",l);if(null===g){if(n.isElement(v)){var _=v.childNodes[m-1];if(n.isText(_))continue;var w=v.childNodes[m];if(c(_,w))break;if(n.isElement(w)&&(n.isElement(_)&&!_.classList.contains("_start_wrapper")&&!w.classList.contains("_end_wrapper")||w.matches("._gui.__start_label, .wed-validation-error")))continue;if(!u(v,m,i))continue}break}t=t.make(g,0)}else{var x=y.classList.contains("__start_label");if(x&&!h&&o(r.closestByClass(y,"_real",l),i)){if(null!==r.closestByClass(v,"_attribute_value",y))break;var E=r.closestByClass(v,"_attribute",y);null===E&&n.isElement(v)&&null!==v.nextElementSibling&&v.nextElementSibling.classList.contains("_attribute")&&(E=v.nextElementSibling),null===E&&(f=r.closestByClass(v,"_element_name",y),E=null!==f?f.nextElementSibling:null);var T=null!==E?E.previousElementSibling:null;if(null===T){var C=y.getElementsByClassName("_attribute");C.length>0&&(T=C[C.length-1])}if(null===T||T.classList.contains("_attribute")||(T=null),null!==T){var N=r.childByClass(T,"_attribute_value");if(m=0,null!==N.lastChild)if(N=N.lastChild,n.isElement(N)&&N.classList.contains("_placeholder"))m=0;else{if(!n.isText(N))throw new Error("unexpected content in attribute value");m=N.length}t=t.make(N,m);break}}if(!h){t=t.make(x||null!==r.closestByClass(v,"_label",y)?y.getElementsByClassName("_element_name")[0]:y,0);break}t=t.make(y,0)}}return null!==t?t:void 0}}function p(t,e,n){if(null!=t){for(var r=i.boundaryXY(t),o=r;r.bottom>o.top;){if(void 0===(t=f(t,e,n)))return;o=i.boundaryXY(t)}for(var a,s=o.bottom,u=1/0;void 0!==t;){var c=Math.abs(o.left-r.left);if(c>u)break;if(s<=o.top)break;u=c,a=t,t=f(t,e,n),void 0!==t&&(o=i.boundaryXY(t))}return a}}function v(t,e,n){if(null!=t){for(var r=i.boundaryXY(t),o=r;r.top<o.bottom;){if(void 0===(t=h(t,e,n)))return;o=i.boundaryXY(t)}for(var a,s=o.top,u=1/0;void 0!==t;){var c=Math.abs(o.left-r.left);if(c>u)break;if(o.bottom<=s)break;u=c,a=t,t=h(t,e,n),void 0!==t&&(o=i.boundaryXY(t))}return a}}Object.defineProperty(e,"__esModule",{value:!0});var m={right:f,left:h,up:v,down:p};e.newPosition=d,e.positionRight=f,e.positionLeft=h,e.positionDown=p,e.positionUp=v}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(5)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){this.converter=t,this.anchor=e,this.focus=void 0===n?e:n}return Object.defineProperty(t.prototype,"range",{get:function(){var t=this.rangeInfo;if(void 0!==t)return t.range},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rangeInfo",{get:function(){return this.anchor.makeRange(this.focus)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collapsed",{get:function(){return this.anchor.equals(this.focus)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wellFormed",{get:function(){var t=this.range;return void 0!==t&&n.isWellFormedRange(t)},enumerable:!0,configurable:!0}),t.prototype.asDataCarets=function(){var t=this.range;if(void 0!==t){var e=this.converter.toDataLocation(t.startContainer,t.startOffset),n=this.converter.toDataLocation(t.endContainer,t.endOffset);if(void 0!==e&&void 0!==n)return[e,n]}},t.prototype.mustAsDataCarets=function(){var t=this.asDataCarets();if(void 0===t)throw new Error("cannot get the selection as data carets");return t},t.prototype.equals=function(t){return null!=t&&(this.focus.equals(t.focus)&&this.anchor.equals(t.anchor))},t}();e.WedSelection=r}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();r=[n,e,n(19),n(49),n(50),n(38)],void 0!==(i=function(t,e,n,r,i,a){"use strict";function s(t,e,n,i,a){var s,u,c,l;return"boolean"==typeof n?(s=void 0,u=e,c=n,l=i):(s=e,u=n,c=i,l=a),function(e){function n(n){return e.call(this,n,t,s,u,c)||this}return o(n,e),n.prototype.execute=function(){l(this.editor)},n}(r.Action)}Object.defineProperty(e,"__esModule",{value:!0}),e.makeAction=s,e.Save=s("Save",a.makeHTML("upload"),!1,function(t){t.save()}),e.Undo=s("Undo",a.makeHTML("undo"),!1,function(t){t.undo()}),e.Redo=s("Redo",a.makeHTML("redo"),!1,function(t){t.redo()}),e.DecreaseLabelVisibilityLevel=s("Decrease label visibility level","Decrease label visibility",a.makeHTML("arrow-down"),!1,function(t){t.decreaseLabelVisiblityLevel()}),e.IncreaseLabelVisibilityLevel=s("Increase label visibility level","Increase label visibility",a.makeHTML("arrow-up"),!1,function(t){t.increaseLabelVisibilityLevel()});var u=function(t){function e(e){var r=t.call(this,e,"Toggle attribute hiding","AH",void 0,!1)||this;return r.pressed=!0,r._events=new n.Subject,r.events=r._events.asObservable(),r}return o(e,t),e.prototype.execute=function(t){this.pressed!==t&&(this.pressed=t,this.editor.toggleAttributeHiding(),this._events.next({name:"Pressed",action:this}))},e.prototype.makeButton=function(t){var e=this,n=new i.ToggleButton(this.pressed,void 0!==t?this.getDescriptionFor(t):this.getDescription(),this.getAbbreviatedDescription(),this.getIcon());return n.events.subscribe(function(){e.execute(n.pressed)}),this.events.subscribe(function(){n.pressed=e.pressed}),n},e}(r.Action);e.ToggleAttributeHiding=u}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(7),n(77),n(13),n(6),n(5),n(74),n(17)],void 0!==(i=function(t,e,n,r,i,u,c,l,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=a(n),r=s(r),d=s(d);var f=function(t){function e(e,n){var r=t.call(this,e)||this;return r.treeUpdater=n,r.treeUpdater.events.subscribe(function(t){switch(t.name){case"InsertNodeAt":r._insertNodeAtHandler(t);break;case"SetTextNodeValue":r._setTextNodeValueHandler(t);break;case"BeforeDeleteNode":r._beforeDeleteNodeHandler(t);break;case"SetAttributeNS":r._setAttributeNSHandler(t)}}),r}return o(e,t),e.prototype._insertNodeAtHandler=function(t){var e=this.fromDataLocation(t.parent,t.index);if(null===e)throw new Error("cannot find gui tree position");var n=r.toHTMLTree(this.tree.ownerDocument,t.node);u.isElement(t.node)&&c.linkTrees(t.node,n),this.insertNodeAt(e,n)},e.prototype._setTextNodeValueHandler=function(t){var e=this.fromDataLocation(t.node,0);if(null===e)throw new Error("cannot find gui tree position");this.setTextNodeValue(e.node,t.value)},e.prototype._beforeDeleteNodeHandler=function(t){var e,r=t.node,i=!1;switch(r.nodeType){case Node.TEXT_NODE:var o=this.fromDataLocation(r,0);if(null===o)throw new Error("cannot find gui tree position");e=o.node;break;case Node.ELEMENT_NODE:e=n.default.data(r,"wed_mirror_node"),i=!0}this.deleteNode(e),i&&(c.unlinkTree(r),c.unlinkTree(e))},e.prototype._setAttributeNSHandler=function(t){var e=this.fromDataLocation(t.node,0);if(null===e)throw new Error("cannot find gui tree position");this.setAttributeNS(e.node,"",d.encodeAttrName(t.attribute),t.newValue)},e.prototype.fromDataLocation=function(t,e){var n;if(t instanceof i.DLoc)n=t.node,e=t.offset;else if(n=t,void 0===e)throw new Error("must specify an offset");var r=this.pathToNode(this.treeUpdater.nodeToPath(n));if(null===r)return null;if(u.isText(n))return i.DLoc.mustMakeDLoc(this.tree,r,e);if(c.isAttr(n))return u.isText(r.firstChild)&&(r=r.firstChild),i.DLoc.mustMakeDLoc(this.tree,r,e);if(0===e)return i.DLoc.mustMakeDLoc(this.tree,r,0);if(e>=n.childNodes.length)return i.DLoc.mustMakeDLoc(this.tree,r,r.childNodes.length);var o=this.pathToNode(this.treeUpdater.nodeToPath(n.childNodes[e]));return null===o?i.DLoc.mustMakeDLoc(this.tree,r,r.childNodes.length):i.DLoc.mustMakeDLoc(this.tree,o)},e}(l.TreeUpdater);e.GUIUpdater=f}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(249),n(7),n(115),n(116)],void 0!==(i=function(t,e,n,r,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),r=a(r),e.Direction=s.Direction;var u="\n<form>\n <div class='form-group'>\n  <label>Search for:</label>\n  <input type='text' name='search' class='form-control'>\n </div>\n <div class='form-group'>\n  <label>Replace with:</label>\n  <input type='text' name='replace' class='form-control'>\n </div>\n <div class='radio'>\n  <span>Direction:</span>\n  <div>\n   <label class='radio-inline'>\n    <input type='radio' name='direction' value='forward'> Forward\n   </label>\n  </div>\n  <div>\n   <label class='radio-inline'>\n    <input type='radio' name='direction' value='backwards'> Backwards\n   </label>\n  <div>\n </div>\n <div class='radio'>\n  <span>Context:</span>\n  <div>\n   <label class='radio-inline'>\n    <input type='radio' name='context' value='text' checked>\n    Only element text\n   </label>\n  </div>\n  <div>\n   <label class='radio-inline'>\n    <input type='radio' name='context' value='attributes'>\n    Only attributes values\n   </label>\n  </div>\n </div>\n</form>",c=function(){function t(t,e,o){var a=this;this.search=new s.SearchReplace(t,e);var c=r.default(u)[0],l=this.dialog=n.dialog({title:"Search/Replace",message:c,onEscape:!0,backdrop:!1,size:"small",buttons:{find:{label:"Find",className:"btn-primary",callback:this.onFind.bind(this)},replaceFind:{label:"Replace and Find",className:"btn-default replace-and-find",callback:this.onReplaceAndFind.bind(this)},replaceAll:{label:"Replace All",className:"btn-default replace-all",callback:this.onReplaceAll.bind(this)},close:{label:"Close"}}});i.makeResizable(l),i.makeDraggable(l);var d=c.elements.namedItem("direction");this.forwardRadioButton=d[0],this.backwardRadioButton=d[1];var f=c.elements.namedItem("context");this.textRadioButton=f[0],this.attributeRadioButton=f[1];var h;switch(o){case s.Direction.FORWARD:h=this.forwardRadioButton;break;case s.Direction.BACKWARDS:h=this.backwardRadioButton;break;default:var p=o;throw new Error("unknown direction: "+p)}h.checked=!0,l.on("hidden.bs.modal",function(){a.search.clearHighlight(),t.caretManager.focusInputField()});var v=this.searchField=c.elements.namedItem("search");r.default(v).on("input",this.onSearchInput.bind(this));var m=this.replaceField=c.elements.namedItem("replace");r.default(m).on("input",this.onReplaceInput.bind(this)),this.replaceButton=l[0].querySelector(".replace-and-find"),this.replaceAll=l[0].querySelector(".replace-all"),this.updateButtons()}return t.prototype.getSearchOptions=function(){var t;if(this.forwardRadioButton.checked)t=s.Direction.FORWARD;else{if(!this.backwardRadioButton.checked)throw new Error("cannot determine direction");t=s.Direction.BACKWARDS}var e;if(this.textRadioButton.checked)e=s.Context.TEXT;else{if(!this.attributeRadioButton.checked)throw new Error("cannot determine context");e=s.Context.ATTRIBUTE_VALUES}return{direction:t,context:e}},t.prototype.onFind=function(){return this.next(),this.updateButtons(),!1},t.prototype.updateButtons=function(){var t=""!==this.replaceField.value;this.replaceButton.disabled=!(t&&this.search.canReplace),this.replaceAll.disabled=!t},t.prototype.onReplaceAndFind=function(){return this.replace(),this.onFind(),!1},t.prototype.onReplaceAll=function(){for(void 0===this.search.current&&this.onFind();null!==this.search.current;)this.search.canReplace&&this.replace(),this.next();return this.updateButtons(),!1},t.prototype.replace=function(){this.search.replace(this.replaceField.value)},t.prototype.next=function(){this.search.next(this.getSearchOptions())},t.prototype.onSearchInput=function(){var t=this.searchField.value;t!==this.previousSearchValue&&(this.previousSearchValue=t,this.search.updatePattern(t,this.getSearchOptions()),this.updateButtons())},t.prototype.onReplaceInput=function(){this.updateButtons()},t}();e.DialogSearchReplace=c}.apply(e,r))&&(t.exports=i)},function(t,e){t.exports=a},function(t,e){t.exports=s},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(252),n(13),n(6),n(5)],void 0!==(i=function(t,e,n,r,i,a){"use strict";function s(t){throw new Error("unknown direction: "+t)}function u(t){var e=(n={},n[l.FORWARD]="forward",n[l.BACKWARDS]="backward",n)[t];return void 0===e?s(t):e;var n}function c(t,e,n){var r=t.createRange();return r.selectNode(e),r.compareBoundaryPoints(Range.START_TO_START,n)>=0&&r.compareBoundaryPoints(Range.END_TO_END,n)<=0}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var l;!function(t){t[t.FORWARD=0]="FORWARD",t[t.BACKWARDS=1]="BACKWARDS"}(l=e.Direction||(e.Direction={}));var d;!function(t){t[t.EVERYWHERE=0]="EVERYWHERE",t[t.TEXT=1]="TEXT",t[t.ATTRIBUTE_VALUES=2]="ATTRIBUTE_VALUES"}(d=e.Context||(e.Context={}));var f=function(){function t(t,e){this.values=t,this.direction=e,this.resetToStart()}return t.prototype.reset=function(t){this.current=t},t.prototype.resetToStart=function(){switch(this.direction){case l.FORWARD:this.current=0;break;case l.BACKWARDS:this.current=this.values.length-1;break;default:return s(this.direction)}},Object.defineProperty(t.prototype,"hasNext",{get:function(){switch(this.direction){case l.FORWARD:return this.current<this.values.length;case l.BACKWARDS:return this.current>=0;default:return s(this.direction)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"next",{get:function(){var t=this.values[this.current];return this.inc(),t},enumerable:!0,configurable:!0}),t.prototype.inc=function(){switch(this.direction){case l.FORWARD:this.current++;break;case l.BACKWARDS:this.current--;break;default:return s(this.direction)}},t}(),h=function(){function t(t,e,n,i){this.caretManager=t,this.guiRoot=e,this.start=n,this._pattern="",this.direction=l.FORWARD,this.context=d.EVERYWHERE,this.root=r.getRoot(e),this.setScope(i);var o=this.scope;if(o.start.compare(n)>0||o.end.compare(n)<0)throw new Error("the scope does not contain the start position");this.start=n}return Object.defineProperty(t.prototype,"pattern",{get:function(){return this._pattern},set:function(t){this._pattern=t},enumerable:!0,configurable:!0}),t.prototype.setScope=function(t){if(void 0===t)return void(this._scope=void 0);if(!t.isValid())throw new Error("passed an invalid range");var e=t.start,n=t.end;if(e.root!==this.root.node)throw new Error("the range does not use the search's root");this._scope=e.compare(n)>0?new r.DLocRange(n,e):new r.DLocRange(e,n)},Object.defineProperty(t.prototype,"scope",{get:function(){return void 0===this._scope&&(this._scope=new r.DLocRange(r.DLoc.mustMakeDLoc(this.root,this.guiRoot,0),r.DLoc.mustMakeDLoc(this.root,this.guiRoot,this.guiRoot.childNodes.length))),this._scope},enumerable:!0,configurable:!0}),t.prototype.updateCurrent=function(){this._next(!0)},t.prototype.next=function(){this._next(!1)},t.prototype._next=function(t){var e=null;if(""!==this.pattern){var n=void 0,i=void 0;switch(this.direction){case l.FORWARD:i=this.getForwardSearchStart(t),n=this.scope.start;break;case l.BACKWARDS:i=this.getBackwardSearchStart(t),n=this.scope.end;break;default:return s(this.direction)}var o=this.find(i,this.direction);null!==o?e=new r.DLocRange(r.DLoc.mustMakeDLoc(this.root,o.startContainer,o.startOffset),r.DLoc.mustMakeDLoc(this.root,o.endContainer,o.endOffset)):this.start=n}this.current=e},t.prototype.find=function(t,e){return this.context===d.ATTRIBUTE_VALUES?this.findAttributeValue(t,e):this.findText(t,u(e))},t.prototype.findText=function(t,e){var o=n.config,a=new n.WrappedRange(t.makeRange());this.context===d.TEXT&&(o.customIsCollapsedNode=function(t){return i.isElement(t)&&null!==t.closest("._phantom")});var s=a.findText(this.pattern,{withinRange:this.scope.mustMakeDOMRange(),direction:e});if(s){var u=r.DLoc.mustMakeDLoc(this.guiRoot,a.startContainer,a.startOffset);this.scope.contains(u)||(s=!1)}return o.customIsCollapsedNode=void 0,s?a.nativeRange:null},t.prototype.findAttributeValue=function(t,e){var n=this.guiRoot,i=Array.from(n.getElementsByClassName("_attribute_value")),o=this.caretManager,u=new f(i,e),d=a.closestByClass(t.node,"_attribute_value",n),h=n.ownerDocument,p=this.scope.mustMakeDOMRange();if(null===d){for(var v=void 0;u.hasNext;){var m=u.next;if(c(h,m,p)&&0!=(m.compareDocumentPosition(t.node)&Node.DOCUMENT_POSITION_PRECEDING)){v=m;break}}if(void 0===v)return null;t=t.make(v,0)}else{var y=i.indexOf(d);if(-1===y)throw new Error("internal error: cannot find value in array!");u.reset(y),u.inc()}for(var b=o.toDataLocation(t);;){var g=b.node,y=void 0;switch(e){case l.FORWARD:y=g.value.indexOf(this.pattern,b.offset);break;case l.BACKWARDS:var _=b.offset-this.pattern.length;y=_<0?-1:g.value.lastIndexOf(this.pattern,_);break;default:return s(e)}if(-1!==y){var w=o.mustFromDataLocation(b.makeWithOffset(y)),x=o.mustFromDataLocation(b.makeWithOffset(y+this.pattern.length));if(this.scope.contains(w)&&this.scope.contains(x))return new r.DLocRange(w,x).mustMakeDOMRange()}for(var E=null;null===E&&u.hasNext;)E=u.next,c(h,E,p)||(E=null);if(null===E)return null;var T=o.toDataLocation(E,0);switch(e){case l.FORWARD:break;case l.BACKWARDS:T=T.makeWithOffset(T.node.value.length);break;default:return s(e)}b=T}},t.prototype.getForwardSearchStart=function(t){return null!=this.current?t?this.current.start:this.current.end:this.start},t.prototype.getBackwardSearchStart=function(t){var e;return null!=this.current&&(e=t?this.prevEnd:this.current.start),void 0===e&&(e=this.start),this.prevEnd=e,e},t}();e.Search=h}.apply(e,r))&&(t.exports=i)},function(t,e){t.exports=u},function(t,e,n){var r,i;r=[n,e,n(13),n(6),n(5),n(39),n(117),n(256),n(38),n(257),n(119)],void 0!==(i=function(t,e,n,r,i,o,a,s,u,c,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d={undefined:"",true:" before this element",false:" after this element"},f=function(){function t(t){this.editor=t,this.caretManager=t.caretManager,this.modeTree=t.modeTree,this.guiRoot=t.guiRoot,this.dataRoot=t.dataRoot,this.doc=this.guiRoot.ownerDocument}return t.prototype.contextMenuHandler=function(t){var e=this.caretManager.sel;if(void 0===e||!e.collapsed&&!e.wellFormed)return!1;var n=e.focus.node,o=e.focus.offset;if(!r.isElement(n)){var s=n.parentNode;if(null===s)throw new Error("contextMenuHandler invoked on detached node");o=i.indexOf(s.childNodes,n),n=s}var u=i.closestByClass(n,"_placeholder",this.guiRoot);if(null!==u){var c=u.parentNode;if(null===c)throw new Error("contextMenuHandler invoked on detached node");o=i.indexOf(c.childNodes,u),n=c}var l=i.closestByClass(n,"_real",this.guiRoot),d=null!==l&&l.classList.contains("_readonly"),f=null!==i.closestByClass(n,"_attribute_value",this.guiRoot)?this.getMenuItemsForAttribute:this.getMenuItemsForElement,h=f.call(this,n,o,!e.collapsed);return 0===h.length||(this.setupContextMenu(a.ActionContextMenu,h,d,t),!1)},t.prototype.dismiss=function(){void 0!==this.currentDropdown&&this.currentDropdown.dismiss(),void 0!==this.currentTypeahead&&this.currentTypeahead.dismiss()},t.prototype.setupContextMenu=function(t,e,n,r,i){var o=this.computeMenuPosition(r,i);this.displayContextMenu(a.ActionContextMenu,o.left,o.top,e,n)},t.prototype.displayContextMenu=function(t,e,n,r,i){var a=this,s=Object.create(null);r=r.filter(function(t){var e=(null!==t.action?t.action.getDescription():"")+"\0";null!==t.data&&(e+=t.data.name);var n=!s[e];return s[e]=!0,n&&i?!(t.action instanceof o.Transformation):n}),this.dismiss(),this.caretManager.pushSelection(),this.currentDropdown=new t(this.doc,e,n,r,function(){a.currentDropdown=void 0,a.caretManager.popSelection()})},t.prototype.getMenuItemsForAttribute=function(){return[]},t.prototype.getMenuItemsForElement=function(t,e,r){for(var i,o=this,a=t;null!==a&&a.classList.contains("_phantom");)i=a,a=a.parentNode;if(null===a||!this.guiRoot.contains(a))return[];void 0!==i&&(e=this.caretManager.normalizeToEditableRange(n.DLoc.mustMakeDLoc(this.guiRoot,i)).offset);var s=[],u=function(t,e){var n=o.makeMenuItemForAction(e,t);s.push({action:e,item:n,data:t})};if(!a.parentNode.classList.contains("_gui")){var c=this.caretManager.toDataLocation(a,e);if(void 0===c)throw new Error("cannot find tree caret");var l=c.node,d=l.tagName,f=this.modeTree.getMode(l);s.push.apply(s,this.makeCommonItems(l));for(var h=this.editor.getElementTransformationsAt(c,r?"wrap":"insert"),p=0,v=h;p<v.length;p++){var m=v[p];u(void 0!==m.name?{name:m.name}:null,m.tr)}if(l!==this.dataRoot.firstChild&&l!==this.dataRoot)for(var y=f.getContextualActions(["unwrap","delete-parent","split"],d,l,0),b=0,g=y;b<g.length;b++){var _=g[b];u({node:l,name:d},_)}}var w=$(a).parents().addBack().siblings("[data-wed--separator-for]").first(),x=void 0!==w[0]?w[0].getAttribute("data-wed--separator-for"):null;if(null!==x)for(var E=w.siblings().filter(function(){return this.contains(a)})[0],f=this.modeTree.getMode(E),y=f.getContextualActions(["merge-with-next","merge-with-previous","append","prepend"],x,$.data(E,"wed_mirror_node"),0),T=0,C=y;T<C.length;T++){var _=C[T];u({node:E,name:x},_)}return s},t.prototype.makeCommonItems=function(t){var e=[];if(r.isElement(t)){var n=t.tagName,i=this.modeTree.getMode(t),o=i.documentationLinkFor(n);if(null!=o){var a=this.makeDocumentationMenuItem(o);e.push({action:null,item:a,data:null})}}return e},t.prototype.makeMenuItemForAction=function(t,e,n){var r=t.getIcon(),a=i.htmlToElements("<li><a tabindex='0' href='#'>"+(void 0!==r?r+" ":"")+"</a></li>",this.doc)[0];t instanceof o.Transformation&&void 0!==t.kind&&a.setAttribute("data-kind",t.kind);var s=a.firstElementChild,u=this.doc.createTextNode(t.getDescriptionFor(e)+d[String(n)]);return s.appendChild(u),s.normalize(),$(s).click(e,t.boundTerminalHandler),a},t.prototype.makeDocumentationMenuItem=function(t){var e=this,n=u.makeHTML("documentation"),r=i.htmlToElements("<li><a tabindex='0' href='#'>"+n+" Element's documentation.</a></li>",this.doc)[0],o=r.firstElementChild;return $(o).click(function(){e.editor.openDocumentationLink(t)}),r},t.prototype.getPossibleAttributeValues=function(){var t=this.caretManager.sel;if(void 0===t||!t.collapsed)return[];var e=this.caretManager.getNormalizedCaret(),n=e.node,r=i.closestByClass(n,"_attribute_value",this.guiRoot);if(null===r||i.isNotDisplayed(r,this.guiRoot))return[];var o=this.caretManager.getDataCaret(),a=o.node,s=this.modeTree.getMode(a),u=s.getAttributeCompletions(a);return 0===u.length&&this.editor.validator.possibleAt(o.node,0).forEach(function(t){if("attributeValue"===t.params[0]){var e=t.params[1];e instanceof RegExp||u.push(e)}}),u},t.prototype.setupCompletionMenu=function(){var t=this;this.dismiss();var e=this.getPossibleAttributeValues();if(0!==e.length){var n=this.caretManager.getDataCaret();if(void 0!==n){var r=n.node;if(n.offset===r.value.length){for(var i=[],o=0,a=e;o<a.length;o++){var u=a[o];0===u.lastIndexOf(r.value,0)&&i.push(u)}if(0!==i.length&&(1!==i.length||i[0]!==r.value)){var c=this.computeMenuPosition(void 0,!0);this.caretManager.pushSelection();var l=this.currentDropdown=new s.CompletionMenu(this.editor,this.guiRoot.ownerDocument,c.left,c.top,r.value,e,function(){t.currentDropdown=void 0,l.focused?t.caretManager.popSelection():t.caretManager.popSelectionAndDiscard()})}}}}},t.prototype.setupReplacementMenu=function(){var t=this;this.dismiss();var e=this.getPossibleAttributeValues();if(0!==e.length){var n=this.caretManager.getDataCaret();if(void 0!==n){var r=this.computeMenuPosition(void 0,!0);this.caretManager.pushSelection(),this.currentDropdown=new c.ReplacementMenu(this.editor,this.guiRoot.ownerDocument,r.left,r.top,e,function(e){if(t.currentDropdown=void 0,t.caretManager.popSelection(),void 0!==e){var r=n.node,i=null!==r.namespaceURI?r.namespaceURI:"";t.editor.dataUpdater.setAttributeNS(r.ownerElement,i,r.name,e)}})}}},t.prototype.setupTypeaheadPopup=function(t,e,n,r,i,o){var a=this.computeMenuPosition(i,o);return this.displayTypeaheadPopup(a.left,a.top,t,e,n,r)},t.prototype.displayTypeaheadPopup=function(t,e,n,r,i,o){var a=this;return this.dismiss(),this.caretManager.pushSelection(),this.currentTypeahead=new l.TypeaheadPopup(this.doc,t,e,n,r,i,function(t){a.currentTypeahead=void 0,a.caretManager.popSelection(),void 0!==o&&o(t)}),this.currentTypeahead},t.prototype.computeMenuPosition=function(t,e){if(void 0===e&&(e=!1),void 0===t&&(t={}),"mousedown"===t.type||"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type)return{left:t.clientX,top:t.clientY};var n=this.caretManager.mark;if(n.inDOM){n.scrollIntoView(),n.refresh();var r=n.getBoundingClientRect();return{top:e?r.bottom:r.top+r.height/2,left:r.left}}var o=i.closestByClass(this.caretManager.caret.node,"_gui",this.guiRoot);if(null!==o){var r=o.getBoundingClientRect();return{top:e?r.bottom:r.top+r.height/2,left:r.left+r.width/2}}throw new Error("no position for displaying the menu")},t}();e.EditingMenuManager=f}.apply(e,r))&&(t.exports=i)},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(7),n(23),n(52)],void 0!==(i=function(t,e,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=a(n),r=s(r);var u=function(t){function e(e,n,r,i,o,a,s){var u=t.call(this,n,r,i,[],s,!1)||this;return u._focused=!1,u.completionPrefix=o,u.completionItems=a,u.editor=e,u.dropdown.classList.add("wed-completion-menu"),null!==u.dropdown.firstElementChild.getAttribute("data-toggle")&&u.dropdown.removeChild(u.dropdown.firstChild),u.backdrop.parentNode.removeChild(u.backdrop),u.boundCompletionKeydownHandler=u.globalKeydownHandler.bind(u),e.pushGlobalKeydownHandler(u.boundCompletionKeydownHandler),e.caretManager.focusInputField(),u.display([]),u}return o(e,t),Object.defineProperty(e.prototype,"focused",{get:function(){return this._focused},enumerable:!0,configurable:!0}),e.prototype.globalKeydownHandler=function(t,e){return r.ENTER.matchesEvent(e)?(this.$menu.find("li:not(.divider):visible a").first().click(),!1):r.DOWN_ARROW.matchesEvent(e)?(this._focused=!0,this.$menu.find("li:not(.divider):visible a").first().focus(),this.$menu.trigger(e),!1):!r.ESCAPE.matchesEvent(e)||(this.dismiss(),!1)},e.prototype.render=function(){function e(t){r.type(t.data)}for(var r=this.editor,i=[],o=this.completionPrefix,a=r.doc,s=0,u=this.completionItems;s<u.length;s++){var c=u[s];if(""===o){var l=a.createElement("li");l.innerHTML="<a href='#'></a>",l.lastChild.textContent=c,i.push(l),n.default(l).click(c,e)}else if(0===c.lastIndexOf(o,0)){var l=a.createElement("li");l.innerHTML="<a href='#'><b></b></a>";var d=l.lastChild;d.firstChild.textContent=c.slice(0,o.length);var f=c.slice(o.length);d.appendChild(a.createTextNode(f)),i.push(l),n.default(l).click(f,e)}}0===i.length&&this.dismiss(),1===i.length&&this.completionItems[0]===o&&this.dismiss(),t.prototype.render.call(this,i)},e.prototype.dismiss=function(){this.dismissed||(this.editor.popGlobalKeydownHandler(this.boundCompletionKeydownHandler),t.prototype.dismiss.call(this))},e}(i.ContextMenu);e.CompletionMenu=u}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(7),n(52)],void 0!==(i=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=a(n);var i=function(t){function e(e,n,r,i,o,a){var s=t.call(this,n,r,i,[],function(){a(s.selected)},!1)||this;return s.replacementItems=o,s.editor=e,s.dropdown.classList.add("wed-replacement-menu"),s.display([]),s}return o(e,t),e.prototype.render=function(){for(var e=this,r=[],i=this.editor.doc,o=0,a=this.replacementItems;o<a.length;o++){var s=a[o];!function(t){var o=i.createElement("li");o.innerHTML="<a href='#'></a>",o.lastChild.textContent=t,r.push(o),n.default(o).click(t,function(){e.selected=t,e.dismiss()})}(s)}t.prototype.render.call(this,r)},e.prototype.dismiss=function(){this.dismissed||t.prototype.dismiss.call(this)},e}(r.ContextMenu);e.ReplacementMenu=i}.apply(e,r))&&(t.exports=i)},function(t,e){t.exports=c},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();r=[n,e,n(120)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,e)||this;return n.el=e,n}return o(e,t),e.prototype.select=function(t){if(t.parentNode!==this.el)throw new Error("marker is not a child of the layer element");this.unselectAll(),t.classList.add("selected")},e.prototype.unselectAll=function(){for(var t=this.el.firstElementChild;null!==t;)t.classList.remove("selected"),t=t.nextElementSibling},e}(n.Layer);e.ErrorLayer=r}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(7),n(19),n(23)],void 0!==(i=function(t,e,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var a=function(){function t(t){this._enabled=!1,this._events=new r.Subject,this.events=this._events.asObservable(),this.$top=n.default(t),this.$top.append("<label></label>&nbsp;<input type='text'>"),this.promptEl=t.getElementsByTagName("label")[0],this.input=t.getElementsByTagName("input")[0];var e=this.$input=n.default(this.input);e.on("input",this.onInput.bind(this)),e.on("keypress",this.onKeypress.bind(this)),e.on("keydown",this.onKeydown.bind(this)),this.disable()}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),t.prototype.enable=function(){this._enabled=!0,this.input.disabled=!1,this.input.style.display="",this.input.focus()},t.prototype.disable=function(){this._enabled=!1,this.input.disabled=!0,this.input.value="",this.input.style.display="none"},t.prototype.installClient=function(t){this.client=t,this.keydownHandler=t.onMinibufferKeydown.bind(t),this.clientSubscription=this.events.subscribe(t.onMinibufferChange.bind(t)),this.enable()},t.prototype.uninstallClient=function(){var t=this.client;void 0!==t&&(this.client=void 0,this.keydownHandler=void 0,this.clientSubscription.unsubscribe(),this.disable(),this.prompt="",this.previous=void 0,t.onUninstall())},Object.defineProperty(t.prototype,"prompt",{get:function(){return this.promptEl.textContent},set:function(t){this.promptEl.textContent=t},enumerable:!0,configurable:!0}),t.prototype.forwardEvent=function(t){"keypress"===t.type&&(this.input.value+=String.fromCharCode(t.which)),this.$input.trigger(t)},t.prototype.onKeydown=function(t){return i.ESCAPE.matchesEvent(t)?(this.uninstallClient(),!1):(null==this.keydownHandler||!1!==this.keydownHandler(t))&&void 0},t.prototype.onKeypress=function(t){var e=this.input.value;e!==this.previous&&(this.previous=e,this._events.next({name:"ChangeEvent",value:e}))},t.prototype.onInput=function(t){var e=this.input.value;e!==this.previous&&(this.previous=e,this._events.next({name:"ChangeEvent",value:e}))},t}();e.Minibuffer=a}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(7),n(75),n(262)],void 0!==(i=function(t,e,n,r){"use strict";function i(t,e){var i=void 0===e?a:r.default(a,e);n.default.notify({message:t},i)}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),r=o(r);var a={element:"body",type:"info",placement:{from:"top",align:"center"},delay:1e3};e.notify=i}.apply(e,r))&&(t.exports=i)},function(t,e){t.exports=l},function(t,e,n){var r,i;r=[n,e,n(23),n(116)],void 0!==(i=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Direction=r.Direction;var i=function(){function t(t,e,n){this.editor=t,this.direction=n,this.search=new r.SearchReplace(t,e),t.minibuffer.installClient(this),this.updatePrompt()}return t.prototype.updatePrompt=function(){this.editor.minibuffer.prompt=(t={},t[r.Direction.FORWARD]="Search forward:",t[r.Direction.BACKWARDS]="Search backwards:",t)[this.direction];var t},t.prototype.onMinibufferKeydown=function(t){return n.QUICKSEARCH_FORWARD.matchesEvent(t)?(this.direction=r.Direction.FORWARD,this.next(),!1):n.QUICKSEARCH_BACKWARDS.matchesEvent(t)?(this.direction=r.Direction.BACKWARDS,this.next(),!1):void 0},t.prototype.getSearchOptions=function(){return{direction:this.direction,context:r.Context.TEXT}},t.prototype.next=function(){this.updatePrompt(),this.search.next(this.getSearchOptions())},t.prototype.onMinibufferChange=function(t){this.search.updatePattern(t.value,this.getSearchOptions())},t.prototype.onUninstall=function(){this.search.clearHighlight(),this.search.setCaretToMatch()},t}();e.QuickSearch=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(50)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var t=this.top=document.createElement("div");this.top.className="wed-toolbar",this.divider=document.createElement("span"),this.divider.className="wed-toolbar-divider",this.modeSpan=document.createElement("span"),t.appendChild(this.divider),t.appendChild(this.modeSpan)}return t.prototype.addButton=function(t,e){void 0===e&&(e={}),t instanceof n.Button&&(t=[t]);var r=!0===e.prepend,i=!0===e.right;if(r&&i)throw new Error("cannot use prepend and right at the same time.");for(var o=this.top,a=o.ownerDocument.createDocumentFragment(),s=0,u=t;s<u.length;s++){var c=u[s];if(i){var l=o.ownerDocument.createElement("span");l.className=i?"pull-right":"",c.render(l),a.appendChild(l)}else c.render(a)}i?o.appendChild(a):o.insertBefore(a,r?o.firstChild:this.divider)},t.prototype.setModeButtons=function(t){this.modeSpan.innerHTML="";for(var e=0,n=t;e<n.length;e++){n[e].render(this.modeSpan)}},t}();e.Toolbar=r}.apply(e,r))&&(t.exports=i)},function(t,e){t.exports=d},function(t,e,n){var r,i,o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(75),n(5),n(267),n(268)],void 0!==(i=function(t,e,n,r,i,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=s(n);var c=function(){function t(t,e,n,r,i){this.mode=t,this.editor=e,this.selector=n,this.submodes=r,this.wedOptions=i}return t.prototype.containingElement=function(t,e){if(!t.contains(e))return null;if(""===this.selector)return t;for(var n=t.querySelectorAll(this.selector),r=0,i=Array.from(n);r<i.length;r++){var o=i[r];if(o.contains(e))return o}return null},t.prototype.reduceTopFirst=function(t,e){for(var n=t(e,this),r=0,i=this.submodes;r<i.length;r++){n=i[r].reduceTopFirst(t,n)}return n},t.prototype.eachTopFirst=function(t){t(this);for(var e=0,n=this.submodes;e<n.length;e++){n[e].eachTopFirst(t)}},Object.defineProperty(t.prototype,"attributeHidingSpecs",{get:function(){if(void 0===this._attributeHidingSpecs){var t=this.wedOptions.attributes.autohide;if(void 0===t)this._attributeHidingSpecs=null;else{var e=t.method;if("selector"!==e)throw new Error("unknown attribute hiding method: "+e);for(var i={elements:[]},o=0,a=t.elements;o<a.length;o++){var s=a[o],u=n.default({},s);u.selector=r.toGUISelector(u.selector,this.mode.getAbsoluteNamespaceMappings()),i.elements.push(u)}this._attributeHidingSpecs=i}}return this._attributeHidingSpecs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decorator",{get:function(){return void 0===this._decorator&&(this._decorator=this.mode.makeDecorator()),this._decorator},enumerable:!0,configurable:!0}),t}(),l=function(){function t(t,e){this.editor=t,this.option=e,this.loader=new i.ModeLoader(t,t.runtime)}return t.prototype.init=function(){return o(this,void 0,void 0,function(){var t,e;return a(this,function(n){switch(n.label){case 0:return t=[],e=this,[4,this.makeNodes("",this.option,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t.push("mode at path "+e+" has an error in its wed options: "+o)}})];case 1:if(e.root=n.sent(),t.length>0)throw new Error("wed options are incorrect: "+t.join(""));return[2,this]}})})},t.prototype.makeNodes=function(t,e,n){return o(this,void 0,void 0,function(){var i,o,s,l,d,f,h;return a(this,function(a){switch(a.label){case 0:return i=e.submode,[4,this.loader.initMode(e.path,e.options)];case 1:return o=a.sent(),void 0===i?[3,3]:[4,this.makeNodes(r.toGUISelector(i.selector,o.getAbsoluteNamespaceMappings()),i.mode,n)];case 2:return l=[a.sent()],[3,4];case 3:l=[],a.label=4;case 4:return s=l,d=o.getWedOptions(),f=u.processWedOptions(d),Array.isArray(f)?(n(e.path,f),h=d):h=f,[2,new c(o,this.editor,t,s,h)]}})})},t.prototype.getMode=function(t){return this.getModeNode(t).mode},t.prototype.getDecorator=function(t){return this.getModeNode(t).decorator},t.prototype.getWedOptions=function(t){return this.getModeNode(t).wedOptions},t.prototype.getAttributeHandling=function(t){return this.getWedOptions(t).attributes.handling},t.prototype.getAttributeHidingSpecs=function(t){return this.getModeNode(t).attributeHidingSpecs},t.prototype.getModeNode=function(t){if(0===this.root.submodes.length)return this.root;if(r.contains(this.editor.dataRoot,t)){var e=this.editor.fromDataNode(t);null!==e&&(t=e)}if(!this.editor.guiRoot.contains(t))throw new Error("did not pass a node in the GUI or data tree");var n=this._getModeNode(this.root,this.editor.guiRoot,t);if(void 0===n)throw new Error("cannot find a mode for the node; something is wrong");return n},t.prototype._getModeNode=function(t,e,n){var r=t.containingElement(e,n);if(null!==r){for(var i=void 0,o=0,a=t.submodes;o<a.length;o++){var s=a[o];if(void 0!==(i=this._getModeNode(s,r,n)))return i}return t}},t.prototype.getStylesheets=function(){return Object.keys(this.root.reduceTopFirst(function(t,e){for(var n=0,r=e.mode.getStylesheets();n<r.length;n++){t[r[n]]=!0}return t},Object.create(null)))},t.prototype.getMaxLabelLevel=function(){return this.maxLabelLevelNode.wedOptions.label_levels.max},t.prototype.getInitialLabelLevel=function(){return this.maxLabelLevelNode.wedOptions.label_levels.initial},Object.defineProperty(t.prototype,"maxLabelLevelNode",{get:function(){return void 0===this.cachedMaxLabelNode&&(this.cachedMaxLabelNode=this.root.reduceTopFirst(function(t,e){var n=t.wedOptions.label_levels.max;return e.wedOptions.label_levels.max>n?e:t},this.root)),this.cachedMaxLabelNode},enumerable:!0,configurable:!0}),t.prototype.getValidators=function(){return this.root.reduceTopFirst(function(t,e){var n=e.mode.getValidator();return void 0!==n?t.concat(n):t},[])},t.prototype.addDecoratorHandlers=function(){this.root.eachTopFirst(function(t){t.decorator.addHandlers()})},t.prototype.startListening=function(){this.root.eachTopFirst(function(t){t.decorator.startListening()})},t}();e.ModeTree=l}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s};r=[n,e],void 0!==(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.editor=t,this.runtime=e}return t.prototype.initMode=function(t,e){return void 0===e&&(e={}),o(this,void 0,void 0,function(){var n,r;return a(this,function(i){switch(i.label){case 0:return[4,this.loadMode(t)];case 1:return n=i.sent(),r=new n.Mode(this.editor,e),[4,r.init()];case 2:return i.sent(),[2,r]}})})},t.prototype.loadMode=function(t){return o(this,void 0,void 0,function(){var e,n,r,i;return a(this,function(o){switch(o.label){case 0:e=this.runtime,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.resolveModules(t)];case 2:return[2,o.sent()[0]];case 3:return n=o.sent(),[3,4];case 4:if(-1!==t.indexOf("/"))throw new Error("can't load mode "+t);t="wed/modes/"+t+"/"+t,o.label=5;case 5:return o.trys.push([5,7,,8]),[4,e.resolveModules(t)];case 6:return[2,o.sent()[0]];case 7:return r=o.sent(),[3,8];case 8:return o.trys.push([8,10,,11]),[4,e.resolveModules(t+"-mode")];case 9:return[2,o.sent()[0]];case 10:return i=o.sent(),[3,11];case 11:return[4,e.resolveModules(t+"_mode")];case 12:return[2,o.sent()[0]]}})})},t}();e.ModeLoader=n}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(103),n(269)],void 0!==(i=function(t,e,n,r){"use strict";function i(){return void 0===u&&(u=(new n.default).compile(r)),u}function s(t){var e=[],n=i();if(!n(t)){if(null!=n.errors)for(var r=0,o=n.errors;r<o.length;r++){var a=o[r];e.push(a.dataPath+" "+a.message)}return e}var s=t.label_levels.max;if(t.label_levels.initial>s&&e.push("label_levels.initial must be <= label_levels.max"),void 0===t.attributes&&(t.attributes="hide"),"string"==typeof t.attributes){var u=t.attributes;t.attributes={handling:u}}return 0!==e.length?e:t}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),r=a(r);var u;e.processWedOptions=s}.apply(e,r))&&(t.exports=i)},function(t,e){t.exports={$schema:"http://json-schema.org/schema#",$id:"http://btw.mangalam-research.org/schemas/wed/wed-options.json",title:"Wed Options",description:"A schema describing the wed options that modes may set.",definitions:{simpleAttributesSpec:{type:"object",properties:{handling:{description:"Determines how attributes are handled.",type:"string",enum:["hide"]}},required:["handling"],additionalProperties:!1},complexAttributesSpec:{type:"object",properties:{handling:{description:'Determines how attributes are handled. The values are the same as described above with the exception that "hide" is not valid here.',type:"string",enum:["show","edit"]},autohide:{description:"Describes attributes that may be autohidden. If absent then no attributes are autohidden.",type:"object",properties:{method:{description:"The method by which attributes are described.",type:"string",enum:["selector"]},elements:{description:"Elements which have autohide enabled.",type:"array",items:{type:"object",properties:{selector:{description:"CSS selector matching one or more elements. This selector must use the prefixes defined by the mode\\'s metadata. This selector is subject to limitations explained in ``domutil.toGUISelector``. The hiding algorithm ceases searching for matches as soon as one selector matches.",type:"string"},attributes:{description:"Specifies the attributes to hide. The array is executed in order when matching attributes. Later elements in the array override earlier elements.",type:"array",items:{oneOf:[{description:'Local name (optionally prefixed) of the attributes to hide. The specisl special name "*" means "match all attributes".',type:"string"},{description:"An exclusion from the attributes to hide.",type:"object",properties:{except:{description:"The list of attributes to exclude.",type:"array",items:{type:"string"}}},additionalProperties:!1,required:["except"]}]}}},additionalProperties:!1,required:["selector","attributes"]}}},additionalProperties:!1,required:["method","elements"]}},additionalProperties:!1,required:["handling"]}},type:"object",properties:{metadata:{description:"Information describing the mode.",type:"object",properties:{name:{description:"The mode's name.",type:"string"},authors:{description:"The authors of the mode.",type:"array",items:{type:"string"}},description:{description:"The description of the mode.",type:"string"},license:{description:"The licence under which the mode is distributed.",type:"string"},copyright:{description:"Copyright information (holders, dates, etc.)",type:"string"}},additionalProperties:!1,required:["name","authors","description","license","copyright"]},label_levels:{description:"Options regarding the levels labels may take.",type:"object",properties:{max:{description:"The maximum label level that the mode uses.",type:"integer",minimum:1},initial:{description:'The initial label level to start. It must be less or equal to "max".',type:"integer",minimum:1}},additionalProperties:!1,required:["max","initial"]},attributes:{description:'Options regarding how attributes are handled. If it is a string then it must be "hide", "show" or "edit".  The value "hide" means hide all attributes and do not allow direct editing. The value "show" means show the attributes but do not allow direct editing. The value "edit" means show attributes and allow direct editing of attributes. By "direct editing" we mean editing of attributes as attributes. Note that indirect editing of attributes is always allowed. A mode could bring up a modal didalog to perform an action that modifies attributes behind the scenes no matter what the option here says.\nAlso note that a mode may prevent editing of attributes on a case-by-case basis by not returning actions that edit attribute values. The setting here operates coarsely.\nThe value may be an object in order to use more features.',oneOf:[{type:"string",enum:["hide","show","edit"]},{$ref:"#/definitions/simpleAttributesSpec"},{$ref:"#/definitions/complexAttributesSpec"}]}},additionalProperties:!1,required:["metadata","label_levels"]}},function(t,e,n){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";/**
     * The onbeforeunload handler for wed.
     * @author Louis-Dominique Dubeau
     * @license MPL 2.0
     * @copyright Mangalam Research Center for Buddhist Languages
     */
function n(){return!0}function r(t,e,r){function i(){var t=e();return t||void 0}if(void 0===e&&(e=n),void 0===r&&(r=!1),null!=t.onbeforeunload&&t.onbeforeunload.installedByOnbeforeunload&&!r)throw new Error("reregistering window with `force` false");i.installedByOnbeforeunload=!0,t.onbeforeunload=i}Object.defineProperty(e,"__esModule",{value:!0}),e.install=r}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r;void 0!==(r=function(t,e){"use strict";function r(){m=!1,l&&(d.clearTimeout(l),l=void 0),v.off(),v.modal("hide"),v.remove()}function i(){return m}function o(t,e){p(document.body).append(v),v.find(".save-messages")[0].innerHTML=t,v.find(".error-message")[0].textContent=e,v.on("hide.bs.modal.modal",function(){v.remove(),window.location.reload()}),v.modal()}function a(t){var e="";if("error"===t.type){var n=t.message,r=t.filename,i=t.lineno,o=t.colno,a=t.error;a?e=a.stack:(e=r+":"+i,o&&(e+="."+o),e+=": "+n)}else{e+="Unhandled promise rejection!\n";var s,u,c=t.promise?t:t.detail;c&&(s=c.reason,u=c.promise),s?(e+="Reason: ",s.stack?e+="\n"+s.stack:e+=s):u&&(e+="Promise: "+u)}return e}function s(t,e){var n=["<p>",t||"Your editor"];switch(n.push(" experienced a severe error."),e){case!0:n.push(" However, it successfully saved the latest state of your data to the server. Please reload.");break;default:n.push(" It was not able to save your data to the server before terminating.")}return n.push("</p>"),n.join("")}function u(t){function e(){if(l&&f.clearTimeout(l),1===i)c.push(s(void 0,u[0]?u[0][1]:void 0));else for(var t=0;t<u.length;++t){var e=u[t];c.push(s(y[e[0]].name,e[1]))}o(c.join(""),r)}function n(t){u.push([this,t])}if(t.preventDefault(),m)return!1;m=!0;var r=a(t),i=y.length,u=[],c=[],f=window;l=f.setTimeout(e,b),d=f;var p=[];console.error(r),h.error(r);for(var v=0;v<y.length;++v){var g=y[v],_=g.saver;if(_){var w=n.bind(g);p.push(_.recover().then(w,w))}}return Promise.all(p).then(e),!1}function c(t){try{try{u(t)}catch(t){o("","Error while trying to handle fatal error: "+t.toString())}}catch(t){console.error("Error while trying to handle fatal error:"),console.error(t)}}var l,d,f="undefined"!=typeof __WED_TESTING&&__WED_TESTING.testing,h=n(123),p=n(7),v=p('<div class="modal wed-fatal-modal" style="position: absolute" tabindex="1">  <div class="modal-dialog">    <div class="modal-content">      <div class="modal-header">        <button type="button" class="close" data-dismiss="modal"aria-hidden="true">&times;</button>        <h3>Fatal Error</h3>      </div>      <div class="modal-body">        <div class="save-messages"></div>        <div class="error-message"></div>      </div>      <div class="modal-footer">        <a href="#" class="btn btn-primary" data-dismiss="modal">Reload</a>      </div>    </div>  </div></div>'),m=!1;e.is_terminating=i,f&&(e.__test={$modal:v,reset:r});var y=[],b=5e3;e.handler=c,e.editors=y}.call(e,n,e,t))&&(t.exports=r)},function(t,e){t.exports={$schema:"http://json-schema.org/schema#",$id:"http://btw.mangalam-research.org/schemas/wed/options.json",title:"Options",description:"Options that may be passed to a new Wed instance.",definitions:{mode:{description:"Configures a mode.",type:"object",properties:{path:{description:"The path to the mode. Historically, wed has accepted the use of a shortened path here. So putting ``x`` would try to load the modules ``x``, ``wed/modes/x/x``, ``wed/modes/x/x-mode``, ``wed/modes/x/x_mode``. It is not recommended to do this anymore but to instead put a module name that the module loader can use immediately and irrespective of context.",type:"string"},submode:{description:"Configures a submode to use with the mode.",type:"object",properties:{method:{description:"The method by which we identify where the submode is operating.",type:"string",enum:["selector"]},selector:{description:"The CSS selector in the data tree that identifies regions where the submode is operating. This selector is subject to limitations explained in ``domutil.toGUISelector``. Note that the namespace prefixes in this selector are interpreted according to the mappings established by the parent mode.",type:"string"},mode:{$ref:"#/definitions/mode"}},additionalProperties:!1,required:["method","selector","mode"]},options:{description:"The mode\\'s options. Which options are available is determined by the mode.",type:"object"}},additionalProperties:!1,required:["path"]}},type:"object",properties:{name:{description:"An optional name for distinguishing one wed instance from another. Wed makes use of it only when dealing with some types of crashes.",type:"string"},demo:{description:"A flag indicating that the editor instance is a demo. You probably won\\'t use this. It is meant to be used for wed\\'s own demos. A dialog is brought up on startup with the value of this option when it is a string. Otherwise a default message is shown.",oneOf:[{type:"string"},{type:"boolean"}]},schema:{description:"The schema to use for editing.",oneOf:[{description:"A path to where the result of compiling the schema with Salve schema is located. Must be resolvable using the module system that is loading Wed.",type:"string"},{description:"A schema pre-compiled with Salve.",type:"object"}]},mode:{$ref:"#/definitions/mode"},docURL:{description:'A URL pointing to the embedded documentation. This is the URL that wed shows in the dialog that is presented when the user presses F1. The default value is "./doc/index.html", which works if you copy wed\\\'s distribution wholesale and use the ``kitchen-sink.html`` file to launch wed, or if you place the page that launches wed in the same location as ``kitchen-sink.html``. Otherwise, you need to provide a value here. It can be an absolute URL, or one that is relative to the path of the page that loads wed.',type:"string"},ajaxlog:{description:"Settings for remote logging.",type:"object",properties:{url:{description:"The URL where to send logs.",type:"string"},headers:{description:"Additional headers to use with logging requests.",type:"object",additionalProperties:{type:"string"}}},additionalProperties:!1,required:["url"]},save:{description:"Settings for saving files.",type:"object",properties:{path:{description:"Path to the module that implements saving.",type:"string"},options:{description:"Saver options. These are determined by the saver chosen.",type:"object"}},additionalProperties:!1,required:["path"]},bluejaxOptions:{description:"Options for configuring bluejax globally. What this can contain is determined by Bluejax.",type:"object"}},additionalProperties:!1,required:["schema","mode"]}},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(118),n(72)],void 0!==(i=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var i={tooltips:!1},a=function(){function t(t){if(void 0===t)return this.prefs=Object.create(null),void this._validatePrefs(this.prefs);this._validatePrefs(t),this.prefs=n.default.extend(Object.create(null),t)}return t.prototype._validatePrefs=function(t){r.assertSummarily(i,t)},t.prototype.get=function(t){for(var e=t.split("."),n=0,r=this.prefs;n<e.length;){var i=e[n];if(""===i)throw new Error("empty part in "+t);if(void 0===(r=r[i]))return;++n}return r},t.prototype.set=function(t,e){for(var n=t.split("."),r=0,i=this.prefs;r<n.length-1;){var o=n[r];if(""===o)throw new Error("empty part in "+t);i=i[o],void 0===i&&(i=i[o]=Object.create(null)),++r}i[n[r]]=e,this._validatePrefs(this.prefs)},t}();e.Preferences=a}.apply(e,r))&&(t.exports=i)},function(t,e){t.exports=f},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(276),n(7),n(17),n(27)],void 0!==(i=function(t,e,n,r,i){"use strict";function s(t){function e(e){if(arguments.length>1)throw new Error("we do not support passing the URL as a separate argument; please use a single settings argument");var r=o.call(void 0,e);return r.promise=r.promise.catch(n.ConnectivityError,function(e){document.body.appendChild(c),c.querySelector("span.reason").textContent=e.message,u.on("hide.bs.modal.modal",function(e){e.stopPropagation(),e.preventDefault(),i.suppressUnhandledRejections(a(t.diagnose.serverURL).then(function(){window.location.reload()}))}),u.modal(),r.promise.cancel()}),r}function r(t){return e(t).promise}var o=n.make(t),a=n.make({diagnose:{on:!0,knownServers:t.diagnose.knownServers}},"promise");return{ajax:r,ajax$:e}}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),r=a(r);var u=r.default("<div class='modal btw-fatal-modal' style='position: absolute' tabindex='1'>  <div class='modal-dialog'>    <div class='modal-content'>      <div class='modal-header'>        <button type='button' class='close' data-dismiss='modal'aria-hidden='true'>&times;</button>        <h3>Connectivity Problem</h3>      </div>      <div class='modal-body'>        <p>We have detected a connectivity problem:            <span class='reason'></span>.</p>        <p>When you click the Ok button, we will recheck the connectivity.            If there is still a problem, this dialog will remain. Otherwise,            the window will be reloaded. If you were modifying information            on the            site when the outage occurred, please verify that what you were            trying to do actually happened.</p>      </div>      <div class='modal-footer'>        <a href='#' class='btn btn-primary' data-dismiss='modal'>Ok</a>      </div>    </div>  </div></div>"),c=u[0];e.make=s}.apply(e,r))&&(t.exports=i)},function(t,e){t.exports=h},function(t,e,n){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";function n(t,e){var n=t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return e&&(n=n.replace(/"/g,"&quot;")),n}function r(t,e){if(e.childNodes.length>1)throw new Error("cannot serialize a document with more than one child node");if(null===e.firstChild)throw new Error("cannot serialize an empty document");a(t,e.firstChild)}function i(t,e){t.push("<",e.tagName);for(var r=e.attributes,i=0;i<r.length;++i){var o=r[i];t.push(" ",o.name,'="',n(o.value,!0),'"')}if(0===e.childNodes.length)t.push("/>");else{t.push(">");for(var s=e.firstChild;null!==s;)a(t,s),s=s.nextSibling;t.push("</",e.tagName,">")}}function o(t,e){t.push(n(e.textContent,!1))}function a(t,e){var n=u[e.nodeType];if(void 0===n)throw new Error("can't handle node of type: "+e.nodeType);n(t,e)}function s(t){var e=[];return a(e,t),e.join("")}Object.defineProperty(e,"__esModule",{value:!0});var u=Object.create(null);u[Node.DOCUMENT_NODE]=r,u[Node.DOCUMENT_FRAGMENT_NODE]=r,u[Node.ELEMENT_NODE]=i,u[Node.TEXT_NODE]=o,e.serialize=s}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(22),n(279)],void 0!==(i=function(t,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r=o(r);var i=function(){function t(t){this.maker=t,this.modals=new Map}return t.prototype.getModal=function(t){var e=this.modals.get(t);return void 0===e&&(e=this.make(t),this.modals.set(t,e)),e},t.prototype.make=function(t){var e=this.maker.makeModal();switch(t){case"limitation":e.setTitle("Cannot proceed");break;case"paste":e.setTitle("Invalid structure"),e.setBody("<p>The data you are trying to paste appears to be XML. However, pasting it here will result in a structurally invalid document. Do you want to paste it as text instead? (If you answer negatively, the data won't be pasted at all.)<p>"),e.addYesNo();break;case"straddling":e.setTitle("Invalid modification"),e.setBody("<p>The text selected straddles disparate elements of the document. You may be able to achieve what you want to do by selecting smaller sections.<p>"),e.addButton("Ok",!0);break;case"help":var i=this.maker.docURL,o="  <li>Ctrl-s: Save</li>\n  <li>Ctrl-x: Cut</li>\n  <li>Ctrl-v: Paste</li>\n  <li>Ctrl-c: Copy</li>\n  <li>Ctrl-z: Undo</li>\n  <li>Ctrl-y: Redo</li>\n  <li>Ctrl-/: Bring up a contextual menu.</li>\n  <li>Ctrl-?: Bring up a replacement menu.</li>\n  <li>Ctrl-f: Quick search forward.</li>\n  <li>Ctrl-b: Quick search backwards.</li>\n  <li>Ctrl-Shift-f: Search forward.</li>\n  <li>Ctrl-Shift-b: Search backwards.</li>\n";e.setTitle("Help"),e.setBody("\n<p>Click <a href='"+i+"' target='_blank'>this link</a> to see\nwed's generic help. The link by default will open in a new tab.</p>\n<ul>\n  <li>Clicking the right mouse button on the document contents brings up a\ncontextual menu.</li>\n  <li>F1: help</li>\n  "+(n.OSX?o.replace(/Ctrl-/g,"Cmd-"):"  <li>Ctrl-[: Decrease the label visibility level.</li>\n  <li>Ctrl-]: Increase the label visibility level.</li>\n"+o)+"\n</ul>\n<p class='wed-build-info'>Build descriptor: "+r.desc+"<br/>\nBuild date: "+r.date+"</p>"),e.addButton("Close",!0);break;case"disconnect":e.setTitle("Disconnected from server!"),e.setBody("It appears your browser is disconnected from the server. Editing is frozen until the connection is reestablished. Dismissing this dialog will retry saving. If the operation is successful, you'll be able to continue editing. If not, this message will reappear."),e.addButton("Retry",!0);break;case"editedByOther":e.setTitle("Edited by another!"),e.setBody("Your document was edited by someone else since you last loaded or saved it. You must reload it before trying to edit further."),e.addButton("Reload",!0);break;case"tooOld":e.setTitle("Newer version!"),e.setBody("There is a newer version of the editor. You must reload it before trying to edit further."),e.addButton("Reload",!0);break;default:var a=t;throw new Error("cannot handle name "+a)}return e},t}();e.StockModals=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[],void 0!==(i=function(){return{desc:"v2.0.0-3-g031e9d63",date:"Thu Jun 07 2018 11:01:25 GMT-0400 (EDT)"}}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(5),n(53)],void 0!==(i=function(t,e,n,r){"use strict";function i(t){return null==t?"undefined":t.outerHTML}Object.defineProperty(e,"__esModule",{value:!0}),r=a(r);var s=function(t){function e(e,n,r){var i=t.call(this,"InsertNodeAtUndo")||this;return i.treeUpdater=e,i.index=r,i.parentPath=e.nodeToPath(n),i}return o(e,t),e.prototype.performUndo=function(){if(void 0!==this.node)throw new Error("undo called twice in a row");var t=this.treeUpdater.pathToNode(this.parentPath);this.node=t.childNodes[this.index].cloneNode(!0),this.treeUpdater.deleteNode(t.childNodes[this.index])},e.prototype.performRedo=function(){if(void 0===this.node)throw new Error("redo called twice in a row");var t=this.treeUpdater.pathToNode(this.parentPath);this.treeUpdater.insertNodeAt(t,this.index,this.node),this.node=void 0},e.prototype.toString=function(){return[this.desc,"\n"," Parent path: ",this.parentPath,"\n"," Index: ",this.index,"\n"," Node: ",i(this.node),"\n"].join("")},e}(r.Undo),u=function(t){function e(e,n,r,i){var o=t.call(this,"SetTextNodeValueUndo")||this;return o.treeUpdater=e,o.value=r,o.oldValue=i,o.nodePath=e.nodeToPath(n),o}return o(e,t),e.prototype.performUndo=function(){var t=this.treeUpdater.pathToNode(this.nodePath);this.treeUpdater.setTextNodeValue(t,this.oldValue)},e.prototype.performRedo=function(){var t=this.treeUpdater.pathToNode(this.nodePath);this.treeUpdater.setTextNodeValue(t,this.value)},e.prototype.toString=function(){return[this.desc,"\n"," Node path: ",this.nodePath,"\n"," Value: ",this.value,"\n"," Old value: ",this.oldValue,"\n"].join("")},e}(r.Undo),c=function(t){function e(e,r){var i=t.call(this,"DeleteNodeUndo")||this;i.treeUpdater=e;var o=r.parentNode;return i.parentPath=e.nodeToPath(o),i.index=n.indexOf(o.childNodes,r),i.node=r.cloneNode(!0),i}return o(e,t),e.prototype.performUndo=function(){if(void 0===this.node)throw new Error("undo called twice in a row");var t=this.treeUpdater.pathToNode(this.parentPath);this.treeUpdater.insertNodeAt(t,this.index,this.node),this.node=void 0},e.prototype.performRedo=function(){if(void 0!==this.node)throw new Error("redo called twice in a row");var t=this.treeUpdater.pathToNode(this.parentPath);this.node=t.childNodes[this.index].cloneNode(!0),this.treeUpdater.deleteNode(t.childNodes[this.index])},e.prototype.toString=function(){return[this.desc,"\n"," Parent path: ",this.parentPath,"\n"," Index: ",this.index,"\n"," Node: ",i(this.node),"\n"].join("")},e}(r.Undo),l=function(t){function e(e,n,r,i,o,a){var s=t.call(this,"SetAttributeNSUndo")||this;return s.treeUpdater=e,s.ns=r,s.attribute=i,s.oldValue=o,s.newValue=a,s.nodePath=e.nodeToPath(n),s}return o(e,t),e.prototype.performUndo=function(){var t=this.treeUpdater.pathToNode(this.nodePath);this.treeUpdater.setAttributeNS(t,this.ns,this.attribute,this.oldValue)},e.prototype.performRedo=function(){var t=this.treeUpdater.pathToNode(this.nodePath);this.treeUpdater.setAttributeNS(t,this.ns,this.attribute,this.newValue)},e.prototype.toString=function(){return[this.desc,"\n"," Node path: ",this.nodePath,"\n"," Namespace: ",this.ns,"\n"," Attribute Name: ",this.attribute,"\n"," New value: ",this.newValue,"\n"," Old value: ",this.oldValue,"\n"].join("")},e}(r.Undo),d=function(){function t(t,e){var n=this;this.editor=t,this.treeUpdater=e,this.suppress=!1,e.events.subscribe(function(t){switch(t.name){case"InsertNodeAt":n.insertNodeAtHandler(t);break;case"SetTextNodeValue":n.setTextNodeValueHandler(t);break;case"BeforeDeleteNode":n.beforeDeleteNodeHandler(t);break;case"SetAttributeNS":n.setAttributeNSHandler(t)}})}return t.prototype.suppressRecording=function(t){if(t===this.suppress)throw new Error("spurious call to suppressRecording");this.suppress=t},t.prototype.insertNodeAtHandler=function(t){this.suppress||this.editor.recordUndo(new s(this.treeUpdater,t.parent,t.index))},t.prototype.setTextNodeValueHandler=function(t){this.suppress||this.editor.recordUndo(new u(this.treeUpdater,t.node,t.value,t.oldValue))},t.prototype.beforeDeleteNodeHandler=function(t){this.suppress||this.editor.recordUndo(new c(this.treeUpdater,t.node))},t.prototype.setAttributeNSHandler=function(t){this.suppress||this.editor.recordUndo(new l(this.treeUpdater,t.node,t.ns,t.attribute,t.oldValue,t.newValue))},t}();e.UndoRecorder=d}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(113),n(70),n(13),n(6),n(5),n(71),n(126),n(282),n(283),n(17),n(37)],void 0!==(i=function(t,e,n,r,i,o,a,s,u,c,l,d,f){"use strict";function h(t,e,n){var r=t.caretManager;try{return r.fromDataLocation(e,n)}catch(t){if(t instanceof s.AttributeNotFound)return r.fromDataLocation(e.ownerElement,0);throw t}}function p(t,e){for(var n=t.createDocumentFragment(),r=0,i=e;r<i.length;r++){var o=i[r];n.appendChild(o)}return n}function v(t,e){for(var n=[],r=t.getNames(),i=0,o=r;i<o.length;i++){var a=o[i],s=a.toArray(),u="";if(null!==s){for(var c=[],l=0,f=s;l<f.length;l++){var h=f[l];c.push(e.unresolveName(h.ns,h.name))}u=c.join(" or ")}else u=d.convertPatternObj(a.toObject(),e);n.push(u)}return n}Object.defineProperty(e,"__esModule",{value:!0});var m={};m[r.WorkingState.INCOMPLETE]="stopped",m[r.WorkingState.WORKING]="working",m[r.WorkingState.INVALID]="invalid",m[r.WorkingState.VALID]="valid";var y={};y[r.WorkingState.INCOMPLETE]="info",y[r.WorkingState.WORKING]="info",y[r.WorkingState.INVALID]="danger",y[r.WorkingState.VALID]="success";var b=function(){function t(t,e,n,r,i,o,a,s,d,f){this.editor=t,this.validator=e,this.resolver=n,this.scroller=r,this.guiRoot=i,this.progressBar=o,this.validationMessage=a,this.errorLayer=s,this.errorList=d,this.errorItemHandler=f,this.lastDoneShown=0,this.processErrorsDelay=500,this._errors=[],this.document=i.ownerDocument,this.$errorList=$(d),this.refreshErrorsRunner=new u.TaskRunner(new l.RefreshValidationErrors(this)),this.processErrorsRunner=new u.TaskRunner(new c.ProcessValidationErrors(this)),this.validator.events.addEventListener("state-update",this.onValidatorStateChange.bind(this)),this.validator.events.addEventListener("error",this.onValidatorError.bind(this)),this.validator.events.addEventListener("reset-errors",this.onResetErrors.bind(this))}return t.prototype.copyErrorList=function(){return this._errors.slice()},t.prototype.stop=function(){this.refreshErrorsRunner.stop(),this.processErrorsRunner.stop(),this.validator.stop()},t.prototype.resume=function(){this.refreshErrorsRunner.resume(),this.processErrorsRunner.resume(),this.validator.start()},t.prototype.onValidatorStateChange=function(t){var e=t.state,n=t.partDone;if(e===r.WorkingState.WORKING){if(n-this.lastDoneShown<.05)return}else e!==r.WorkingState.VALID&&e!==r.WorkingState.INVALID||this.processErrors();this.lastDoneShown=n;var i=100*n,o=this.progressBar;o.style.width=i+"%",o.classList.remove("progress-bar-info","progress-bar-success","progress-bar-danger"),o.classList.add("progress-bar-"+y[e]),this.validationMessage.textContent=m[e]},t.prototype.onValidatorError=function(t){this._errors.push({ev:t,marker:void 0,item:void 0}),void 0===this.processErrorsTimeout&&(this.processErrorsTimeout=setTimeout(this.processErrors.bind(this),this.processErrorsDelay))},t.prototype.onResetErrors=function(t){if(0!==t.at)throw new Error("internal error: wed does not yet support resetting errors at an arbitrary location");this.lastDoneShown=0,this.clearErrors()},t.prototype.processErrors=function(){void 0!==this.processErrorsTimeout&&(clearTimeout(this.processErrorsTimeout),this.processErrorsTimeout=void 0),this.processErrorsRunner.reset(),this.editor.resumeTaskWhenPossible(this.processErrorsRunner)},t.prototype.findInsertionPoint=function(t){var e=t.error,r=t.node,a=t.index;if(null==r)throw new Error("error without a node");if(void 0===a)throw new Error("error without an index");var s,u=e instanceof n.AttributeNameError;if(u){var c=f.getGUINodeIfExists(this.editor,r);if(void 0===c)return;var l=void 0;if(o.isAttr(r))l=c;else{if(!o.isElement(c))throw new Error("attribute name errors should be associated with elements");l=c.querySelector("._gui.__start_label ._greater_than")}s=i.DLoc.mustMakeDLoc(this.guiRoot,l,0)}else{if(void 0===(s=h(this.editor,r,a)))return;s=this.editor.caretManager.normalizeToEditableRange(s)}return s},t.prototype.processError=function(t){var e=this;this.editor.expandErrorPanelWhenNoNavigation();var n=t.ev,r=n.error,i=n.node;if(null==i)throw new Error("error without a node");var s=this.findInsertionPoint(n);if(void 0===s)return!1;var u=s.node;if(u.nodeType===Node.TEXT_NODE&&(u=u.parentNode),!o.isElement(u))throw new Error("we should be landing on an element");var c,l=t.marker;if(void 0===l){var h=v(r,this.resolver),p=s.node.ownerDocument;c=p.createElement("li");var m=c.id=d.newGenericID();if(o.isAttr(i)&&a.isNotDisplayed(u,s.root))c.textContent=r.toStringWithNames(h),c.title="This error belongs to an attribute which is not currently displayed.";else{l=p.createElement("span"),l.className="_phantom wed-validation-error";$(l).mousedown(function(){e.$errorList.parents(".panel-collapse").collapse("show");var t=$(e.errorList.querySelector("#"+m)),n=e.$errorList.parent(".panel-body");return n.animate({scrollTop:t.offset().top-n.offset().top+n[0].scrollTop}),e.errorLayer.select(l),t.siblings().removeClass("selected"),t.addClass("selected"),e.editor.caretManager.setCaret(s),!1});var y=l.id=d.newGenericID(),b=p.createElement("a");b.href="#"+y,b.textContent=r.toStringWithNames(h),c.appendChild(b),$(c.firstElementChild).click(t,this.errorItemHandler)}}if(void 0!==l){var g=f.boundaryXY(s),_=g.top,w=g.left,x=this.scroller,E=x.scrollTop,T=x.scrollLeft,C=this.scroller.getBoundingClientRect(),N=parseFloat(this.editor.window.getComputedStyle(u).fontSize),O=.2*N;l.style.height=O+"px",l.style.top=_+N-O-C.top+E+"px",l.style.left=w-C.left+T+"px"}return void 0===t.item&&(t.item=c),t.marker=l,!0},t.prototype.clearErrors=function(){this._errors=[],this.refreshErrorsRunner.stop(),this.processErrorsRunner.stop(),this.errorLayer.clear();for(var t=this.errorList;null!=t.lastChild;)t.removeChild(t.lastChild);this.refreshErrorsRunner.reset(),this.processErrorsRunner.reset()},t.prototype.terminate=function(){void 0!==this.processErrorsTimeout&&clearTimeout(this.processErrorsTimeout),this.stop()},t.prototype.refreshErrors=function(){this.refreshErrorsRunner.reset(),this.editor.resumeTaskWhenPossible(this.refreshErrorsRunner)},t.prototype.recreateErrors=function(){this.errorLayer.clear();for(var t=this.errorList;null!==t.lastChild;)t.removeChild(t.lastChild);for(var e=0,n=this._errors;e<n.length;e++){var r=n[e];r.marker=void 0,r.item=void 0}this.processErrors()},t.prototype.appendItems=function(t){this.errorList.appendChild(p(this.document,t))},t.prototype.appendMarkers=function(t){this.errorLayer.append(p(this.document,t))},t}();e.ValidationController=b}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.controller=t,this.errors=[]}return t.prototype.reset=function(){this.errors=this.controller.copyErrorList()},t.prototype.cycle=function(){var t=this.controller,e=this.errors;if(0===e.length)return!1;for(var n=Math.min(e.length,30),r=[],i=[],o=0;0!==n;){n--;var a=e[o];if(t.processError(a)){e.splice(o,1);var s=a.item;if(void 0===s)throw new Error("there should be an item");r.push(s);var u=a.marker;null!=u&&i.push(u)}else++o}return t.appendItems(r),t.appendMarkers(i),0!==e.length},t}();e.ProcessValidationErrors=n}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e],void 0!==(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.controller=t,this.errors=[],this.resumeAt=0}return t.prototype.reset=function(){this.errors=this.controller.copyErrorList(),this.resumeAt=0},t.prototype.cycle=function(){for(var t=this.resumeAt,e=Math.min(this.errors.length,this.resumeAt+20),n=this.errors;t<e;){var r=n[t];null!=r.marker&&this.controller.processError(r),t++}return this.resumeAt=t,t<n.length},t}();e.RefreshValidationErrors=n}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(53)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=a(n);var r=function(t){function e(e,n){var r=t.call(this,e)||this;return r.editor=n,r.caretAsPathBefore=r.getDataCaretAsPath(),r}return o(e,t),e.prototype.performUndo=function(){t.prototype.performUndo.call(this),this.setDataCaretAsPath(this.caretAsPathBefore)},e.prototype.performRedo=function(){if(t.prototype.performRedo.call(this),void 0===this.caretAsPathAfter)throw new Error("caretAsPathAfter is undefined, this indicates a corrupted state and thus an internal error");this.setDataCaretAsPath(this.caretAsPathAfter)},e.prototype.getDataCaretAsPath=function(){var t=this.editor.caretManager.getDataCaret(!0);return void 0===t?[void 0,void 0]:[this.editor.dataUpdater.nodeToPath(t.node),t.offset]},e.prototype.setDataCaretAsPath=function(t){void 0===t[0]&&void 0===t[1]||this.editor.caretManager.setCaret(this.editor.dataUpdater.pathToNode(t[0]),t[1])},e.prototype.recordCaretAfter=function(){this.caretAsPathAfter=this.getDataCaretAsPath()},e.prototype.end=function(){void 0===this.caretAsPathAfter&&this.recordCaretAfter()},e}(n.UndoGroup);e.UndoGroup=r;var i=function(t){function e(e,n,r,i){var o=t.call(this,e,n)||this;return o.undoList=r,o.limit=i,o}return o(e,t),e.prototype.record=function(e){if(this.list.length>=this.limit)throw new Error("TextUndoGroup.record called beyond the limit");t.prototype.record.call(this,e),this.list.length===this.limit&&this.undoList.endGroup()},e}(r);e.TextUndoGroup=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(6),n(5),n(286),n(39)],void 0!==(i=function(t,e,n,r,i,a){"use strict";function s(t,e){var i=e.node,o=e.sep;if("string"!=typeof o||1!==o.length)throw new Error("transformation invoked with incorrect data");for(var a=!0;a;){a=!1;for(var s=[],u=i.firstChild;null!==u;)n.isText(u)&&s.push(u),u=u.nextSibling;for(var c=0;!a&&c<s.length;++c){var l=s[c],d=l.data.indexOf(o);if(i.firstChild===l&&0===d)t.dataUpdater.deleteText(l,d,1),a=!0;else if(i.lastChild===l&&-1!==d&&d===l.length-1)t.dataUpdater.deleteText(l,l.length-1,1),a=!0;else if(-1!==d){var f=t.dataUpdater.splitAt(i,l,d),h=f[1];if(null===h)throw new Error("null end; we should not be getting that");i=h,a=!0}}}t.caretManager.setCaret(r.firstDescendantOrSelf(i),0)}function u(t,e,r,o,u,c){var l=new a.Transformation(t,"split","Split node on character",s),d=new i.InputTrigger(t,e,r);return d.addKeyHandler(o,function(e,n,r){void 0!==r&&(r.stopImmediatePropagation(),r.preventDefault()),"keypress"===e||"keydown"===e?t.fireTransformation(t.splitNodeTr,{node:n}):t.fireTransformation(l,{name:n.tagName,node:n,sep:String.fromCharCode(o.which)})}),d.addKeyHandler(u,function(e,r,i){var o=t.caretManager.getDataCaret();null!=o&&0===o.offset&&(o.node===r||n.isText(o.node)&&o.node===r.firstChild)&&(void 0!==i&&(i.stopImmediatePropagation(),i.preventDefault()),t.fireTransformation(t.mergeWithPreviousHomogeneousSiblingTr,{node:r,name:r.tagName}))}),d.addKeyHandler(c,function(e,r,i){var o=t.caretManager.getDataCaret();null!=o&&(o.node===r&&o.offset===r.childNodes.length||n.isText(o.node)&&o.node===r.lastChild&&o.offset===r.lastChild.length)&&(void 0!==i&&(i.stopImmediatePropagation(),i.preventDefault()),t.fireTransformation(t.mergeWithNextHomogeneousSiblingTr,{node:r,name:r.tagName}))}),d}Object.defineProperty(e,"__esModule",{value:!0}),r=o(r),a=o(a),e.makeSplitMergeInputTrigger=u}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};r=[n,e,n(7),n(6),n(5)],void 0!==(i=function(t,e,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n=o(n);var a=function(){function t(t,e,n){this.editor=t,this.mode=e,this.selector=n,this.keyToHandler=new Map,this.textInputKeyToHandler=new Map,t.$guiRoot.on("wed-post-paste",this.pasteHandler.bind(this)),t.$guiRoot.on("wed-input-trigger-keydown",this.keydownHandler.bind(this)),t.$guiRoot.on("wed-input-trigger-keypress",this.keypressHandler.bind(this))}return t.prototype.addKeyHandler=function(t,e){var n=this.keyToHandler.get(t);void 0===n&&(n=[],this.keyToHandler.set(t,n)),n.push(e),!t.anyModifier()&&t.keypress&&(this.textInputKeyToHandler.has(t)||this.textInputKeyToHandler.set(t,n))},t.prototype.getNodeOfInterest=function(){var t=this.editor.caretManager.getDataCaret(!0);if(null==t)return null;if(this.editor.modeTree.getMode(t.node)!==this.mode)return null;var e=r.isText(t.node)?t.node.parentNode:t.node,o=n.default.data(e,"wed_mirror_node");return i.closest(o,this.selector.value,this.editor.guiRoot)},t.prototype.keydownHandler=function(t,e){var r=this.getNodeOfInterest();if(null!==r){var i=n.default.data(r,"wed_mirror_node");this.keyToHandler.forEach(function(t,n){if(n.matchesEvent(e))for(var r=0,o=t;r<o.length;r++){var a=o[r];a("keydown",i,e)}})}},t.prototype.keypressHandler=function(t,e){var r=this.getNodeOfInterest();if(null!==r){var i=n.default.data(r,"wed_mirror_node");this.keyToHandler.forEach(function(t,n){if(n.matchesEvent(e))for(var r=0,o=t;r<o.length;r++){var a=o[r];a("keypress",i,e)}})}},t.prototype.pasteHandler=function(t,e,o,a){if(!this.editor.undoingOrRedoing()){for(var s=[],u=a.firstChild;null!==u;)r.isText(u)&&s.push(u),u=u.nextSibling;if(0!==s.length&&this.editor.modeTree.getMode(o.node)===this.mode){var c=r.isText(o.node)?o.node.parentNode:o.node,l=n.default.data(c,"wed_mirror_node");null!==i.closest(l,this.selector.value,this.editor.guiRoot)&&this.textInputKeyToHandler.forEach(function(t,n){if(!n.anyModifier())for(var r=String.fromCharCode(n.which),i=0,o=s;i<o.length;i++){var a=o[i];if(null!==a.parentNode&&a.data.indexOf(r)>-1)for(var u=0,l=t;u<l.length;u++){var d=l[u];d("paste",c,e)}}})}}},t}();e.InputTrigger=a}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();r=[n,e],void 0!==(i=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.name=t,this._idToLabel=Object.create(null),this.labelIndex=0}return t.prototype.idToLabel=function(t){return this._idToLabel[t]},t.prototype.deallocateAll=function(){this._idToLabel=Object.create(null),this.labelIndex=0,this._deallocateAllLabels()},t.prototype.nextNumber=function(){return++this.labelIndex},t}();e.LabelManager=n;var r="abcdefghijklmnopqrstuvwxyz",i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.allocateLabel=function(t){var e=this._idToLabel[t];if(void 0===e){var n=this.nextNumber()-1,i=Math.floor(n/26)+1;e=r[n%26].repeat(i),this._idToLabel[t]=e}return e},e.prototype._deallocateAllLabels=function(){},e}(n);e.AlphabeticLabelManager=i}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i,o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};r=[n,e,n(7),n(13),n(6),n(5),n(117),n(17)],void 0!==(i=function(t,e,n,r,i,s,u,c){"use strict";function l(t,e){try{t.caretManager.setCaret(e,{textEdit:!0})}catch(t){}}function d(t,e){return"*"===t||t===e}Object.defineProperty(e,"__esModule",{value:!0}),n=o(n),s=a(s),c=a(c);var f=s.indexOf,h=s.closestByClass,p=function(){function t(t,e){this.mode=t,this.editor=e,this.domlistener=e.domlistener,this.guiUpdater=e.guiUpdater,this.namespaces=t.getAbsoluteNamespaceMappings()}return t.prototype.startListening=function(){this.domlistener.startListening()},t.prototype.listDecorator=function(t,e){if(this.editor.modeTree.getMode(t)===this.mode){for(var n=Object.create(null),r=t.firstElementChild;null!==r;)r.classList.contains("_real")&&(n[c.getOriginalName(r)]=1),r=r.nextElementSibling;var i=Object.keys(n);if(i.length>1)throw new Error("calling listDecorator on a non-homogeneous list.");if(0!==i.length){for(r=t.firstElementChild;null!==r;){var o=r.nextElementSibling;r.hasAttribute("data-wed--separator-for")&&this.guiUpdater.removeNode(r),r=o}var a,s=i[0];"string"==typeof e?(a=t.ownerDocument.createElement("div"),a.textContent=e):a=e,a.classList.add("_text"),a.classList.add("_phantom"),a.setAttribute("data-wed--separator-for",s);var u=!0;for(r=t.firstElementChild;null!==r;)r.classList.contains("_real")&&(u?u=!1:this.guiUpdater.insertBefore(t,a.cloneNode(!0),r)),r=r.nextElementSibling}}},t.prototype.elementDecorator=function(t,e,r,o,a){if(this.editor.modeTree.getMode(e)===this.mode){if(r>this.editor.maxLabelLevel)throw new Error("level higher than the maximum set by the mode: "+r);var u=this.editor.caretManager.getDataCaret();null==u||i.isAttr(u.node)&&u.node.ownerElement===n.default.data(e,"wed_mirror_node")||(u=void 0);var d=n.default.data(e,"wed_mirror_node");this.setReadOnly(e,Boolean(this.editor.validator.getNodeProperty(d,"PossibleDueToWildcard")));for(var f=c.getOriginalName(e),h="_"+f+"_label",p=s.childrenByClass(e,h),v=0,m=p;v<m.length;v++){var y=m[v];e.removeChild(y)}var b="",g=!1,_=this.editor.modeTree.getAttributeHandling(e);if("show"===_||"edit"===_)for(var w=c.getOriginalAttributes(e),x=Object.keys(w).sort(),E=0,T=x;E<T.length;E++){var C=T[E],N=this.mustHideAttribute(e,C);N&&(g=!0);var O=N?" _shown_when_caret_in_label":"";b+=' <span class="_phantom _attribute'+O+'"><span class="_phantom _attribute_name">'+C+'</span>="<span class="_phantom _attribute_value">'+s.textToHTML(w[C])+'</span>"</span>'}var S=e.ownerDocument;h+=" _label_level_"+r;var k=h;g&&(h+=" _autohidden_attributes");var A=S.createElement("span");A.className="_gui _phantom __start_label _start_wrapper "+h+" _label";var j=S.createElement("span");j.className="_phantom",j.innerHTML="&nbsp;<span class='_phantom _element_name'>"+f+"</span>"+b+"<span class='_phantom _greater_than'> >&nbsp;</span>",A.appendChild(j),this.guiUpdater.insertNodeAt(e,0,A);var M=S.createElement("span");M.className="_gui _phantom __end_label _end_wrapper "+k+" _label";var R=S.createElement("span");R.className="_phantom",R.innerHTML="<span class='_phantom _less_than'>&nbsp;&lt; </span><span class='_phantom _element_name'>"+f+"</span>&nbsp;",M.appendChild(R),this.guiUpdater.insertBefore(e,M,null),n.default(A).on("wed-context-menu",void 0!==o&&o),n.default(M).on("wed-context-menu",void 0!==a&&a),null!=u&&l(this.editor,u)}},t.prototype.mustHideAttribute=function(t,e){var n=this.editor.modeTree.getAttributeHidingSpecs(t);if(null===n)return!1;for(var r=0,i=n.elements;r<i.length;r++){var o=i[r];if(t.matches(o.selector)){for(var a=!1,s=0,u=o.attributes;s<u.length;s++){var c=u[s];if("string"==typeof c)a||(a=d(c,e));else if(a)for(var l=0,f=c.except;l<f.length;l++){var h=f[l];if(!(a=!d(h,e)))break}}return a}}return!1},t.prototype.setReadOnly=function(t,e){var n=t.classList;(e?n.add:n.remove).call(n,"_readonly")},t.prototype.contextMenuHandler=function(t,e,i){function o(t,e,n){var r=d.makeMenuItemForAction(e,t,n);v.push({action:e,item:r,data:t})}function a(t,e,n){if(void 0!==e)for(var r=0,i=e;r<i.length;r++){var a=i[r];o(t,a,n)}}function s(t,e){var n=t.params[1];if(n.simple())for(var r=0,i=n.toArray();r<i.length;r++){var s=i[r],u=m.getAbsoluteResolver().unresolveName(s.ns,s.name);if(void 0===u)throw new Error("cannot unresolve attribute");if(l.isAttrProtected(u,e))return;a({name:u,node:e},m.getContextualActions("add-attribute",u,e))}else o(null,l.complexPatternAction)}var l=this.editor,d=l.editingMenuManager,p=e.target,v=[],m=l.modeTree.getMode(p),y=h(p,"_real",l.guiRoot),b=null!==y&&y.classList.contains("_readonly"),g=h(p,"_attribute_value",l.guiRoot);if(null!==g){var _=l.toDataNode(g),w=r.DLoc.mustMakeDLoc(l.dataRoot,_.ownerElement),x=w.node.childNodes[w.offset];l.validator.possibleAt(w,!0).forEach(function(t){"attributeName"===t.params[0]&&s(t,x)});var E=_.name;l.isAttrProtected(_)||a({name:E,node:_},m.getContextualActions("delete-attribute",E,_))}else{var T=h(p,"_real",l.guiRoot);if(null===T)throw new Error("cannot find real parent");p=T;var C=p.parentNode===l.guiRoot;v.push.apply(v,d.makeCommonItems(l.toDataNode(p)));var N=c.getOriginalName(p);C||a({node:p,name:N},m.getContextualActions(["unwrap","delete-element"],N,n.default.data(p,"wed_mirror_node"),0));var O=p.parentNode,S=f(O.childNodes,p);t||S++;var w=l.caretManager.toDataLocation(O,S);if(void 0===w)throw new Error("cannot get caret");if(t){var k=w.node.childNodes[w.offset];"edit"===l.modeTree.getAttributeHandling(k)&&l.validator.possibleAt(w,!0).forEach(function(t){"attributeName"===t.params[0]&&s(t,k)})}if(!C){for(var A=0,j=l.getElementTransformationsAt(w,"insert");A<j.length;A++){var M=j[A];void 0!==M.name?o({name:M.name,moveCaretTo:w},M.tr,t):o(null,M.tr)}if(t)for(var R=w.make(w.node.childNodes[w.offset],0),D=0,L=l.getElementTransformationsAt(R,"wrap-content");D<L.length;D++){var M=L[D];o(void 0!==M.name?{name:M.name,node:p}:null,M.tr)}}}return 0===v.length||(d.setupContextMenu(u.ActionContextMenu,v,b,i),!1)},t}();e.Decorator=p}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(5)],void 0!==(i=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e){this.value=e;var n=t.__cache[e];if(void 0!==n)return n;t.__cache[e]=this}return t.makeVerbatim=function(e){return new t(e)},t.fromDataSelector=function(e,r){return new t(n.toGUISelector(e,r))},t.__cache=Object.create(null),t}();e.GUISelector=r}.apply(e,r))&&(t.exports=i)},function(t,e,n){var r,i;r=[n,e,n(76)],void 0!==(i=function(t,e,n){/**
     * The base types for modes.
     *
     * @author Louis-Dominique Dubeau
     * @license MPL 2.0
     * @copyright Mangalam Research Center for Buddhist Languages
     */
"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.editor=t,this.options=e,this.wedOptions={metadata:{name:"Base Mode (you should not be using this)",description:"The base mode. You should not be using it directly.",authors:["Louis-Dominique Dubeau"],license:"MPL 2.0",copyright:"Mangalam Research Center for Buddhist Languages"},label_levels:{max:1,initial:1}}}return t.prototype.getModeOptions=function(){return this.options},t.prototype.getWedOptions=function(){return this.wedOptions},t.prototype.getStylesheets=function(){return[]},t.prototype.nodesAroundEditableContents=function(t){for(var e,r,i=null,o=null,a=t.firstChild,s=0;null!==a;){if(n.domtypeguards.isElement(a)&&(a.classList.contains("_start_wrapper")&&(e=s,i=a),a.classList.contains("_end_wrapper"))){r=s,o=a;break}a=a.nextSibling,s++}if(void 0!==e&&void 0!==r&&r<=e)throw new Error("end wrapper element unexpectedly appears before start wrapper element, or is also a start wrapper element");return[i,o]},t.prototype.makePlaceholderFor=function(t){return n.domutil.makePlaceholder()},t.prototype.shortDescriptionFor=function(t){},t.prototype.documentationLinkFor=function(t){},t.prototype.getValidator=function(){},t.prototype.getAttributeCompletions=function(t){return[]},t.prototype.getToolbarButtons=function(){return[]},t}();e.BaseMode=r}.apply(e,r))&&(t.exports=i)}])});
//# sourceMappingURL=wed.min.map.js